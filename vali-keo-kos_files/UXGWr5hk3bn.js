if (self.CavalryLogger) { CavalryLogger.start_js(["yH66z"]); }

__d("PinnedConversationNubsActionTaken",[],(function(a,b,c,d,e,f){e.exports={TAB_CLOSED_BY_USER:0}}),null);
__d("FacebookWebNotificationsSubscriptionWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function(a,b,c,d,e,f){"use strict";e.exports=b("WebGraphQLSubscriptionHelper").getExports({docID:"2382846945064526",queryID:"1138169679678964"})}),null);
__d("FacebookWebNotificationsSubscription",["invariant","BaseGraphQLSubscription","CurrentUser","FacebookWebNotificationsSubscriptionWebGraphQLSubscription","SubscriptionsHandler","WebPixelRatio","uuid"],(function(a,b,c,d,e,f,g){__p&&__p();var h="WEB_DESKTOP",i=[],j=null,k=babelHelpers["extends"]({},b("BaseGraphQLSubscription"),{_getTopic:function(a){return"gqls/"+this._getSubscriptionCallName()+"/actor_id_"+a.actorID+"_environment_"+h},_getQueryID:function(){return b("FacebookWebNotificationsSubscriptionWebGraphQLSubscription").getDocID()},_getQueryParameters:function(a){return{input:JSON.stringify({client_subscription_id:b("uuid")(),environment:h}),is_work_user:b("CurrentUser").isWorkUser(),scale:b("WebPixelRatio").get()}},_getSubscriptionCallName:function(){return"web_notification_receive_subscribe"}});function l(a){__p&&__p();if(a.__type==="lifecycle_event")return;a=a.web_notification_receive_subscribe;if(a==null)return;var b=a.aggregated_notification,c=a.notification,d=a.pinned_conversation,e=a.should_play_sound,f=a.should_show_beeper;i.forEach(function(a){switch(a.event){case"NEW_BEEPER":c!=null&&f===!0&&a.callback({notification:c,should_play_sound:!!e});break;case"NEW_NOTIFICATION":b!=null&&a.callback(b);break;case"NEW_PINNED_CONVERSATION":d!=null&&a.callback(d);break}})}e.exports={subscribe:function(a){__p&&__p();i.push(a);j===null&&(j=new(b("SubscriptionsHandler"))(),j.addSubscriptions(k.subscribe({actorID:b("CurrentUser").getID()},l,{receiveLifecycleEvents:!0})));var c=!1;return{remove:function(){if(c===!0)return;j!=null||g(0,3589);c=!0;i.splice(i.indexOf(a),1);i.length===0&&(j.release(),j=null)}}}}}),null);
__d("NotifTestIDs",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({REACT_BLUE_BAR_JEWEL:"react_blue_bar_jewel",NON_REACT_BLUE_BAR_JEWEL:"non_react_blue_bar_jewel",REACT_NOTIF_LIST:"react_notif_list",NOTIF_LIST_ITEM:"notif_list_item",SEE_ALL_LIST:"see_all_list",REACT_NOTIF_JEWEL_FLYOUT:"react_notif_jewel_flyout",NON_REACT_NOTIF_JEWEL_FLYOUT:"non_react_notif_jewel_flyout",CHEVRON:"chevron",REACT_MARK_ALL_AS_READ_LINK:"react_mark_all_as_read_link",NON_REACT_MARK_ALL_AS_READ_LINK:"non_react_mark_all_as_read_link",NOTIFICATION_SOUND_SETTING:"notifiation_sound_setting",NOTIFICATION_SOUND_SETTING_SELECTOR:"notifiation_sound_setting_selector",MESSAGE_SOUND_SETTING:"message_sound_setting",MESSAGE_SOUND_SETTING_SELECTOR:"message_sound_setting_selector",CLOSE_FRIEND_ACTIVITY_SELECTOR:"close_friend_activity_selector",BIRTHDAY_SELECTOR:"birthday_selector",ON_THIS_DAY_SELECTOR:"on_this_day_selector",TAGS_SELECTOR:"tags_selector",LIVE_VIDEO_SELECTOR:"live_video_selector",REACT_BADGE_COUNT_CONTAINER:"react_badge_count_container",NON_REACT_BADGE_COUNT_CONTAINER:"non_react_badge_count_container",BEEPER_LIST:"beeper_list",NON_REACT_SETTING_LINK:"non_react_setting_link",REACT_SETTING_LINK:"react_setting_link",GEOGRAPHIC_SUBSCRIPTION_SELECTOR:"geographic_subscription_selector"})}),null);
__d("NotificationBeeperConst",["keyMirror"],(function(a,b,c,d,e,f){a={IDLE_DELAY:1e4,ACTIVE_DELAY_LONG:4e3,FADE_OUT_LENGTH:1500,BeepStates:b("keyMirror")({PENDING:!0,RENDERED:!0,READY_TO_HIDE:!0,FADING_OUT:!0})};e.exports=a}),null);
__d("FBProfilePhotoShadow.react",["cx","React","joinClasses"],(function(a,b,c,d,e,f,g){__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){"use strict";var a=this.props,c=a.className,d=a.children;a=babelHelpers.objectWithoutProperties(a,["className","children"]);d=b("React").Children.only(d);return b("React").createElement("div",babelHelpers["extends"]({},a,{className:b("joinClasses")(c,"_38vo")}),b("React").cloneElement(d,{className:b("joinClasses")(d.props.className,"_44ma")}))};function a(){"use strict";h.apply(this,arguments)}e.exports=a}),null);
__d("NotificationBeeperItemCloseButton.react",["cx","fbt","React","XUIAbstractGlyphButton.react"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){"use strict";var a=h._("Close");return b("React").createElement(b("XUIAbstractGlyphButton.react"),babelHelpers["extends"]({},this.props,{className:"_3soc",title:a,label:a,labelIsHidden:!0}))};function a(){"use strict";i.apply(this,arguments)}e.exports=a}),null);
__d("NotificationInterpolator",["cx","Badge.react","React","TextWithEmoticons.react","joinClasses"],(function(a,b,c,d,e,f,g){function a(a,c){var d=null;((c=c.entity)!=null?(c=c.work_foreign_entity_info)!=null?c.type:c:c)==="FOREIGN"&&(d=b("React").createElement(b("Badge.react"),{type:"work_non_coworker"}));typeof a==="string"&&(a=b("React").createElement(b("TextWithEmoticons.react"),{text:a}));return b("React").createElement("span",{className:b("joinClasses")("fwb","_6btd")},a,d)}e.exports=a}),null);
__d("FeedQuickLogModule",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CACHE_FETCH:655545,COMMENT_TTL_WWW:655585,CONSUMPTION_RESTORATION_WWW:655575,IMAGE_LOAD_WWW:655576,LOAD:655546,LOAD_ANY_DESTINATION_FROM_NOTIFICATIONS_WWW:655596,LOAD_STORY_PERMALINK_FROM_ANYWHERE_WWW:655597,MAIN_THREAD_PERFORMANCE:655595,NETWORK_FETCH:655544,NEWSFEED_NETWORK_FETCH_MOBILE:655612,NOTIFICATION_INTERACTION_WWW:655584,POST_STARTUP:655535,SCROLL_PERF:655590})}),null);
__d("NotificationURI",["BusinessURI.brands","URI","VideoPermalinkURI","isFacebookURI"],(function(a,b,c,d,e,f){__p&&__p();a={localize:function(a){try{a=b("BusinessURI.brands")(a)}catch(b){return a.toString()}var c=a.getSubdomain();return a.getUnqualifiedURI().getQualifiedURI().setSubdomain(c).toString()},snowliftable:function(a){if(!a)return!1;a=new(b("URI"))(a);var c=a.getQueryData();return b("isFacebookURI")(a)&&(b("VideoPermalinkURI").isValid(a)||"fbid"in c)},isVaultSetURI:function(a){return this._areEquals(a,"/ajax/vault/sharer_preview.php")},isAlbumDraftRecoveryDialogURI:function(a){return this._areEquals(a,"/ajax/photos/upload/overlay/")},isQuicksilverURI:function(a){return this._areEquals(a,"/games/quicksilver/spotlight/")},isDirectURI:function(a){return this._startsWith(a,"/direct/")},isIGAccountCreationURI:function(a){return this._areEquals(a,"/ads/growth/aymt/instagram/account-creation-dialog/")},_areEquals:function(a,c){if(!a)return!1;a=new(b("URI"))(a);return b("isFacebookURI")(a)&&a.getPath()===c},_startsWith:function(a,c){if(!a)return!1;a=new(b("URI"))(a);return b("isFacebookURI")(a)&&a.getPath().startsWith(c)}};e.exports=a}),null);
__d("QPLTimeToLoadHelper",["QuickPerformanceLogger","Run","crc32","performance"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){return a&&b("crc32")(a)||0}function h(a){return b("performance")&&b("performance").timing&&b("performance").timing.navigationStart&&a<b("performance").timing.navigationStart?a+b("performance").timing.navigationStart:a}function i(a){a.time!=null&&(a.time=h(a.time));var c=g(a.instanceKey);b("QuickPerformanceLogger").markerStart(a.qplMarker,c,a.time);b("QuickPerformanceLogger").annotateMarkerString(a.qplMarker,"SOURCE",a.source,c);b("Run").onUnload(function(){return b("QuickPerformanceLogger").markerEnd(a.qplMarker,"CANCEL",c)})}a={startWithClickEvent:function(a){i(babelHelpers["extends"]({},a,{time:a.event.timeStamp}))},start:function(a){i(a)},annotateString:function(a){var c=g(a.instanceKey);b("QuickPerformanceLogger").annotateMarkerString(a.qplMarker,a.annotationKey,a.annotationValue,c)},annotateInt:function(a){var c=g(a.instanceKey);b("QuickPerformanceLogger").annotateMarkerInt(a.qplMarker,a.annotationKey,a.annotationValue,c)},addPoint:function(a){var c=g(a.instanceKey);b("QuickPerformanceLogger").markerPoint(a.qplMarker,a.pointName,a.data,c,a.time!=null?h(a.time):a.time)},end:function(a){var c=a.time!=null?h(a.time):a.time,d=g(a.instanceKey);b("QuickPerformanceLogger").annotateMarkerInt(a.qplMarker,"END_TIME",c==null?-1:c,d);b("QuickPerformanceLogger").markerEnd(a.qplMarker,a.action?a.action:"SUCCESS",d,c)}};e.exports=a}),null);
__d("XLiveVideoLoadController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/live/video/load/",{video_id:{type:"FBID",required:!0}})}),null);
__d("NotificationListRendererUtils",["AsyncRequest","Bootloader","FBLogger","FeedQuickLogModule","NavigationMetrics","NotificationURI","PageTransitions","QPLTimeToLoadHelper","URI","VideoChainingCaller","XLiveVideoLoadController","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(event,a){b("Bootloader").loadModules(["FBStoriesLiveNotificationHandler"],function(b){b.renderLiveStory(a)},"NotificationListRendererUtils")}function h(event,a,c){b("Bootloader").loadModules(["TahoeController"],function(d){var e=b("NotificationURI").localize(new(b("URI"))(c.url)),f=a.video_channel_caller;d.openFromVideoLink(new(b("URI"))(e),{channelID:a.video_channel_id,caller:f?(d=b("VideoChainingCaller"))!=null?d[f]:d:null})},"NotificationListRendererUtils")}function i(a,c){b("QPLTimeToLoadHelper").start({source:"notifications",qplMarker:b("FeedQuickLogModule").COMMENT_TTL_WWW,time:a.timeStamp}),c.notif_type?b("QPLTimeToLoadHelper").annotateString({source:"notifications",qplMarker:b("FeedQuickLogModule").COMMENT_TTL_WWW,annotationKey:"NOTIF_TYPE",annotationValue:c.notif_type}):b("FBLogger")("comet_notifications").addMetadata("COMET_NOTIFICATION","ALERT_ID",c.alert_id||"UNKONWN").mustfix("Missing notification type",c.alert_id)}function j(a,c){b("QPLTimeToLoadHelper").start({source:"notifications",qplMarker:b("FeedQuickLogModule").LOAD_ANY_DESTINATION_FROM_NOTIFICATIONS_WWW,time:a.timeStamp}),c.notif_type?b("QPLTimeToLoadHelper").annotateString({source:"notifications",qplMarker:b("FeedQuickLogModule").LOAD_ANY_DESTINATION_FROM_NOTIFICATIONS_WWW,annotationKey:"NOTIF_TYPE",annotationValue:c.notif_type}):b("FBLogger")("comet_notifications").addMetadata("COMET_NOTIFICATION","ALERT_ID",c.alert_id||"UNKONWN").mustfix("Missing notification type"),b("NavigationMetrics").once(b("NavigationMetrics").Events.NAVIGATION_DONE,function(a,c){a=c.tti;c.tti||(a=c.e2e,b("QPLTimeToLoadHelper").annotateString({qplMarker:b("FeedQuickLogModule").LOAD_STORY_PERMALINK_FROM_ANYWHERE_WWW,annotationKey:"TIMESTAMP_ERROR",annotationValue:"NO_TTI"}));b("QPLTimeToLoadHelper").end({qplMarker:b("FeedQuickLogModule").LOAD_ANY_DESTINATION_FROM_NOTIFICATIONS_WWW,time:a})})}var k={openNotification:function(event,a){__p&&__p();var c=a.renderer_data;if(c==null)return;if(!k.isStoryOnlyLiveVideoNotification(a)&&(event.metaKey||event.ctrlKey||event.button===1))return;if(c.__typename==="LiveVideoNotificationRendererData"){event.preventDefault();c=b("XLiveVideoLoadController").getURIBuilder().setFBID("video_id",c.video_id).getURI();c=new(b("AsyncRequest"))(c).setHandler(function(c){c.payload?k.openNotificationInSurface(event,a):b("PageTransitions").go(a.url)});c.send()}},openNotificationInSurface:function(event,a){var b=a.renderer_data;if(b==null)return;b.bucket_data?g(event,b):b.can_render_in_tahoe&&h(event,b,a)},isStoryOnlyLiveVideoNotification:function(a){a=a.renderer_data;return a==null?!1:a.__typename==="LiveVideoNotificationRendererData"&&!!a.bucket_data},startTTLMarkers:function(a,c){b("gkx")("678283")&&i(a,c),b("gkx")("678284")&&j(a,c)}};e.exports=k}),null);
__d("NotificationConstants",[],(function(a,b,c,d,e,f){e.exports={PayloadSourceType:{UNKNOWN:0,USER_ACTION:1,LIVE_SEND:2,ENDPOINT:3,INITIAL_LOAD:4,OTHER_APPLICATION:5,SYNC:6,CLIENT:7}}}),null);
__d("NotificationOptionActionWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLMutationBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1420844941369152"};c.getQueryID=function(){"use strict";return"318967338567215"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("NotificationTokens",["CurrentUser"],(function(a,b,c,d,e,f){a={tokenizeIDs:function(a){return a.map(function(a){return b("CurrentUser").getID()+":"+a})},untokenizeIDs:function(a){return a.map(function(a){return a.split(":")[1]})}};e.exports=a}),null);
__d("NotificationUpdates",["Arbiter","LiveTimer","NotificationConstants","createObjectFrom"],(function(a,b,c,d,e,f){__p&&__p();var g={},h={},i={},j={},k=!1,l=[],m=0,n=new(b("Arbiter"))();function o(){__p&&__p();if(m)return;var a=g,b=h,c=i,d=j;g={};h={};i={};j={};(Object.keys(a).length||k)&&(k=!1,q("notifications-updated",a));Object.keys(b).length&&q("seen-state-updated",b);Object.keys(c).length&&q("read-state-updated",c);Object.keys(d).length&&q("hidden-state-updated",d);l.pop()}function p(){return l.length?l[l.length-1]:b("NotificationConstants").PayloadSourceType.UNKNOWN}function q(event,a){s.inform(event,{updates:a,source:p()})}var r=null,s={getserverTime:function(){return r},handleUpdate:function(a,c,d,e){c.servertime&&(r=c.servertime,b("LiveTimer").restart(c.servertime)),this._updateWithPayload(a,c)},_updateWithPayload:function(a,b){Object.keys(b).length&&this.synchronizeInforms(function(){l.push(a);var c=babelHelpers["extends"]({},b,{payloadsource:p()});this.inform("update-notifications",c);this.inform("update-seen",c);this.inform("update-read",c);this.inform("update-hidden",c)}.bind(this))},getArbiter:function(){return n},inform:function(event,a){return n.inform(event,a)},subscribe:function(event,a){return n.subscribe(event,a)},didUpdateNotifications:function(a){Object.assign(g,b("createObjectFrom")(a)),k=!0,o()},didUpdateSeenState:function(a){Object.assign(h,b("createObjectFrom")(a)),o()},didUpdateReadState:function(a){Object.assign(i,b("createObjectFrom")(a)),o()},didUpdateHiddenState:function(a){Object.assign(j,b("createObjectFrom")(a)),o()},synchronizeInforms:function(a){m++;try{a()}catch(a){throw a}finally{m--,o()}}};e.exports=s}),null);
__d("NotificationUserActions",["AsyncRequest","Bootloader","BusinessUserConf","CurrentUser","NotificationConstants","NotificationOptionActionWebGraphQLMutation","NotificationTokens","NotificationUpdates","WebGraphQL","createObjectFrom"],(function(a,b,c,d,e,f){__p&&__p();var g=b("NotificationConstants").PayloadSourceType.USER_ACTION,h=!1;function i(a){b("BusinessUserConf").businessUserID!=null&&(a.biz_user_id=b("BusinessUserConf").businessUserID),new(b("AsyncRequest"))("/ajax/notifications/mark_read.php").setData(a).setAllowCrossPageTransition(!0).send()}function j(a){var b={};a.forEach(function(a,c){b["alert_ids["+c+"]"]=a});return b}a={markNotificationsAsSeen:function(a,c,d){__p&&__p();var e=document.getElementById("notificationsCountValue"),f=null;e&&(f=e.textContent);b("NotificationUpdates").handleUpdate(g,{seenState:b("createObjectFrom")(a)});e=b("NotificationTokens").untokenizeIDs(a);a=j(e);a.seen=!0;f&&(a.badgeCount=f);c&&(a.source_view=c);d&&(a.classification=d);i(a)},setNextIsFromReadButton:function(a){h=a},markNotificationsAsRead:function(a,c){b("NotificationUpdates").handleUpdate(g,{readState:b("createObjectFrom")(a,!0)});a=b("NotificationTokens").untokenizeIDs(a);a=j(a);h&&(a.from_read_button=!0,h=!1);c&&(a.source_view=c);i(a)},markNotificationsAsUnread:function(a,c){b("NotificationUpdates").handleUpdate(g,{readState:b("createObjectFrom")(a,!1)});a=b("NotificationTokens").untokenizeIDs(a);a=j(a);h&&(a.from_read_button=!0,h=!1);a.unread=!0;c&&(a.source_view=c);i(a)},markAllNotificationsAsRead:function(a){b("Bootloader").loadModules(["NotificationSeenState"],function(c){c=c.getUnreadIDs();c.length>0&&b("NotificationUpdates").handleUpdate(g,{readState:b("createObjectFrom")(c)});c={read:!0};h&&(c.from_read_button=!0,h=!1);a&&(c.source_view=a);i(c)},"NotificationUserActions")},sendNotifOption:function(a){return b("WebGraphQL").exec(new(b("NotificationOptionActionWebGraphQLMutation"))({input:{action_type:a,actor_id:b("CurrentUser").getID(),client_mutation_id:"0"}}))}};e.exports=a}),null);
__d("RelationshipDelightTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:RelationshipDelightLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:RelationshipDelightLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:RelationshipDelightLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAlertID=function(a){this.$1.alert_id=a;return this};a.prototype.setEvent=function(a){this.$1.event=a;return this};a.prototype.setMetadata=function(a){this.$1.metadata=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};c={alert_id:!0,event:!0,metadata:!0,vc:!0};e.exports=a}),null);
__d("RelationshipDelightUtils",["NotificationRelationshipDelightsConfig","QE2Logger","RelationshipDelightTypedLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={};function h(a){a=a.eligible_buckets;return!!a&&a.indexOf("SO_NOTIFICATIONS")!==-1}function i(){b("QE2Logger").logExposureForUser(b("NotificationRelationshipDelightsConfig").universeName)}function a(a){var c=b("NotificationRelationshipDelightsConfig").shouldDecorateNotificationWithHearts,d=b("NotificationRelationshipDelightsConfig").shouldLogExposureForNotification;if(h(a)===!1)return!1;d&&i();return c===!0}function j(a,event,c){var d=event+"-"+a;if(g[d])return;g[d]=!0;d=new(b("RelationshipDelightTypedLogger"))().setEvent(event).setAlertID(a);c&&d.setMetadata(JSON.stringify(c));d.log()}c={shouldHeartBadge:function(a){var c=b("NotificationRelationshipDelightsConfig").shouldDecorateBadgeWithHearts,d=b("NotificationRelationshipDelightsConfig").shouldLogExposureForBadge;if(h(a)===!1)return!1;d&&i();return c===!0},shouldHeartBeeper:a,shouldHeartNotification:a,logNotificationAnimation:function(a,b,c){j(a,"notification_animated",{animation:b,rowIndex:c})},logBeeperAnimation:function(a){j(a,"beeper_animated")},logBadgeAnimation:function(a){j(a,"badge_animated")}};e.exports=c}),null);
__d("NotificationBeeperItemContents.react",["cx","Animation","AsyncRequest","BootloadedComponent.react","Bootloader","FBProfilePhotoShadow.react","Image.react","ImageBlock.react","JSResource","NotificationBeeperItemCloseButton.react","NotificationInterpolator","NotificationListRendererUtils","NotificationURI","NotificationUserActions","React","ReactDOM","RelationshipDelightUtils","TextWithEntities.react","Timestamp.react","URI"],(function(a,b,c,d,e,f,g){__p&&__p();var h;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.isLiveVideo=null,this.$2=function(a){__p&&__p();this.$1();this.props.onHide();if(a.button===1||a.altKey||a.ctrlKey||a.metaKey||a.shiftKey)return;var c=this.props.notification;b("NotificationListRendererUtils").openNotification(a,c);if(a.isDefaultPrevented()===!0)return;var d=c.primerAttributes;if(d&&(d.rel==="async"||d.rel==="async-post")){var e=new(b("AsyncRequest"))(d.ajaxify||c.url);d.rel==="async-post"&&e.setMethod("POST");e.send();a.preventDefault()}else d&&d.rel==="theater"?(a.persist(),b("Bootloader").loadModules(["PhotoSnowlift"],function(b){b.bootstrap(d.ajaxify||c.url,a.currentTarget)},"NotificationBeeperItemContents.react"),a.preventDefault()):d&&(d.rel==="dialog"||d.rel==="dialog-post")&&(b("Bootloader").loadModules(["AsyncDialog"],function(b){b.bootstrap(d.ajaxify||c.url,a.currentTarget,"dialog")},"NotificationBeeperItemContents.react"),a.preventDefault())}.bind(this),this.$3=function(){this.$1(),this.props.onHide()}.bind(this),c}a.prototype.$1=function(){"use strict";b("NotificationUserActions").markNotificationsAsRead([this.props.notification.alert_id])};a.prototype.$4=function(){"use strict";new(b("Animation"))(b("ReactDOM").findDOMNode(this.refs.inner)).from("opacity","0").to("opacity","1").duration(200).go()};a.prototype.$5=function(){"use strict";var a=this.$6();a=JSON.parse(a);return a.content_id};a.prototype.$7=function(){"use strict";if(this.isLiveVideo===null){var a=this.$6();this.isLiveVideo=a.indexOf("live_video")!==-1}return!!this.isLiveVideo};a.prototype.$6=function(){"use strict";return this.props.notification.tracking||"{}"};a.prototype.$8=function(){"use strict";var a=this.props.notification,c=b("RelationshipDelightUtils").shouldHeartBeeper(a);if(!c)return null;b("RelationshipDelightUtils").logBeeperAnimation(a.alert_id);return b("React").createElement("div",{className:"_5_xp"},b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("div",null),bootloadLoader:b("JSResource")("RelationshipDelightsActorAnimation.react").__setRef("NotificationBeeperItemContents.react")}))};a.prototype.componentDidMount=function(){"use strict";this.props.onReadyToHide(this.props.notification.alert_id),this.$7()&&b("Bootloader").loadModules(["VideoPlayerMetaData","PhotoSnowliftVideoNode"],function(a,b){b=this.$5();b&&a.genVideoData(b)}.bind(this),"NotificationBeeperItemContents.react")};a.prototype.componentDidUpdate=function(a){"use strict";(a.notification.alert_id!==this.props.notification.alert_id||a.notification.creation_time!==this.props.notification.creation_time)&&(this.$4(),this.props.onReadyToHide(this.props.notification.alert_id))};a.prototype.render=function(){"use strict";var a=this.props.notification,c=a.thumbnail?a.thumbnail.uri:null,d=a.icon?a.icon.uri:null,e=b("NotificationURI").localize(new(b("URI"))(a.url));return b("React").createElement("div",{ref:"inner",className:this.props.className},b("React").createElement(b("NotificationBeeperItemCloseButton.react"),{onClick:this.$3}),b("React").createElement("a",{href:e,onClick:this.$2,className:"_3soi"},b("React").createElement(b("ImageBlock.react"),{className:"_3soj",spacing:"medium"},b("React").createElement(b("FBProfilePhotoShadow.react"),{className:"_2yt7"},b("React").createElement(b("Image.react"),{src:c,className:"_3sok"+(c?"":" hidden_elem")})),b("React").createElement("div",{className:"_3sol"},b("React").createElement(b("TextWithEntities.react"),{renderEmoticons:!0,renderEmoji:!0,interpolator:b("NotificationInterpolator"),ranges:a.title.ranges,aggregatedranges:a.title.aggregated_ranges,text:a.title.text}),b("React").createElement(b("ImageBlock.react"),{className:"_3som"},b("React").createElement(b("Image.react"),{className:"_1x8t"+(d?"":" hidden_elem"),src:d}),b("React").createElement(b("Timestamp.react"),{time:a.timestamp.time,text:a.timestamp.text,verbose:a.timestamp.verbose})))),this.$8()))};e.exports=a}),null);
__d("NotificationBeeperItem.react",["cx","CSSFade","NotificationBeeperConst","NotificationBeeperItemContents.react","NotificationBeeperItemRenderersList","React","ReactDOM","Style","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){__p&&__p();var h,i=b("NotificationBeeperConst").FADE_OUT_LENGTH;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.state={encounteredException:!1,fadedIn:!1,hidden:!1},this.$3=function(){this.setState({hidden:!0})}.bind(this),b}a.prototype.componentDidCatch=function(){"use strict";this.props.onReadyToHide(this.props.notification.alert_id),this.setState(function(a){return babelHelpers["extends"]({},a,{encounteredException:!0})})};a.prototype.componentDidMount=function(){"use strict";b("setTimeoutAcrossTransitions")(function(){this.setState({fadedIn:!0})}.bind(this),50),this.props.onInserted(this.props.notification.alert_id)};a.prototype.componentWillUnmount=function(){"use strict";this.$1&&this.$1.cancel()};a.prototype.render=function(){"use strict";if(this.state.encounteredException)return null;var a=this.props.notification,c=a.renderer_data;a=a.tracking;c=this.$4(c);return b("React").createElement("li",{className:this.state.hidden?"hidden_elem":"",ref:function(a){return this.$2=a}.bind(this),"data-gt":a},b("React").createElement(c,{className:"_3sod"+(this.state.fadedIn?" _3soe":""),notification:this.props.notification,onHide:this.$3,onReadyToHide:this.props.onReadyToHide,onPreventHide:this.props.onPreventHide}))};a.prototype.componentDidUpdate=function(a,c,d){"use strict";if(!this.$2)return;a=b("ReactDOM").findDOMNode(this.$2);if(!a)return;this.props.fadingOut?(this.$1=b("CSSFade").hide(a,{callback:this.$3,duration:i}),a.style.transitionDuration="0ms"):(this.$1&&(this.$1.cancel(),this.$1=undefined),b("Style").set(a,"opacity","1"))};a.prototype.$4=function(a){"use strict";return a&&a.__typename==="LiveVideoNotificationRendererData"&&a.video_id==null?b("NotificationBeeperItemContents.react"):b("NotificationBeeperItemRenderersList")[a&&a.__typename]||b("NotificationBeeperItemContents.react")};e.exports=a}),null);
__d("NotificationImpressions",["AsyncSignal","NotificationTokens","URI"],(function(a,b,c,d,e,f){var g="/ajax/notifications/impression.php";function a(a,c){var d={ref:c};b("NotificationTokens").untokenizeIDs(a).forEach(function(a,b){d["alert_ids["+b+"]"]=a});new(b("AsyncSignal"))(new(b("URI"))(g).getQualifiedURI().toString(),d).send()}e.exports={log:a}}),null);
__d("SoundPlayer",["URI","createArrayFromMixed"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new Map();function h(a){var c=new(b("URI"))(a);return c.getDomain()?a:new(b("URI"))(window.location.href).setPath(c.getPath()).toString()}function i(a){a=new(b("URI"))(a).getPath();if(/\.mp3$/.test(a))return"audio/mpeg";return/\.og[ga]$/.test(a)?"audio/ogg":""}var j={preload:function(a){__p&&__p();for(var a=b("createArrayFromMixed")(a),c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;if(g.has(e))return;var f=document.createElement("audio");if(!f||!f.canPlayType||!f.canPlayType(i(e)))continue;f.preload="auto";f.src=h(e);document.body&&document.body.appendChild(f);g.set(e,f);return}},play:function(a,c){__p&&__p();c===void 0&&(c={});for(var a=b("createArrayFromMixed")(a),d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;g.has(f)||j.preload(f);f=g.get(f);if(!f)continue;c.loop&&f.setAttribute("loop","");c.volume&&(f.volume=c.volume);f.play();return}},pause:function(a){__p&&__p();for(var a=b("createArrayFromMixed")(a),c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;e=g.get(e);if(e){e.pause();return}}},stop:function(a){__p&&__p();for(var a=b("createArrayFromMixed")(a),c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;var f=g.get(e);if(f){f.pause();f.removeAttribute("src");f.src=h(e);return}}}};e.exports=j}),null);
__d("SoundSynchronizer",["SoundPlayer","WebStorage","createArrayFromMixed"],(function(a,b,c,d,e,f){__p&&__p();var g="fb_sounds_playing3";function h(){__p&&__p();var a=b("WebStorage").getLocalStorage();if(a)try{a=a[g];if(a){a=JSON.parse(a);if(Array.isArray(a))return a}}catch(a){}return[]}function i(a){var c=b("WebStorage").getLocalStorage();if(c){var d=h();d.push(a);while(d.length>5)d.shift();try{c[g]=JSON.stringify(d)}catch(a){}}}function j(a){return h().some(function(b){return b===a})}a={play:function(a,c,d){a=b("createArrayFromMixed")(a);c=c||a[0]+Math.floor(Date.now()/1e3);if(j(c))return;b("SoundPlayer").play(a,{loop:!!d});i(c)},isSupported:function(){return!!b("WebStorage").getLocalStorage()}};e.exports=a}),null);
__d("SoundRPC",["Event","FBJSON","SoundSynchronizer"],(function(a,b,c,d,e,f){__p&&__p();function g(a,c,d){b("SoundSynchronizer").play(a,c,d)}a={playLocal:g,playRemote:function(a,c,d,e){c={name:"SoundRPC",data:{paths:c,sync:d,loop:e}};a.postMessage(b("FBJSON").stringify(c),"*")},supportsRPC:function(){return!!window.postMessage},_listen:function(){b("Event").listen(window,"message",function(a){if(!/\.facebook.com$/.test(a.origin))return;var c={};try{c=b("FBJSON").parse(a.data)}catch(a){}c.name==="SoundRPC"&&g(c.data.paths,c.data.sync,c.data.loop)})}};e.exports=a}),null);
__d("Sound",["SoundInitialData","SoundPlayer","SoundRPC","SoundSynchronizer","URI","UserAgent_DEPRECATED","Visibility","isFacebookURI"],(function(a,b,c,d,e,f){__p&&__p();var g=null,h=!1;c={init:function(a){},play:function(a,c,d){g?b("SoundRPC").playRemote(g.contentWindow,a,c,!1):b("SoundRPC").playLocal(a,c,d),h=!0},hasPlayedSoundBefore:function(){return h},playOnlyIfImmediate:function(a,c,d){if(!h&&b("Visibility").isHidden())return;this.play(a,c,d)},stop:function(a){g||b("SoundPlayer").stop(a)}};d=new(b("URI"))(location.href);d.getSubdomain()&&d.getSubdomain()!=="www"&&d.setSubdomain("www");f=d.getDomain();function a(){if(b("UserAgent_DEPRECATED").ie()<9)return!1;return b("SoundInitialData").RPC_DISABLED?!1:b("SoundSynchronizer").isSupported()&&b("SoundRPC").supportsRPC()}b("isFacebookURI")(d)&&location.host!==f&&a()&&(g=document.createElement("iframe"),g.setAttribute("src","//"+f+"/sound_iframe.php"),g.style.display="none",document.body&&document.body.appendChild(g));e.exports=c}),null);
__d("NotificationSound",["Sound"],(function(a,b,c,d,e,f){__p&&__p();var g=5e3;b("Sound").init(["audio/mpeg"]);function a(a){this._soundPath=a,this._lastPlayed=0}Object.assign(a.prototype,{play:function(a){if(!this._soundPath)return;var c=Date.now();if(c-this._lastPlayed<g)return;this._lastPlayed=c;b("Sound").playOnlyIfImmediate(this._soundPath,a,!1)}});e.exports=a}),null);
__d("NotificationBeeper.react",["cx","Arbiter","ChannelConstants","FacebookWebNotificationsSubscription","NotificationBeeperConst","NotificationBeeperItem.react","NotificationConstants","NotificationImpressions","NotificationSound","NotificationUpdates","NotificationUserActions","NotifTestIDs","React","SubscriptionsHandler","clearTimeout","setTimeoutAcrossTransitions","shield"],(function(a,b,c,d,e,f,g){__p&&__p();var h,i=b("NotificationBeeperConst").ACTIVE_DELAY_LONG,j=b("NotificationBeeperConst").BeepStates,k=b("NotificationBeeperConst").FADE_OUT_LENGTH,l=b("NotificationBeeperConst").IDLE_DELAY,m="beeper";c=b("NotificationConstants").PayloadSourceType;var n=c.CLIENT,o=c.OTHER_APPLICATION;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.state={beeps:{},fading:!1,hovering:!1,soundEnabled:this.props.soundEnabled},this.onMouseEnter=function(){this.$2&&b("clearTimeout")(this.$2);var a=[],c=this.state.beeps;Object.keys(c).forEach(function(b){c[b].state!=j.PENDING?a.push(b):c[b].state=j.RENDERED});b("NotificationUserActions").markNotificationsAsSeen(a);this.setState({hovering:!0,fading:!1,beeps:c})}.bind(this),this.onMouseLeave=function(){this.$5(i),this.setState({hovering:!1})}.bind(this),this.$6=function(a){this.state.hovering||this.$5(),this.state.soundEnabled&&this.state.beeps[a].shouldPlaySound&&(this.$3||(this.$3=new(b("NotificationSound"))(this.props.soundPath)),this.$3.play(a)),this.props.shouldLogImpressions&&b("NotificationImpressions").log([a],m)}.bind(this),this.onReadyToHide=function(a,b){this.setState(function(b){var c=babelHelpers["extends"]({},b.beeps);c[a]=babelHelpers["extends"]({},c[a],{state:j.READY_TO_HIDE});return babelHelpers["extends"]({},b,{beeps:c})}),this.$2||this.$5(b)}.bind(this),this.$8=function(a){this.setState(function(b){var c=babelHelpers["extends"]({},b.beeps);c[a]=babelHelpers["extends"]({},c[a],{state:j.RENDERED});return babelHelpers["extends"]({},b,{beeps:c})})}.bind(this),this.$7=function(){this.$2=null,this.setState(function(a){var b=babelHelpers["extends"]({},a.beeps);Object.keys(b).forEach(function(a){b[a].state==j.READY_TO_HIDE&&(b[a]=babelHelpers["extends"]({},b[a],{state:j.FADING_OUT}))});return babelHelpers["extends"]({},a,{beeps:b,fading:!0})}),b("setTimeoutAcrossTransitions")(b("shield")(this.$9,this),k)}.bind(this),this.$9=function(){__p&&__p();if(!this.state.fading)return;this.setState(function(a){var b=babelHelpers["extends"]({},a.beeps);Object.keys(b).forEach(function(a){b[a].state==j.FADING_OUT&&delete b[a]});return babelHelpers["extends"]({},a,{beeps:b,fading:!1})});b("setTimeoutAcrossTransitions")(function(){this.setState(function(a){var b=babelHelpers["extends"]({},a.beeps);Object.keys(b).forEach(function(a){b[a].state==j.PENDING&&(b[a]=babelHelpers["extends"]({},b[a],{state:j.RENDERED}))});return babelHelpers["extends"]({},a,{beeps:b})})}.bind(this))}.bind(this),c}a.prototype.UNSAFE_componentWillMount=function(){"use strict";__p&&__p();var a=new(b("SubscriptionsHandler"))();a.addSubscriptions(b("NotificationUpdates").subscribe("update-notifications",function(a,b){if(b.payloadsource===o||b.payloadsource===n){a=b.nodes;a&&a.length&&this.handleBeepChanges(this.$4(a))}}.bind(this)),b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("notif_sound_pref_changed"),function(a,b){this.setState({soundEnabled:b.obj.enabled})}.bind(this)));a.addSubscriptions(b("FacebookWebNotificationsSubscription").subscribe({event:"NEW_BEEPER",callback:function(a){var b=a.notification;a=a.should_play_sound;if(b!==null){var c;this.handleBeepChanges((c={},c[b.alert_id]={notification:b,shouldPlaySound:a},c))}}.bind(this)}));this.$1=a;b("Arbiter").inform("NotificationBeeper/mounted",null,"persistent")};a.prototype.componentWillUnmount=function(){"use strict";this.$1&&this.$1.release(),this.$1=null};a.prototype.$5=function(a){"use strict";this.$2&&b("clearTimeout")(this.$2),this.$2=b("setTimeoutAcrossTransitions")(b("shield")(this.$7,this),a==null?l:a)};a.prototype.handleBeepChanges=function(a){"use strict";var b=this.state.fading?j.PENDING:j.RENDERED,c=!1,d=babelHelpers["extends"]({},this.state.beeps);Object.keys(a).reverse().forEach(function(e){var f=a[e],g=d[e];(!g||g.notification.alert_id!==f.notification.alert_id||g.notification.creation_time!==f.notification.creation_time)&&(g&&(c=!0,delete d[e]),d[e]=babelHelpers["extends"]({},f,{state:b}))});c&&this.$5();this.setState({beeps:d})};a.prototype.render=function(){"use strict";__p&&__p();var a=this.state.beeps,c=[];Object.keys(a).reverse().forEach(function(d){var e=a[d];if(e.state==j.PENDING)return;c.push(b("React").createElement(b("NotificationBeeperItem.react"),{key:d,fadingOut:this.state.fading&&e.state==j.FADING_OUT,notification:e.notification,onInserted:this.$6,onReadyToHide:this.onReadyToHide,onPreventHide:this.$8}))}.bind(this),this);var d=c.length>0;d=(d?"":"hidden_elem")+" _50d1";return b("React").createElement("ul",{ref:"container",className:d,"data-gt":this.props.tracking,"data-testid":b("NotifTestIDs").BEEPER_LIST,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},c)};a.prototype.$4=function(a){"use strict";return a.reduce(function(a,b){a[b.alert_id]={notification:b,shouldPlaySound:!1};return a},{})};e.exports=a}),null);
__d("NotificationBeeperContainer",["NotificationBeeper.react","React","ReactDOM"],(function(a,b,c,d,e,f){a={renderBeeper:function(a,c){b("ReactDOM").render(b("React").createElement(b("NotificationBeeper.react"),a),c)}};e.exports=a}),null);
__d("LiveVideoBeeperItemContents.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.render=function(){return b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("LiveVideoBeeperItemContentsImpl.react").__setRef("LiveVideoBeeperItemContents.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),babelHelpers["extends"]({},this.props,{ref:"itemContents"}))})};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("ConversationNubAddTabSource",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({NOTIFICATION:"notification",PAGE_REFRESH:"page_refresh",USER_PIN:"user_pin",UNSEEN_NOTIFICATION:"unseen_notification",UNKNOWN:"unknown"})}),null);
__d("ConversationNubTabStateListStorage",[],(function(a,b,c,d,e,f){"use strict";function a(){this.$1=[]}a.prototype.modify=function(a){this.$1=a(this.$1)};a.prototype.getData=function(){return this.$1};e.exports=a}),null);
__d("differenceSets",["filterSet"],(function(a,b,c,d,e,f){"use strict";function a(a){for(var c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];return b("filterSet")(a,function(a){return!d.some(function(b){return b.has(a)})})}e.exports=a}),null);
__d("ConversationNubTabStateList",["invariant","ConversationNubTabStateListStorage","differenceSets"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(){this.$2=new Set(),this.$1=new(b("ConversationNubTabStateListStorage"))()}a.prototype.modifyTabState=function(a,b){this.modifyTabs(function(c){var d=c.findIndex(function(b){return b.tabID===a});d!==-1||g(0,5816);b(c[d]);return c})};a.prototype.$3=function(a){return new Set(a.map(function(a){return a.tabID}))};a.prototype.modifyTabs=function(a){try{this.$1.modify(function(c){var d=this.$3(c);c=a(c);var e=this.$3(c);this.$2=b("differenceSets")(d,e);return c}.bind(this))}finally{this.$2=new Set()}};a.prototype.getTabs=function(){return this.$1.getData()};a.prototype.getTabState=function(a){a=this.getTabStateIfExists(a);a||g(0,5816);return a};a.prototype.getTabStateIfExists=function(a){return this.getTabs().find(function(b){return b.tabID===a})};a.prototype.push=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];this.modifyTabs(function(a){b.forEach(function(b){a.find(function(a){return a.tabID===b.tabID})?g(0,5817,b.tabID):a.push(b)});return a})};a.prototype.remove=function(a){this.modifyTabs(function(b){var c=b.findIndex(function(b){return b.tabID===a});c!==-1&&b.splice(c,1);return b})};e.exports=a}),null);
__d("ConversationNubTabState",["invariant","ConversationNubTabStateList"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=12;function a(){this.$1=Object.create(null),this.$2=new(b("ConversationNubTabStateList"))(),this.$3=Infinity}a.prototype.anyTabHasFocus=function(){return this.getUnsortedLoadedTabs().some(function(a){return a.getIsFocused()})};a.prototype.anyTabHasText=function(){return this.getUnsortedLoadedTabs().some(function(a){return a.getHasText()})};a.prototype.getTabState=function(a){return this.$2.getTabState(a)};a.prototype.getTabStateIfExists=function(a){return this.$2.getTabStateIfExists(a)};a.prototype.getUnloadedTabs=function(){var a=this.$2.getTabs().filter(function(a){return!this.getLoadedTab(a.tabID)}.bind(this));return a};a.prototype.setMaxDockTabs=function(a){this.$3=a};a.prototype.getNumDockTabs=function(){var a=this.$3,b=this.getTotalTabCount();return Math.min(a,b)};a.prototype.getNumMenuTabs=function(){return this.getTotalTabCount()-this.getNumDockTabs()};a.prototype.addTabState=function(a){this.$2.push(a)};a.prototype.addLoadedTab=function(a,b){var c=this.getTabState(a);if(!c)return;c=this.getLoadedTab(a);if(c)return;this.$1[a]=b;this.$4()};a.prototype.getLoadedTab=function(a){return this.$1[a]};a.prototype.getLoadedTabByFeedbackTarget=function(a){return this.getLoadedTabs().find(function(b){return b.getPersistentState().ftID===a})};a.prototype.isTabInDock=function(a){a=this.getLoadedTab(a);if(!a)return!1;a=this.$5(a);return 0<=a&&a<this.getNumDockTabs()};a.prototype.clearTabNotifications=function(a){this.$2.modifyTabState(a,function(a){a.unseenCommentsSinceLastCleared={},a.hasFakeInitBadge=!1,a.badgeCount=0,a.isBlinkingUnread=!1})};a.prototype.deleteTab=function(a){var b=this.getLoadedTab(a);b&&(delete this.$1[a],b.destroy());this.$2.remove(a);return Boolean(b)};a.prototype.deleteAllTabs=function(){this.getUnsortedLoadedTabs().forEach(function(a){return this.deleteTab(a.getTabID())}.bind(this))};a.prototype.modifyTabState=function(a,b){return this.$2.modifyTabState(a,b)};a.prototype.moveTabToDockLeft=function(a){__p&&__p();var b=this.getLoadedTab(a);if(!b)return;this.$2.modifyTabs(function(c){__p&&__p();var d=c.findIndex(function(b){return b.tabID===a});d!==-1||g(0,5816);var e=c[d],f=this.$5(b),h=this.getLoadedTabs().length,i=this.getNumDockTabs();if(f<0||h===0)return c;else if(i===0){f!==0&&(c.splice(d,1),c.unshift(e));return c}h=i-1;if(f===h)return c;c.splice(d,1);f<h&&(h-=1);i=this.getLoadedTabs()[h];var j=this.getTabState(i.getTabID());j||g(0,6150);d=c.findIndex(function(a){return a.tabID===j.tabID});c.splice(d,0,e);return c}.bind(this))};a.prototype.getLoadedTabs=function(){var a=this.$2.getTabs().map(function(a){return this.getLoadedTab(a.tabID)}.bind(this)).filter(Boolean);return a};a.prototype.getUnsortedLoadedTabs=function(){var a=Object.values(this.$1);return a};a.prototype.getTotalTabCount=function(){return this.getUnsortedLoadedTabs().length};a.prototype.getTabsForDockOldestFirst=function(){return this.getLoadedTabs().slice(0,this.getNumDockTabs())};a.prototype.getTabsForDockNewestFirst=function(){return this.getTabsForDockOldestFirst().slice().reverse()};a.prototype.getTabsForMenuOldestFirst=function(){return this.getLoadedTabs().slice(this.getNumDockTabs())};a.prototype.getTabsForMenuNewestFirst=function(){return this.getLoadedTabs().slice(this.getNumDockTabs()).reverse()};a.prototype.$4=function(){var a=this.getLoadedTabs().length;if(a>h){a=a-h;a=this.getTabsForMenuOldestFirst().slice(0,a);a.map(function(a){return a.getTabID()}).forEach(function(a){return this.deleteTab(a)}.bind(this))}};a.prototype.$5=function(a){return this.getLoadedTabs().indexOf(a)};e.exports=new a()}),null);
__d("ConversationNub",["csx","cx","Arbiter","ConversationNubHeader","ConversationNubTabState","ConversationNubTabsUpdateEventController","ConversationNubUtils","CSS","DOM","EventListener","NotificationUserActions","SubscriptionsHandler","UFIComposerIsTypingStore","URI","containsNode","debounce","guid"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ConversationNubTabsUpdateEventController").minimizeAndInformTabUpdate,j=b("ConversationNubTabsUpdateEventController").popOutAndInformTabUpdate,k=b("ConversationNubTabState"),l=10,m=500,n=100;a.createDefaultState=function(a,c,d,e,f,g){return{tabID:a,permalinkURI:c?new(b("URI"))(c):null,ftID:d,notifAlertID:e,notificationType:f,title:g,keepAtBottom:!1,isTabRaised:!1,isBlinkingUnread:!1,badgeCount:0,allSeenNewComments:{},unseenCommentsSinceLastCleared:{},hasFakeInitBadge:!1}};function a(a,c,d,e,f,g){f===void 0&&(f=!1),g===void 0&&(g=!1),this.$13=!1,this.$14=!1,this.$1=a,this.$12=c,this.$5=b("guid")(),this.$7=null,this.$8=!1,this.$9=null,this.$10=f,this.$11=g,this.$15=e,this.$6=new(b("SubscriptionsHandler"))(),this.$16(),this.$17(),d!=null&&k.modifyTabState(this.$12,function(a){d?a.hasFakeInitBadge=!1:(a.hasFakeInitBadge=!0,this.$18(1),this.$19(!0))}.bind(this)),this.$20()}a.prototype.$20=function(){this.$21(),this.$22(),b("ConversationNubUtils").informShouldRecheckTabVisibility(this),this.forceReflow()};a.prototype.getPersistentState=function(){return k.getTabState(this.$12)};a.prototype.getPersistentStateIfExists=function(){return k.getTabStateIfExists(this.$12)};a.prototype.$16=function(){__p&&__p();var a=this.$23();if(a){this.$6.addSubscriptions(b("EventListener").listen(a,"click",this.$24.bind(this)),b("EventListener").listen(a,"mouseenter",this.$25.bind(this)),b("EventListener").listen(a,"mouseleave",this.$26.bind(this)));a=b("ConversationNubUtils").getCloseButtonElem(a);a&&b("ConversationNubUtils").addCloseButtonListeners(a,this.$6,this.$27.bind(this))}a=this.$28();a&&(k.modifyTabState(this.$12,function(a){a.keepAtBottom=!0}),this.$6.addSubscriptions(b("EventListener").listen(a,"scroll",b("debounce")(this.$29.bind(this),n)),b("Arbiter").subscribe("reflow",this.$30.bind(this))));a=this.$31();a&&this.$6.addSubscriptions(b("EventListener").listen(a,"focusin",this.$32.bind(this,!0)),b("EventListener").listen(a,"focusout",this.$32.bind(this,!1)))};a.prototype.$17=function(){__p&&__p();var a=this.$33();if(!a){this.$2=null;return}var c=function(){var a=this.getPersistentState();return{permalinkURI:a.permalinkURI,ftID:a.ftID,tabID:a.tabID}}.bind(this);a=new(b("ConversationNubHeader"))(a,c);this.$6.addSubscriptions(a.subscribe("closeButton",this.$27.bind(this)),a.subscribe("showMenu",this.$34.bind(this)),a.subscribe("hideMenu",this.$35.bind(this)),a.subscribe("minimizeButton",this.$36.bind(this,!0)),a.subscribe("clickHeader",this.$36.bind(this,!0)),a.subscribe("menuPermalinkClick",this.$36.bind(this,!1)),b("UFIComposerIsTypingStore").addListener(function(){var a=this.getPersistentStateIfExists();if(!a)return;var c=this.$14;a=b("UFIComposerIsTypingStore").getValueFor(a.ftID);this.$14=a===!0;c!==this.$14&&b("ConversationNubTabsUpdateEventController").informTabsUpdated()}.bind(this)));this.$2=a};a.prototype.$33=function(){return this.$1&&b("DOM").scry(this.$1,".fbNubFlyoutTitlebar")[0]};a.prototype.$23=function(){return this.$1&&b("DOM").scry(this.$1,".fbNubButton")[0]};a.prototype.$28=function(){!this.$3&&this.$1&&(this.$3=b("DOM").scry(this.$1,".uiScrollableAreaWrap")[0]);return this.$3};a.prototype.$31=function(){!this.$4&&this.$1&&(this.$4=b("DOM").scry(this.$1,".fbNubFlyoutBodyContent")[0]);return this.$4};a.prototype.$37=function(){var a=this.$23();return a?b("DOM").scry(a,"._37op")[0]:null};a.prototype.$27=function(){b("ConversationNubUtils").informShouldCloseTab(this.$12,this.getFeedbackTargetID(),b("ConversationNubUtils").CLOSE_REASON_TAB_X_OUT)};a.prototype.$36=function(a){i(this,a)};a.prototype.$34=function(){this.$1&&b("CSS").addClass(this.$1,"_1uw3")};a.prototype.$35=function(){this.$1&&b("CSS").removeClass(this.$1,"_1uw3")};a.prototype.$24=function(){this.getPersistentState().isTabRaised?i(this,!0):j(this,!0)};a.prototype.$25=function(){this.getPersistentState().isBlinkingUnread&&(this.$9=new Date())};a.prototype.$26=function(){var a=this.$9;if(a&&this.getPersistentState().isBlinkingUnread){var b=new Date();b-a>=m&&this.$19(!1)}this.$9=null};a.prototype.$38=function(){var a=this.$28();if(a){var b=a.scrollHeight;b>0&&!this.$39(a)&&(this.$8=!0,a.scrollTop=b)}};a.prototype.$39=function(a){a=a||this.$28();return!!(a&&a.scrollTop>=a.scrollHeight-a.clientHeight-l)};a.prototype.$29=function(){if(!k.getTabStateIfExists(this.$12)||!this.getPersistentState().isTabRaised)return;k.modifyTabState(this.$12,function(a){a.keepAtBottom=this.$39(),b("ConversationNubUtils").informShouldRecheckTabVisibility(this)}.bind(this));this.$8||this.clearJewelNotifications();this.$8=!1};a.prototype.$32=function(a){if(this.$13===a)return;this.$13=a;this.$13&&this.clearJewelNotifications();b("ConversationNubTabsUpdateEventController").informTabsUpdated()};a.prototype.getIsFocused=function(){return this.$13};a.prototype.getPageID=function(){return this.$15};a.prototype.getHasText=function(){return this.$14};a.prototype.$30=function(){var a=this.getPersistentState();if(!a.isTabRaised)return;a.keepAtBottom&&(this.$38(),this.$7&&clearTimeout(this.$7),this.$7=setTimeout(function(){a.keepAtBottom&&this.$38()}.bind(this),100))};a.prototype.$18=function(a){k.modifyTabState(this.$12,function(b){b.badgeCount=a,this.$21()}.bind(this))};a.prototype.$19=function(a){k.modifyTabState(this.$12,function(b){b.isBlinkingUnread=a,this.$22()}.bind(this))};a.prototype.$21=function(){var a=this.$37();if(!a)return;var c=this.getPersistentState().badgeCount,d=c>0;d?(b("DOM").setContent(a,c),b("CSS").show(a)):(b("CSS").hide(a),b("DOM").setContent(a,c))};a.prototype.$22=function(){if(this.$1){var a=this.getPersistentState().isBlinkingUnread;this.$1&&b("CSS").conditionClass(this.$1,"_53tf",a)}};a.prototype.getRootDOM=function(){return this.$1};a.prototype.getShouldShowIntroNux=function(){return this.$10};a.prototype.getShouldShowHideNux=function(){return this.$11};a.prototype.getTabID=function(){return this.$12};a.prototype.getNotificationPayloadAlertID=function(){return this.getPersistentState().notifAlertID};a.prototype.getNotificationType=function(){return this.getPersistentState().notificationType};a.prototype.setNotificationType=function(a){k.modifyTabState(this.$12,function(b){b.notificationType=a})};a.prototype.getFeedbackTargetID=function(){return this.getPersistentState().ftID};a.prototype.getPermalinkURI=function(){return this.getPersistentState().permalinkURI};a.prototype.getTitle=function(){return this.getPersistentState().title};a.prototype.getBadgeCount=function(){return this.getPersistentState().badgeCount};a.prototype.getIsRaised=function(){return this.getPersistentState().isTabRaised};a.prototype.getSessionID=function(){return this.$5};a.prototype.markCommentsAsSeenWithoutBadging=function(a){k.modifyTabState(this.$12,function(b){a.forEach(function(a){b.allSeenNewComments[a]=!0})})};a.prototype.attemptAddNewCommentsToBadge=function(a){__p&&__p();k.modifyTabState(this.$12,function(b){__p&&__p();a.forEach(function(a){if(b.allSeenNewComments[a])return;b.allSeenNewComments[a]=!0;b.unseenCommentsSinceLastCleared[a]=!0});var c=Object.keys(b.unseenCommentsSinceLastCleared).length;b.hasFakeInitBadge&&(c+=1);var d=b.badgeCount;this.$18(c);this.$19(c>0&&c>d)}.bind(this))};a.prototype.clearBadge=function(){k.clearTabNotifications(this.$12),this.$21(),this.$22()};a.prototype.clearJewelNotifications=function(){var a=this.getNotificationPayloadAlertID();a&&b("NotificationUserActions").markNotificationsAsRead([a])};a.prototype.popOutAndInformTabUpdate=function(){this.popOut(),b("ConversationNubTabsUpdateEventController").informTabsUpdated()};a.prototype.popOut=function(){k.modifyTabState(this.$12,function(a){this.$1&&b("CSS").addClass(this.$1,"_5r93"),a.isTabRaised=!0,this.clearBadge(),a.keepAtBottom&&this.$38()}.bind(this))};a.prototype.minimize=function(){k.modifyTabState(this.$12,function(a){this.$1&&b("CSS").removeClass(this.$1,"_5r93"),a.isTabRaised=!1,this.$2&&this.$2.hideMenu(),this.clearBadge()}.bind(this))};a.prototype.forceReflow=function(){this.$30()};a.prototype.isFormForThisUFI=function(a){return this.$1&&b("containsNode")(this.$1,a)};a.prototype.destroy=function(){this.$6.release(),this.$2&&this.$2.destroy(),this.$2=null,this.$7&&clearTimeout(this.$7),this.minimize(),this.$1&&(b("DOM").remove(this.$1),b("Arbiter").inform("ConversationNub/destroy",{root:this.$1}),this.$1=null)};e.exports=a}),null);
__d("XConversationNubActionTakenController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/conversation/nub_story/action_taken/",{})}),null);
__d("ConversationNubActionTakenReporter",["Arbiter","AsyncRequest","ConversationNubUtils","PinnedConversationNubsActionTaken","SubscriptionsHandler","XConversationNubActionTakenController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.$2=function(event,a){a.tabID;var c=a.ftID;a.tabState;a.sessionID;a=a.reason;(a===b("ConversationNubUtils").CLOSE_REASON_TAB_X_OUT||a===b("ConversationNubUtils").CLOSE_REASON_OVERFLOW_X_OUT||a===b("ConversationNubUtils").CLOSE_REASON_UNPIN)&&this.$3(c,b("PinnedConversationNubsActionTaken").TAB_CLOSED_BY_USER)}.bind(this),this.$1=new(b("SubscriptionsHandler"))(),this.$1.addSubscriptions(b("Arbiter").subscribe(b("ConversationNubUtils").CLOSE_TAB_EVENT,this.$2))}a.prototype.destroy=function(){this.$1.release()};a.prototype.$3=function(a,c){var d=b("XConversationNubActionTakenController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(d).setMethod("POST").setData({ft_id:a,action:c}).setAllowCrossPageTransition(!0).send()};e.exports=a}),null);
__d("ConversationNubHeader",["csx","ArbiterMixin","Bootloader","ConversationNubUtils","DOM","Event","EventListener","Keys","SubscriptionsHandler","ifRequired","mixin"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;function i(a,c){return b("EventListener").listen(a,"keydown",function(a){b("Event").getKeyCode(a)===b("Keys").RETURN&&c(a)})}c=babelHelpers.inherits(a,b("mixin")(b("ArbiterMixin")));h=c&&c.prototype;function a(a,c){h.constructor.call(this),this.$ConversationNubHeader6=!1,this.$ConversationNubHeader1=a,this.$ConversationNubHeader3=c,this.$ConversationNubHeader4=null,this.$ConversationNubHeader5=!1,this.$ConversationNubHeader2=new(b("SubscriptionsHandler"))(),this.$ConversationNubHeader7()}a.prototype.$ConversationNubHeader7=function(){var a=this.$ConversationNubHeader1;this.$ConversationNubHeader2.addSubscriptions(b("EventListener").listen(a,"click",this.$ConversationNubHeader8.bind(this)));a=b("ConversationNubUtils").getCloseButtonElem(a);a&&b("ConversationNubUtils").addCloseButtonListeners(a,this.$ConversationNubHeader2,this.$ConversationNubHeader9.bind(this));a=this.$ConversationNubHeader10();a&&this.$ConversationNubHeader2.addSubscriptions(b("EventListener").listen(a,"click",this.$ConversationNubHeader11.bind(this)),i(a,this.$ConversationNubHeader11.bind(this)));a=this.$ConversationNubHeader12();a&&this.$ConversationNubHeader2.addSubscriptions(b("EventListener").listen(a,"click",this.$ConversationNubHeader13.bind(this)),b("EventListener").listen(a,"mouseover",this.$ConversationNubHeader14.bind(this)),b("EventListener").listen(a,"focus",this.$ConversationNubHeader15.bind(this)),i(a,this.$ConversationNubHeader16.bind(this)))};a.prototype.$ConversationNubHeader12=function(){return b("DOM").scry(this.$ConversationNubHeader1,"._1rf1")[0]};a.prototype.$ConversationNubHeader10=function(){return b("DOM").scry(this.$ConversationNubHeader1,"._4a56")[0]};a.prototype.$ConversationNubHeader17=function(){return b("ConversationNubUtils").getCloseButtonElem(this.$ConversationNubHeader1)};a.prototype.$ConversationNubHeader9=function(){this.inform("closeButton")};a.prototype.$ConversationNubHeader11=function(a){a.type==="click"&&a.kill(),this.inform("minimizeButton")};a.prototype.$ConversationNubHeader8=function(){this.inform("clickHeader")};a.prototype.$ConversationNubHeader18=function(){this.inform("showMenu")};a.prototype.$ConversationNubHeader19=function(){this.inform("hideMenu");var a=this.$ConversationNubHeader12();a&&a.blur()};a.prototype.$ConversationNubHeader20=function(){this.inform("menuPermalinkClick")};a.prototype.$ConversationNubHeader21=function(a){__p&&__p();if(this.$ConversationNubHeader4)return;var c=this.$ConversationNubHeader12();if(!c)return;a&&(this.$ConversationNubHeader5=!0);b("Bootloader").loadModules(["React","ReactDOM","ConversationNubHeaderMenu.react"],function(a,b,d){if(this.$ConversationNubHeader6)return;var e=babelHelpers["extends"]({},this.$ConversationNubHeader3(),{onMenuShow:this.$ConversationNubHeader18.bind(this),onMenuHide:this.$ConversationNubHeader19.bind(this),onPermalinkClick:this.$ConversationNubHeader20.bind(this),showOnMount:this.$ConversationNubHeader5});this.$ConversationNubHeader4=b.render(a.createElement(d,e),c)}.bind(this),"ConversationNubHeader")};a.prototype.$ConversationNubHeader13=function(a){a.kill(),this.$ConversationNubHeader21(!0)};a.prototype.$ConversationNubHeader14=function(){this.$ConversationNubHeader21(!1)};a.prototype.$ConversationNubHeader15=function(){this.$ConversationNubHeader21(!1)};a.prototype.$ConversationNubHeader16=function(){this.$ConversationNubHeader4?this.$ConversationNubHeader4.toggle():this.$ConversationNubHeader21(!0)};a.prototype.hideMenu=function(){this.$ConversationNubHeader4&&this.$ConversationNubHeader4.hide()};a.prototype.destroy=function(){this.$ConversationNubHeader6=!0;var a=this.$ConversationNubHeader12();a&&this.$ConversationNubHeader4&&b("ifRequired")("ReactDOM",function(b){b.unmountComponentAtNode(a)});this.$ConversationNubHeader2.release()};e.exports=a}),null);
__d("ConversationNubTabsUpdateEventController",["Arbiter","ConversationNubUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="ConversationNub/tabsUpdated",h="ConversationNub/minimizedByUser",i="ConversationNub/maximizedByUser",j=!1;function k(a){j||b("Arbiter").inform(g,a)}function a(a){return b("Arbiter").subscribe(g,function(b,c){j=!0,a(c),j=!1})}function c(a,c){c&&b("Arbiter").inform(h,{tab:a}),a.minimize(),k()}function d(a,c){if(!c&&!b("ConversationNubUtils").allowProgrammaticPopOut())return;c&&b("Arbiter").inform(i,{tab:a});a.popOut();k()}e.exports={TAB_MINIMIZED_BY_USER_EVENT:h,TAB_MAXIMIZED_BY_USER_EVENT:i,informTabsUpdated:k,subscribeToTabsUpdated:a,minimizeAndInformTabUpdate:c,popOutAndInformTabUpdate:d}}),null);
__d("XConversationNubTogglePinController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/conversation/nub_story/toggle_pin/",{ft_id:{type:"String"},pin:{type:"Bool",defaultValue:!1},with_render:{type:"Bool",defaultValue:!1},notif_setting:{type:"Enum",enumType:1}})}),null);
__d("XConversationsToggleController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/conversation/toggle_feature/",{turn_conversations_on:{type:"Bool",defaultValue:!1}})}),null);
__d("isBusinessURI",["isFacebookURI"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("isFacebookURI")(a)&&a.getSubdomain()==="business"}e.exports=a}),null);
__d("isGamesURI",["isFacebookURI"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("isFacebookURI")(a)&&a.getPath().startsWith("/games")}e.exports=a}),null);
__d("ConversationNubUtils",["csx","Arbiter","AsyncRequest","ConversationNubTabState","DOM","Event","EventListener","Keys","NotificationConversationController","URI","XConversationNubTogglePinController","XConversationsToggleController","isBusinessURI","isCanvasAppURI","isGamesURI"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ConversationNubTabState"),i=Object.freeze({DISABLE:"disable",ENABLE:"enable"}),j="ConversationNubUtils/closeTab",k="ConversationNubUtils/unpinnedFromHeader",l="ConversationNubUtils/recheckTabVisibility",m="ConversationNubUtils/openPermalinkFromHeader",n="ConversationNubUtils/turnOff",o="ConversationNubUtils/turnOn",p="tab-x-out",q="browser-tab-sync",r="overflow-x-out",s="unpin";function a(a){var b=Object.values(i);return b.find(function(b){return b===a})||null}function t(a,c,d,e){e=e||{};e=e.notif_setting;a=b("XConversationNubTogglePinController").getURIBuilder().setString("ft_id",String(a)).setBool("pin",c);e&&a.setEnum("notif_setting",e);c=a.getURI();e=new(b("AsyncRequest"))().setURI(c).setMethod("POST");d&&e.setAllowCrossPageTransition(!0);e.send()}function u(a){var c=b("XConversationsToggleController").getURIBuilder().setBool("turn_conversations_on",a).getURI();a?H():G();c=new(b("AsyncRequest"))().setURI(c).setAllowCrossPageTransition(!0).setHandler(function(a){a.getPayload().conversationsStatus?H():G()}).setErrorHandler(function(b){a?G():H()}).setMethod("POST");c.send()}function v(a,b,c){t(a,!0,b,c)}function w(a,b,c){t(a,!1,b,c)}function c(a,b){v(a,!1,b)}function d(a,b){w(a,!1,b)}function f(a,b){v(a,!0,b)}function g(a,b){w(a,!0,b)}function x(){u(!1),b("NotificationConversationController").deleteAllTabs()}function y(){u(!0)}function z(a){return b("DOM").scry(a,"._4iz6")[0]}function A(a,c,d){var e=function(){d()};c.addSubscriptions(b("EventListener").listen(a,"click",e),b("EventListener").listen(a,"keydown",function(a){b("Event").getKeyCode(a)===b("Keys").RETURN&&e()}))}function B(){var a=b("URI").getRequestURI();return!b("isCanvasAppURI")(a)&&!b("isBusinessURI")(a)&&!b("isGamesURI")(a)}function C(a,c,d){var e=h.getLoadedTab(a);if(!e)return;var f=e.getPersistentState(),g=e.getSessionID();e=e.getPageID();b("Arbiter").inform(j,{tabID:a,ftID:c,tabState:f,sessionID:g,reason:d,pageID:e})}function D(a){a=h.getLoadedTab(a);if(!a)return;b("Arbiter").inform(k,{tab:a})}function E(a){b("Arbiter").inform(l,{tab:a})}function F(a){a=h.getLoadedTab(a);if(!a)return;b("Arbiter").inform(m,{tab:a})}function G(){b("Arbiter").inform(n,{})}function H(){b("Arbiter").inform(o,{})}e.exports={CLOSE_TAB_EVENT:j,UNPIN_FROM_HEADER_EVENT:k,OPEN_PERMALINK_FROM_HEADER_EVENT:m,TURN_CONVERSATIONS_OFF_EVENT:n,TURN_CONVERSATIONS_ON_EVENT:o,CLOSE_REASON_TAB_X_OUT:p,CLOSE_REASON_SYNCHRONIZED_FROM_OTHER_TAB:q,CLOSE_REASON_OVERFLOW_X_OUT:r,CLOSE_REASON_UNPIN:s,coerceToPinRequestNotifSetting:a,sendPinRequest:c,sendUnpinRequest:d,sendPinRequestAcrossTransitions:f,sendUnpinRequestAcrossTransitions:g,getCloseButtonElem:z,addCloseButtonListeners:A,informShouldCloseTab:C,informDidUnpinFromHeaderMenu:D,informShouldRecheckTabVisibility:E,informOpenPermalinkFromHeader:F,allowProgrammaticPopOut:B,turnConversationsOff:x,turnConversationsOn:y}}),null);
__d("ConversationNubPermalinkUtils",["URI","isFacebookURI"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){return a.substr(-1)==="/"?a.slice(0,-1):a}function h(a,b){a=a.getPath();b=b.getPath();return g(a)===g(b)}function i(a,b,c){a=a.getQueryData();b=b.getQueryData();a=a[c];b=b[c];return a==null&&b==null?!0:a===b}function a(a){var c=new(b("URI"))(window.location.href);return c&&a&&b("isFacebookURI")(c)&&b("isFacebookURI")(a)&&h(c,a)&&i(c,a,"fbid")&&i(c,a,"story_fbid")}e.exports={isOnPermalink:a}}),null);
__d("DockTabsViewportFantaTabUtils",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();f=9;var g=284,h=g+f;function a(){return h+1}function b(a){return Math.floor(a/h)}function c(a){if(!a)return null;a=a.fantaTabModelStateGetter;return a?a():null}function d(a){return a?a.size:0}e.exports={getTabCountToFitWidth:b,getMinRequiredWidthForFirstFantaTab:a,getFantaTabModelFromCallbacks:c,getNumFantaTabsFromModel:d}}),null);
__d("DockTabsViewportPinnedConversationTabUtils",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=496+9+2,h=210+9+2,i=52;function j(){return g}function k(){return h}function a(){return i}function b(a){return a.getIsRaised()?j():k()}function c(){return j()+i}function d(a){a=a||{};a=a.pinnedConvoTabStateGetter;return a?a():null}function f(a){return a?a.getTotalTabCount():0}e.exports={getRaisedPinnedConvoTabWidth:j,getLoweredPinnedConvoTabWidth:k,getPinnedConvoSelectorWidth:a,getPinnedConvoTabWidth:b,getMinRequiredWidthForFirstConvoTab:c,getPinnedConvoTabsStateFromCallbacks:d,getNumPinnedConvoTabsFromModel:f}}),null);
__d("DockTabsViewportCalculator",["csx","Arbiter","DataStore","Dock","DockTabsViewportFantaTabUtils","DockTabsViewportPinnedConversationTabUtils","DOM","Event","FullScreen","SubscriptionsHandler","Vector","ViewportBounds","ge","getViewportDimensions","setImmediate"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=50;a=35;var i=a,j="dock-tab-viewport-inst",k=b("DockTabsViewportFantaTabUtils").getMinRequiredWidthForFirstFantaTab,l=b("DockTabsViewportFantaTabUtils").getFantaTabModelFromCallbacks,m=b("DockTabsViewportFantaTabUtils").getNumFantaTabsFromModel,n=b("DockTabsViewportPinnedConversationTabUtils").getMinRequiredWidthForFirstConvoTab,o=b("DockTabsViewportPinnedConversationTabUtils").getNumPinnedConvoTabsFromModel,p=b("DockTabsViewportPinnedConversationTabUtils").getPinnedConvoTabsStateFromCallbacks;function q(a){return a?b("Vector").getElementDimensions(a).x:0}function r(a){this.$1=a,this.$3=0,this.$4=0,this.$5=null,this.$6=null,this.$7=!1,this.$8=!1,this.$9=!1,this.$2=new(b("SubscriptionsHandler"))(),this.$10(),this.$11()}r.prototype.$10=function(){var a=this.$12.bind(this);this.$2.addSubscriptions(b("Event").listen(window,"resize",a),b("Dock").subscribe("resize",a),b("Arbiter").subscribeOnce("sidebar/initialized",a,"new"),b("FullScreen").subscribe("changed",function(){b("FullScreen").isFullScreen()?(this.$7=!0,this.$8=!1):(this.$7=!1,this.$8&&(b("setImmediate")(function(){a()}),this.$8=!1))}.bind(this)))};r.prototype.registerFantaTabCallbacks=function(a){this.$5=a};r.prototype.registerPinnedConvoTabCallbacks=function(a){this.$6=a};r.prototype.forceRecalculateFBDockWidth=function(){this.$11(),this.$13({forceRecalculateChatTabs:!1,pinnedConvoUpdateData:null})};r.prototype.forceRecalculateChatTabs=function(){this.$13({forceRecalculateChatTabs:!0,pinnedConvoUpdateData:null})};r.prototype.forceRecalculatePinnedConvoTabs=function(a){this.$13({forceRecalculateChatTabs:!0,pinnedConvoUpdateData:a})};r.prototype.$12=function(){if(b("FullScreen").isFullScreen()||this.$7){this.$8=!0;return}this.forceRecalculateFBDockWidth()};r.prototype.$13=function(a){var b=a.forceRecalculateChatTabs;a=a.pinnedConvoUpdateData;var c=this.$14(),d=c.chatTabAvailableWidth;c=c.pinnedConvoTabAvailableWidth;this.$15(d,!!b);this.$16(c,a)};r.prototype.$16=function(a,b){var c=this.$6||{};c=c.onAvailableWidthChanged;c&&c(a,b)};r.prototype.$15=function(a,b){b=this.$5||{};b=b.onAvailableWidthChanged;b&&b(a)};r.prototype.$17=function(){var a=l(this.$5);return m(a)};r.prototype.$18=function(){return k()};r.prototype.$14=function(){__p&&__p();var a=this.$3,b={chatTabAvailableWidth:a,pinnedConvoTabAvailableWidth:0},c={chatTabAvailableWidth:0,pinnedConvoTabAvailableWidth:a},d=this.$17(),e=p(this.$6),f=o(e);if(!e||f===0)return b;else if(d===0)return c;e=this.$18();if(a<=e)return b;f=n();d=a-e;if(d<f)return b;else c=f;d=c;b=Math.max(e,a-c);return{chatTabAvailableWidth:b,pinnedConvoTabAvailableWidth:d}};r.prototype.$11=function(){this.$3=this.$19(),this.$20("DockTabsViewportCalculator/recalcTotalDock_FOR_TEST_ONLY")};r.prototype.$21=function(){var a=this.$1;if(!a)return{buddyListNubWidth:0,employeeNubsWidth:0};var c=q(a),d=q(b("DOM").find(a,"._56ox")),e=q(b("DOM").scry(a,"._56oy")[0]);a=q(b("DOM").scry(a,"._ph1")[0]);c=Math.max(c-d-e-a,0);return{buddyListNubWidth:d,employeeNubsWidth:c}};r.prototype.$19=function(){__p&&__p();var a=b("getViewportDimensions").withoutScrollbars().width;a-=b("ViewportBounds").getLeft()+b("ViewportBounds").getRight();a-=h;var c=this.$21(),d=c.buddyListNubWidth;c=c.employeeNubsWidth;a-=d;this.$4=Math.max(this.$4,c);a-=this.$4;a-=i;return Math.max(a,0)};r.prototype.enableTestInforms_FOR_TEST_ONLY=function(){this.$9=!0};r.prototype.$20=function(a){this.$9&&b("Arbiter").inform(a)};r.prototype.getChatTabAvailableDockWidth_FOR_TEST_ONLY=function(){return this.$14().chatTabAvailableWidth};r.prototype.getPinnedConvoTabAvailableDockWidth_FOR_TEST_ONLY=function(){return this.$14().pinnedConvoTabAvailableWidth};r.prototype.getAvailableTotalWidth_FOR_TEST_ONLY=function(){return this.$3};e.exports={getInstance:function(a){__p&&__p();var c=b("ge")("pagelet_dock");if(!c||!b("DOM").contains(c,a))return null;a=b("DataStore").get(c,j);if(a instanceof r)return a;var d=b("DOM").scry(c,".fbDockWrapperRight .fbDock")[0];a=new r(d);b("DataStore").set(c,j,a);return a}}}),null);
__d("ConversationNubViewportManager",["DockTabsViewportCalculator","DockTabsViewportPinnedConversationTabUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("DockTabsViewportPinnedConversationTabUtils").getMinRequiredWidthForFirstConvoTab;function a(a,c,d){this.$1=a,this.$3=c,this.$2=b("DockTabsViewportCalculator").getInstance(this.$1),this.$2&&this.$2.registerPinnedConvoTabCallbacks(babelHelpers["extends"]({},d,{pinnedConvoTabStateGetter:function(){return this.$3}.bind(this)}))}a.prototype.getNumDockTabsToShow=function(a){return this.getCouldFitAtLeastOneDockTab(a)?1:0};a.prototype.getCouldFitAtLeastOneDockTab=function(a){var b=g();return b<=a};a.prototype.forceRecalculatePinnedConvoTabs=function(a){this.$2&&this.$2.forceRecalculatePinnedConvoTabs(a)};e.exports=a}),null);
__d("ConversationNubVisibilityDedupeUtils",["Bootloader","emptyFunction","ifRequired"],(function(a,b,c,d,e,f){"use strict";function a(a){b("Bootloader").loadModules(["UFICommentVisibilityStore"],a,"ConversationNubVisibilityDedupeUtils")}function c(a){return b("ifRequired")("UFICommentVisibilityStore",function(b){return b.isFeedbackTargetVisible(a)},b("emptyFunction").thatReturnsFalse)}e.exports={bootloadUFIVisibilityModule:a,isFeedbackTargetVisible:c}}),null);
__d("XNotificationNubStoryController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/conversation/nub_story/",{notif_alert_id:{type:"String"},notif_id:{type:"Int"},ft_id:{type:"String"},force_minimized:{type:"Bool",defaultValue:!1}})}),null);
__d("NotificationConversationController",["csx","cx","Arbiter","AsyncRequest","Bootloader","ConversationNub","ConversationNubActionTakenReporter","ConversationNubPermalinkUtils","ConversationNubTabState","ConversationNubTabsUpdateEventController","ConversationNubUtils","ConversationNubViewportManager","ConversationNubVisibilityDedupeUtils","CSS","DOM","PinnedConversationNubsConfig","SubscriptionsHandler","URI","XNotificationNubStoryController","ge","ifRequired","nullthrows"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ConversationNubVisibilityDedupeUtils").isFeedbackTargetVisible,j=1,k=b("ConversationNubTabState"),l=Object.create(null),m=null,n=null,o=null,p=null,q=null,r=null,s=!1,t=null,u=null,v=null,w=null,x=Object.create(null);function y(){n||(n=b("DOM").scry(b("ge")("pagelet_dock"),"._1mw-")[0]);return n}function z(){if(!o){var a=y();a&&(o=b("DOM").scry(a,"._1tvj")[0])}return o}function A(){if(!p){var a=y();a&&(p=b("DOM").scry(a,"._2ikx .fbNubButton")[0])}return p}a.prototype.init=function(){__p&&__p();if(s)return;s=!0;var a=new(b("SubscriptionsHandler"))();a.addSubscriptions(b("ConversationNubTabsUpdateEventController").subscribeToTabsUpdated(this.$2.bind(this)),b("Arbiter").subscribe(b("ConversationNubUtils").CLOSE_TAB_EVENT,function(a,b){a=b||{};b=a.tabID;b&&this.$3(b)}.bind(this)));this.$1=new(b("ConversationNubActionTakenReporter"))();t=a};a.prototype.$4=function(a){a=m?m.getNumDockTabsToShow(a):j;k.setMaxDockTabs(a)};a.prototype.$5=function(a,c){this.$4(a);if(c){var d=c.tabToPromote;c=c.tabToOpenIfInDock;d&&!k.isTabInDock(d.getTabID())&&k.moveTabToDockLeft(d.getTabID());b("ConversationNubUtils").allowProgrammaticPopOut()&&c&&k.isTabInDock(c.getTabID())&&c.popOut()}this.$6(a)};a.prototype.$2=function(a){m&&m.forceRecalculatePinnedConvoTabs(a)};a.prototype.$6=function(a){__p&&__p();var c=k.getTotalTabCount(),d=k.getNumDockTabs();a=m?m.getCouldFitAtLeastOneDockTab(a):!1;a=c>0&&a;d=d<c&&a;c=y();c&&(b("CSS").conditionClass(c,"_1tvf",a),b("CSS").conditionClass(c,"_1dex",d),b("CSS").conditionClass(c,"_1tvi",d));a=b("PinnedConversationNubsConfig").pinnedToLeft?k.getTabsForDockOldestFirst():k.getTabsForDockNewestFirst();a.forEach(function(a){a.getIsRaised()&&a.clearBadge()});c=k.getTabsForMenuNewestFirst();this.$7(a);this.$8(c)};a.prototype.handleNotificationsRead=function(a){this.init();k.getUnsortedLoadedTabs().forEach(function(b){var c=b.getNotificationPayloadAlertID();c&&a[c]&&b.clearBadge()});k.getUnloadedTabs().forEach(function(b){b.notifAlertID&&a[b.notifAlertID]&&k.clearTabNotifications(b.tabID)});var b=k.getTabsForMenuNewestFirst();this.$8(b)};a.prototype.handleNewNotificationFromGraphQL=function(a,c){this.init();a=b("nullthrows")(a);var d=a.tab_id,e=a.notification,f=a.feedback_target_id;a=a.permalink_uri;e=b("nullthrows")(e);var g=e.notif_id,h=e.alert_id;e=e.notif_type;this.$9(b("nullthrows")(d),b("nullthrows")(g),b("nullthrows")(f),b("nullthrows")(h),a?new(b("URI"))(a):null,c,e)};a.prototype.$9=function(a,c,d,e,f,g,h){e=b("XNotificationNubStoryController").getURIBuilder().setString("notif_alert_id",e).setInt("notif_id",c);this.$10(d,g);this.$11(a,d,h,f,e)};a.prototype.$10=function(a,b){x[a]||(x[a]=b)};a.prototype.$11=function(a,c,d,e,f){__p&&__p();if(l[a])return;var g=k.getLoadedTab(a);if(g){d&&g.setNotificationType(d);return}(b("ConversationNubPermalinkUtils").isOnPermalink(e)||i(c))&&f.setBool("force_minimized",!0);l[a]=!0;new(b("AsyncRequest"))().setURI(f.getURI()).setAllowCrossPageTransition(!0).setFinallyHandler(function(){delete l[a]}).send()};a.prototype.$12=function(a){__p&&__p();var c=!0;k.getUnsortedLoadedTabs().forEach(function(b){var d=b.getFeedbackTargetID(),e=a[d];e=e?Object.keys(e):[];if(e.length){var f=b.getBadgeCount();i(d)?(b.markCommentsAsSeenWithoutBadging(e),b.clearBadge()):b.attemptAddNewCommentsToBadge(e);d=b.getBadgeCount();f!==d&&(c=!0)}});c&&b("ConversationNubTabsUpdateEventController").informTabsUpdated()};a.prototype.$13=function(a){if(w)return;b("Bootloader").loadModules(["ConversationNubSurveys"],function(b){w||(w=new b(a))},"NotificationConversationController")};a.prototype.$14=function(a,c,d){if(v){v.addTab(a,d);delete x[a.getPersistentState().ftID];return}b("Bootloader").loadModules(["ConversationNubLogger"],function(b){v||(v=new b(c)),v.addTab(a,d),delete x[a.getPersistentState().ftID]},"NotificationConversationController")};a.prototype.$15=function(){if(u)return;b("Bootloader").loadModules(["ConversationNubUFICentralUpdateManager"],function(a){if(u)return;u=new a(this.$12.bind(this))}.bind(this),"NotificationConversationController")};a.prototype.$7=function(a){var c=z();if(!c)return;b("Bootloader").loadModules(["React","ReactDOM","ConversationNubDockedTabGroup.react"],function(b,d,e){r=d.render(b.createElement(e,{dockTabs:a}),c)},"NotificationConversationController")};a.prototype.$16=function(a){a.popOut(),b("ConversationNubTabsUpdateEventController").informTabsUpdated({tabToPromote:a})};a.prototype.$8=function(a){var c=A();if(!c)return;b("Bootloader").loadModules(["React","ReactDOM","ConversationNubCollapsedSelectorMenu.react"],function(b,d,e){q=d.render(b.createElement(e,{menuTabs:a,onTabSelected:this.$16}),c)}.bind(this),"NotificationConversationController")};a.prototype.$17=function(){if(!m){var a=y();if(a){var c={onAvailableWidthChanged:this.$5.bind(this)};m=new(b("ConversationNubViewportManager"))(a,k,c)}}};a.prototype.storyFromServer=function(a,c){__p&&__p();s||this.init();var d=c.attempt_open_on_init,e=c.ft_id,f=c.init_without_badge,g=c.notif_alert_id,h=c.notification_type,j=c.permalink_uri,l=c.promote_on_init,m=c.tab_add_source,n=c.tab_id,o=c.title,p=c.should_show_intro_nux,q=c.should_show_hide_nux;c=c.page_id;var r=k.getLoadedTab(n);if(r){(l||d)&&b("ConversationNubTabsUpdateEventController").informTabsUpdated({tabToPromote:l?r:null,tabToOpenIfInDock:d?r:null});return}f=f||i(e);r=k.getTabStateIfExists(n);if(r)f=null;else{r=b("ConversationNub").createDefaultState(n,j,e,g,h,o);k.addTabState(r)}j=new(b("ConversationNub"))(a,n,f,c,Boolean(p),Boolean(q));k.addLoadedTab(n,j);d=d||j.getPersistentState().isTabRaised;this.$15();this.$17();b("ConversationNubTabsUpdateEventController").informTabsUpdated({tabToPromote:l?j:null,tabToOpenIfInDock:d?j:null});this.$13(k);g=x[e]||m||"unknown";this.$14(j,k,g)};a.prototype.deleteAllTabs=function(){k.deleteAllTabs(),b("ConversationNubTabsUpdateEventController").informTabsUpdated()};a.prototype.$3=function(a){a=k.deleteTab(a);a&&b("ConversationNubTabsUpdateEventController").informTabsUpdated()};a.prototype.unsubscribe=function(){t&&t.release(),t=null,v&&v.destroy(),v=null,w&&w.destroy(),w=null,u&&u.destroy(),u=null,this.$1.destroy(),b("ifRequired")("ReactDOM",function(a){var b=A();q&&b&&a.unmountComponentAtNode(b);b=z();r&&b&&a.unmountComponentAtNode(b)})};function a(){}e.exports=new a()}),null);
__d("PinnedConversationTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:PinnedConversationLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:PinnedConversationLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:PinnedConversationLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAttemptOpenOnInit=function(a){this.$1.attempt_open_on_init=a;return this};a.prototype.setBadgeCount=function(a){this.$1.badge_count=a;return this};a.prototype.setClientEventTimeMs=function(a){this.$1.client_event_time_ms=a;return this};a.prototype.setEvent=function(a){this.$1.event=a;return this};a.prototype.setFtID=function(a){this.$1.ft_id=a;return this};a.prototype.setIsRaised=function(a){this.$1.is_raised=a;return this};a.prototype.setNotificationType=function(a){this.$1.notification_type=a;return this};a.prototype.setPageID=function(a){this.$1.page_id=a;return this};a.prototype.setPromoteOnInit=function(a){this.$1.promote_on_init=a;return this};a.prototype.setReason=function(a){this.$1.reason=a;return this};a.prototype.setTabID=function(a){this.$1.tab_id=a;return this};a.prototype.setTabSessionID=function(a){this.$1.tab_session_id=a;return this};a.prototype.setTabsInDock=function(a){this.$1.tabs_in_dock=a;return this};a.prototype.setTabsInMenu=function(a){this.$1.tabs_in_menu=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.setWindowInnerHeight=function(a){this.$1.window_inner_height=a;return this};a.prototype.setWindowInnerWidth=function(a){this.$1.window_inner_width=a;return this};c={attempt_open_on_init:!0,badge_count:!0,client_event_time_ms:!0,event:!0,ft_id:!0,is_raised:!0,notification_type:!0,page_id:!0,promote_on_init:!0,reason:!0,tab_id:!0,tab_session_id:!0,tabs_in_dock:!0,tabs_in_menu:!0,vc:!0,window_inner_height:!0,window_inner_width:!0};e.exports=a}),null);
__d("ConversationNubLogger",["Arbiter","ConversationNubTabsUpdateEventController","ConversationNubUtils","PinnedConversationTypedLogger","SubscriptionsHandler"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this.$1=new(b("SubscriptionsHandler"))(),this.$2=a,this.$3()}a.prototype.$3=function(){__p&&__p();this.$1.addSubscriptions(b("Arbiter").subscribe(b("ConversationNubUtils").CLOSE_TAB_EVENT,function(a,c){a=c.tabState;var d=c.sessionID;c=c.reason;c=new(b("PinnedConversationTypedLogger"))().setEvent("pinned_conversation_tab_close").setReason(c);this.$4(c,a,d)}.bind(this))),this.$1.addSubscriptions(b("Arbiter").subscribe(b("ConversationNubUtils").UNPIN_FROM_HEADER_EVENT,function(a,c){a=c.tab;c=new(b("PinnedConversationTypedLogger"))().setEvent("pinned_conversation_tab_hide");this.$5(c,a)}.bind(this))),this.$1.addSubscriptions(b("Arbiter").subscribe(b("ConversationNubTabsUpdateEventController").TAB_MAXIMIZED_BY_USER_EVENT,function(a,c){a=c.tab;c=new(b("PinnedConversationTypedLogger"))().setEvent("pinned_conversation_tab_maximize");this.$5(c,a)}.bind(this))),this.$1.addSubscriptions(b("Arbiter").subscribe(b("ConversationNubTabsUpdateEventController").TAB_MINIMIZED_BY_USER_EVENT,function(a,c){a=c.tab;c=new(b("PinnedConversationTypedLogger"))().setEvent("pinned_conversation_tab_minimize");this.$5(c,a)}.bind(this))),this.$1.addSubscriptions(b("Arbiter").subscribe(b("ConversationNubUtils").OPEN_PERMALINK_FROM_HEADER_EVENT,function(a,c){a=c.tab;c=new(b("PinnedConversationTypedLogger"))().setEvent("pinned_conversation_open_permalink_from_header");this.$5(c,a)}.bind(this)))};a.prototype.$5=function(a,b){a.setTabID(b.getTabID()).setPageID(b.getPageID()).setClientEventTimeMs(Date.now()).setTabsInMenu(this.$2.getNumMenuTabs()).setTabsInDock(this.$2.getNumDockTabs()).setWindowInnerWidth(window.innerWidth).setWindowInnerHeight(window.innerHeight);a.setFtID(b.getFeedbackTargetID()).setIsRaised(b.getIsRaised()).setBadgeCount(b.getBadgeCount()).setTabSessionID(b.getSessionID());b=b.getNotificationType();b&&a.setNotificationType(b);a.log()};a.prototype.$4=function(a,b,c){a.setTabID(b.tabID).setClientEventTimeMs(Date.now()).setTabsInMenu(this.$2.getNumMenuTabs()).setTabsInDock(this.$2.getNumDockTabs()).setWindowInnerWidth(window.innerWidth).setWindowInnerHeight(window.innerHeight),a.setFtID(b.ftID).setIsRaised(b.isTabRaised).setBadgeCount(b.badgeCount).setTabSessionID(c),b.notificationType&&a.setNotificationType(b.notificationType),a.log()};a.subscriptionTriggered=function(a){new(b("PinnedConversationTypedLogger"))().setEvent("pinned_conversation_subscription_triggered").setReason(a).log()};a.prototype.addTab=function(a,c){c=new(b("PinnedConversationTypedLogger"))().setEvent("pinned_conversation_tab_add").setReason(c);this.$5(c,a)};a.prototype.destroy=function(){this.$1.release()};e.exports=a}),null);
__d("ConversationNotificationListeners",["Bootloader","ConversationNubAddTabSource","ConversationNubLogger","FacebookWebNotificationsSubscription","NotificationConstants","NotificationUpdates","once"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("NotificationConstants").PayloadSourceType.LIVE_SEND;function h(){b("NotificationUpdates").subscribe("update-notifications",function(a,c){c.payloadsource===g&&c.readState&&Object.keys(c.readState).length&&b("Bootloader").loadModules(["NotificationConversationController"],function(a){a.handleNotificationsRead(c.readState)},"ConversationNotificationListeners")})}var i=b("once")(function(){h(),b("FacebookWebNotificationsSubscription").subscribe({event:"NEW_PINNED_CONVERSATION",callback:function(a){b("ConversationNubLogger").subscriptionTriggered("graphql"),b("Bootloader").loadModules(["NotificationConversationController"],function(c){c.handleNewNotificationFromGraphQL(a,b("ConversationNubAddTabSource").NOTIFICATION)},"ConversationNotificationListeners")}})});e.exports={initialize:function(){i()}}}),null);
__d("XWorkUserSettingsUpdateController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/work/user_settings/",{})}),null);
__d("DockNubs",["AsyncRequest","CSS","WorkUserSettings","XWorkUserSettingsUpdateController"],(function(a,b,c,d,e,f){__p&&__p();var g="hidden_elem",h=b("WorkUserSettings").hideDock,i=null,j=[];a={init:function(a){i=a,this.registerSubscriber(this._updateCssClasses)},isVisible:function(){return!h},registerSubscriber:function(a){j.push(a);a(h);return{unsubscribe:function(){this._unregisterSubscriber(a)}}},_unregisterSubscriber:function(a){j=j.filter(function(b){return b!==a})},_updateSubscribers:function(){j.forEach(function(a){return a(h)})},toggleVisibility:function(){if(!i)return;h=!h;this._saveVisibilityPreferences(h);this._updateSubscribers()},_saveVisibilityPreferences:function(a){var c=b("XWorkUserSettingsUpdateController").getURIBuilder().getURI();new(b("AsyncRequest"))(c).setMethod("POST").setData({hide_dock:a}).send()},_updateCssClasses:function(){if(!i)return;h?b("CSS").addClass(i,g):b("CSS").removeClass(i,g)}};e.exports=a}),null);
__d("KeyboardShortcutFlyout.react",["cx","fbt","Bootloader","KeyboardShortcuts","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").PureComponent);i=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={shortcutInfos:b("KeyboardShortcuts").getShortcutInfos()},c}a.prototype.render=function(){return b("React").createElement("div",{className:"_yqu _2ph_ _2pim"},b("React").createElement("table",{className:"_67br"},b("React").createElement("tbody",null,this.$2())))};a.prototype.componentDidMount=function(){this.$1=b("KeyboardShortcuts").subscribe(["cleanup","token_added"],function(){this.setState({shortcutInfos:b("KeyboardShortcuts").getShortcutInfos()})}.bind(this)),b("Bootloader").loadModules(["KeyEventTypedLogger"],function(a){new a().setAction("key_shortcut_flyout_shown").log()},"KeyboardShortcutFlyout.react")};a.prototype.componentWillUnmount=function(){b("KeyboardShortcuts").unsubscribe(this.$1)};a.prototype.$2=function(){return this.state.shortcutInfos.length?this.state.shortcutInfos.map(this.$3):h._("No shortcuts on this page")};a.prototype.$3=function(a,c){return b("React").createElement("tr",{key:"shortcut_info_"+c,className:"_3-12"},b("React").createElement("th",{className:"_2pin _52ju"},a.displayKeys.map(function(c,a){return b("React").createElement("span",{className:"_3-28 _2e42 _653d _52jv",key:a},c)})),b("React").createElement("td",{className:"_2pin _2pii"},a.description))};e.exports=a}),null);
__d("NubController",["csx","ArbiterMixin","Dock"],(function(a,b,c,d,e,f,g){__p&&__p();function a(){}Object.assign(a.prototype,b("ArbiterMixin"),{init:function(a){this.el=a;this.nubButton=a.querySelector(".fbNubButton");this.closeButton=a.querySelector("._2dv8");b("Dock").registerNubController(a,this);this.closeButton&&this.closeButton.addEventListener("click",this.hide.bind(this));return this},buttonContentChanged:function(){this.inform("nub/button/content-changed")},flyoutContentChanged:function(){this.inform("nub/flyout/content-changed")},hide:function(){b("Dock").hide(this.el)},show:function(){b("Dock").show(this.el)}});e.exports=a}),null);
__d("ReactNub",["csx","DOM","Focus","NubController","Parent","React","ReactDOM","getActiveElement"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("NubController"));h=c&&c.prototype;function a(a,c){__p&&__p();h.constructor.call(this);this.$ReactNub4=function(){b("ReactDOM").unmountComponentAtNode(this.$ReactNub1),b("Focus").set(this.$ReactNub3),this.$ReactNub3!==b("getActiveElement")()&&b("Focus").set(this.nubButton)}.bind(this);this.$ReactNub5=function(){this.$ReactNub3=b("getActiveElement")();var a=this.$ReactNub2;b("ReactDOM").render(b("React").createElement(a,null),this.$ReactNub1);b("Focus").set(this.closeButton)}.bind(this);this.$ReactNub1=a;this.$ReactNub2=c;c=b("Parent").bySelector(a,"._50-v");h.init.call(this,c);b("DOM").empty(a);this.subscribe("hide",this.$ReactNub4);this.subscribe("show",this.$ReactNub5)}e.exports=a}),null);
__d("FacebarResultStoreUtils",["FacebarGlobalOptions","FacebarJSConstants"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={getQueryFeatures:function(a){__p&&__p();var c={};if(b("FacebarGlobalOptions").enableBootstrapRanking){a.raw_text&&(c.FEATURE_QUERY_LENGTH=a.raw_text.length);if(a.tokens){c.FEATURE_QUERY_TOKENS=a.tokens.length;c.FEATURE_QUERY_TOKEN_LENGTH_SUM=0;for(var d=0;d<a.tokens.length;d++)c.FEATURE_QUERY_TOKEN_LENGTH_SUM+=a.tokens[d].length}}return c},addFeatures:function(a,b,c,d,e,f){__p&&__p();if(!a.features)return;a.features={FEATURE_QUERY_LENGTH:d.FEATURE_QUERY_LENGTH,FEATURE_QUERY_TOKENS:d.FEATURE_QUERY_TOKENS,FEATURE_QUERY_TOKEN_LENGTH_SUM:d.FEATURE_QUERY_TOKEN_LENGTH_SUM};a.features.FEATURE_IS_EXACT_NAME_MATCH=e;a.features.FEATURE_IS_STOP_WORD_MATCH=f;if(b&&b.length>0){d=b.split(" ").length;e=0;for(var f=0;f<a.termMatches.length;++f)b.search(a.termMatches[f])>=0&&e++;a.features.FEATURE_TITLE_TOKEN_MATCH_FRACTION=e/d}if(c.tokens&&c.tokens.length>0){f=b.search(c.tokens[0]);a.features.FEATURE_FIRST_TERM_MATCH_POSITION=f;a.features.FEATURE_FIRST_TERM_MATCH_TOKEN=b.substring(0,f+c.tokens[0].length).split(" ").length;a.termMatches.some(function(b){if(b.search(c.tokens[0])===0){a.features.FEATURE_FIRST_TERM_MATCH_TOKEN_FRACTION=c.tokens[0].length/b.length;return!0}return!1});a.features.FEATURE_IN_ORDER_MATCH=1;c.tokens.length>1&&(f=b.search(c.tokens[1]),a.features.FEATURE_SECOND_TERM_MATCH_POSITION=f,a.features.FEATURE_SECOND_TERM_MATCH_TOKEN=b.substring(0,f+c.tokens[1].length).split(" ").length,a.termMatches.some(function(b){if(b.search(c.tokens[1])===0){a.features.FEATURE_FIRST_TERM_MATCH_TOKEN_FRACTION=c.tokens[0].length/b.length;return!0}return!1}),a.features.FEATURE_SECOND_TERM_MATCH_TOKEN<a.features.FEATURE_FIRST_TERM_MATCH_POSITION&&(a.features.FEATURE_IN_ORDER_MATCH=0))}return a},processEntityResult:function(a,c,d,e,f,g,h,i,j){a={semantic:c.toString(),structure:[{type:a===b("FacebarJSConstants").keywordType?a:"ent:"+a,text:d,uid:c}],type:a,cost:e,cache_id_length:0,features:[]};a.tuid=JSON.stringify({semantic:a.semantic,structure:a.structure});b("FacebarGlobalOptions").enableBootstrapRanking&&(a.termMatches=h[c.toString()],a=this.addFeatures(a,d.toLowerCase(),f,g,i,j));return a},getRawTextFromStructured:function(a){a=a.map(function(a){return a.getText()});return a.join("")},getTextFromResult:function(a){a=a.structure;var b="";a.forEach(function(a){b+=a.text});return b}};e.exports=a}),null);
__d("HashtagParser",["URLMatcher","getHashtagRegex"],(function(a,b,c,d,e,f){__p&&__p();var g=100,h=30,i=/@\[([0-9]+):([0-9]+):((?:[^\\\]]*(?:\\.)*)*)\]/g;function a(a){var b=u(a),c=0,d=0;return j(a).map(function(a){while(c<b.length){var e=b[c],f=e.offset-d;if(f<a.offset)d+=e.token.length-e.name.length,c++;else break}return{marker:a.marker,tag:a.hashtag,rawOffset:a.offset+d,offset:a.offset}})}function c(a){return k(a,p(a))}function j(a){var b=w(a);return k(b,l(a,b))}function k(a,b){return n(a).slice(0,h).filter(function(a){var c=r(a.offset,a.hashtag.length,b);return!c&&a.hashtag.length<=g})}function l(a,b){return q(o(a),p(b))}var m=b("getHashtagRegex")();function n(a){var b=[];a.replace(m,function(a,c,d,e,f){b.push({marker:d,hashtag:e,offset:f+c.length})});return b}function o(a){return x(a).map(function(a){return[a.offset,a.name.length]})}function p(a){var c=[],d,e=0;while(d=b("URLMatcher").permissiveMatch(a)){var f=a.indexOf(d);c.push([e+f,d.length]);a=a.substring(f+d.length);e+=f+d.length}return c}function q(a,b){var c=[],d=0,e=0,f=0;while(d<a.length&&e<b.length)a[d][0]>b[e][0]?c[f++]=b[e++]:c[f++]=a[d++];return c.concat(a.slice(d),b.slice(e))}function r(a,b,c){if(!c)return!1;var d=t(c,a);return s(a,b,c,d)||s(a,b,c,d+1)}function s(a,b,c,d){if(!c[d])return!1;var e=c[d][0];c=c[d][1];return!(a+b-1<e||a>e+c-1)}function t(a,b){var c=0,d=a.length-1;while(c<=d){var e=Math.floor((c+d)/2),f=a[e][0];if(f==b)return e;else f<b?c=e+1:d=e-1}return d}function u(a){var b=[];a.replace(i,function(a,c,d,e,f){b.push({token:a,id:c,type:d,name:e,offset:f})});return b}function v(a){return a?a.replace(/\\([^\\])/g,"$1").replace(/\\\\/g,"\\"):null}function w(a){return a.replace(i,function(a,b,c,d,e){return v(d)})}function x(a){var b=0,c=0;return u(a).map(function(d){var e=a.indexOf(d.token,c);c=e+1;e-=b;var f=v(d.name);b+=d.token.length-f.length;if(e>=0)return{id:d.id,name:f,type:d.type,offset:e}})}d={};d.parse=a;d.parseWithoutMentions=c;e.exports=d}),null);
__d("HashtagSearchResultUtils",["fbt","FacebarResultStoreUtils","HashtagParser","HashtagSearchResultConfig","URI"],(function(a,b,c,d,e,f,g){__p&&__p();a={getHashtagFromQuery:function(a){a=b("HashtagParser").parse(a);return a&&a.length===1&&a[0].offset===0?a[0].tag:!1},makeTypeaheadResult:function(a){var c=g._("Hashtag");return{category:c,path:new(b("URI"))("/hashtag/"+a).toString(),photo:b("HashtagSearchResultConfig").image_url,rankType:null,replace_results:b("HashtagSearchResultConfig").boost_result?!0:!1,scaled_score:1,score:0,text:"#"+a,type:"hashtag_exact",uid:"hashtag:"+a}},makeFacebarEntry:function(a){var c=g._("Hashtag");return{category:c,path:new(b("URI"))("/hashtag/"+a).toString(),photo:b("HashtagSearchResultConfig").image_url,replace_results:b("HashtagSearchResultConfig").boost_result?!0:!1,text:"#"+a,type:"hashtag_exact",uid:"hashtag:"+a}},makeFacebarResult:function(a){var c=b("FacebarResultStoreUtils").processEntityResult("hashtag_exact","hashtag:"+a,"#"+a,b("HashtagSearchResultConfig").hashtag_cost);c.parse={display:[{type:"ent:hashtag_exact",uid:"hashtag:"+a}],remTokens:[],suffix:""};c.tags={hashtag:"hashtag"};return c}};e.exports=a}),null);
__d("WebBrowserDimensionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:WebBrowserDimensionsLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:WebBrowserDimensionsLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:WebBrowserDimensionsLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setCpuCoresCount=function(a){this.$1.cpu_cores_count=a;return this};a.prototype.setPixelRatio=function(a){this.$1.pixel_ratio=a;return this};a.prototype.setScreenX=function(a){this.$1.screen_x=a;return this};a.prototype.setScreenY=function(a){this.$1.screen_y=a;return this};a.prototype.setViewportX=function(a){this.$1.viewport_x=a;return this};a.prototype.setViewportY=function(a){this.$1.viewport_y=a;return this};c={cpu_cores_count:!0,pixel_ratio:!0,screen_x:!0,screen_y:!0,viewport_x:!0,viewport_y:!0};e.exports=a}),null);
__d("BrowserDimensionsLogger",["WebBrowserDimensionsTypedLogger","getViewportDimensions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=null;a={init:function(){var a=this.getInitialViewportDimensions();a=new(b("WebBrowserDimensionsTypedLogger"))().setPixelRatio(window.devicePixelRatio||1).setScreenX(window.screen.width).setScreenY(window.screen.height).setViewportX(a.width).setViewportY(a.height);window.navigator&&window.navigator.hardwareConcurrency&&a.setCpuCoresCount(window.navigator.hardwareConcurrency);a.log()},getInitialViewportDimensions:function(){g===null&&(g=b("getViewportDimensions")());return g}};e.exports=a}),null);
__d("SearchI18nArabic",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=/[\u0600-\u06FF]/;function h(a){return g.test(a)}var i={1570:1575,1571:1575,1573:1575,1649:1575,1609:1610,1577:1607,1572:1569,1574:1569},j=[1600,1611,1612,1613,1614,1615,1616,1617,1618];function k(a){return Object.prototype.hasOwnProperty.call(i,a)?String.fromCharCode(i[a]):j.indexOf(a)!=-1?"":String.fromCharCode(a)}function a(a){if(!h(a))return a;var b=[];for(var c=0;c<a.length;c++){var d=a.charCodeAt(c);b.push(k(d))}return b.join("")}b={hasArabicCharacters:h,normalizeCharCode:k,arabicNormalization:a};e.exports=b}),null);
__d("UnicodeCJK",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();f="a-zA-Z";var g="\uff21-\uff3a\uff41-\uff5a",h=f+g;f="\u3040-\u309f";g="\u30a0-\u30ff";var i="\u31f0-\u31ff",j="\uff65-\uff9f";g=g+i+j;var k=f+g,l=[12352,12447];i=[12448,12543];var m=i[0]-l[0];j="\u4e00-\u9fcf";f="\u3400-\u4dbf";var n=j+f;g="\uac00-\ud7af";var o=n+k+g,p=null,q=null,r=null,s=null;function t(a){q=q||new RegExp("["+k+"]");return q.test(a)}function a(a){p=p||new RegExp("["+n+"]");return p.test(a)}function b(a){r=r||new RegExp("["+o+"]");return r.test(a)}function u(a){a=a.charCodeAt(0);return String.fromCharCode(a<l[0]||a>l[1]?a:a+m)}function c(a){return!t(a)?a:a.split("").map(u).join("")}function v(a){s=s||new RegExp("^["+k+"]+["+h+"]$");return s.test(a)}function d(a){return v(a)?a.substr(0,a.length-1):a}i={hasKana:t,hasIdeograph:a,hasIdeoOrSyll:b,hiraganaToKatakana:c,isKanaWithTrailingLatin:v,kanaRemoveTrailingLatin:d};e.exports=i}),null);
__d("UnicodeHangulKorean",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=/[\u3130-\u318F\uAC00-\uD7AF]/;function h(a){return g.test(a)}var i=[4352,4353,4522,4354,4524,4525,4355,4356,4357,4528,4529,4530,4531,4532,4533,4378,4358,4359,4360,4385,4361,4362,4363,4364,4365,4366,4367,4368,4369,4370,4449,4450,4451,4452,4453,4454,4455,4456,4457,4458,4459,4460,4461,4462,4463,4464,4465,4466,4467,4468,4469,4448,4372,4373,4551,4552,4556,4558,4563,4567,4569,4380,4573,4575,4381,4382,4384,4386,4387,4391,4393,4395,4396,4397,4398,4399,4402,4406,4416,4423,4428,4593,4594,4439,4440,4441,4484,4485,4488,4497,4498,4500,4510,4513],j=12593;b=i.length;var k=j+b;function l(a){return String.fromCharCode(i[a-j])}var m=4352,n=4449,o=4519,p=44032;c=19;d=21;var q=28,r=d*q;f=c*r;var s=p+f;function t(a){a=a-p;var b=a%q;return String.fromCharCode(m+a/r)+String.fromCharCode(n+a%r/q)+(b>0?String.fromCharCode(o+b):"")}function a(a){if(!h(a))return a;var b=[];for(var c=0;c<a.length;c++){var d=a.charAt(c),e=d.charCodeAt(0);b.push(j<=e&&e<k?l(e):p<=e&&e<s?t(e):d)}return b.join("")}b={toConjoiningJamo:a};e.exports=b}),null);
__d("SearchI18nMatch",["invariant","SearchI18nArabic","UnicodeCJK","UnicodeHangulKorean","createObjectFrom","mapObject"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=["prefix_hangul_conjoining_jamo","prefix_kana_drop_trailing_latin","prefix_kana_hiragana_to_katakana","search_i18n_prefix_arabic_normalization"];function a(a){this.config=b("createObjectFrom")(h,!1),this.setConfigs(a||{})}a.prototype.setConfigs=function(a){b("mapObject")(a,function(a,b){return this.setConfig(b,a)}.bind(this),this)};a.prototype.setConfig=function(a,b){a in this.config||g(0,5344,a),this.config[a]=b};a.prototype.prefixMatchPrepare=function(a){a&&(this.config.prefix_hangul_conjoining_jamo&&(a=b("UnicodeHangulKorean").toConjoiningJamo(a)),this.config.prefix_kana_drop_trailing_latin&&(a=b("UnicodeCJK").kanaRemoveTrailingLatin(a)),this.config.prefix_kana_hiragana_to_katakana&&(a=b("UnicodeCJK").hiraganaToKatakana(a)),this.config.search_i18n_prefix_arabic_normalization&&(a=b("SearchI18nArabic").arabicNormalization(a)));return a};a.prototype.prefixMatch=function(a,b){a=this.prefixMatchPrepare(a);b=this.prefixMatchPrepare(b);return a.startsWith(b)};e.exports=a}),null);
__d("DataSource",["ArbiterMixin","AsyncRequest","SearchI18nMatch","TokenizeUtil","createArrayFromMixed","createObjectFrom","emptyFunction","mixin","str2rstr"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("mixin")(b("ArbiterMixin")));g=c&&c.prototype;function a(a){"use strict";g.constructor.call(this),this._maxResults=a.maxResults||10,this.token=a.token,this.queryData=a.queryData||{},this.queryEndpoint=a.queryEndpoint||"",this.bootstrapData=a.bootstrapData||{},this.bootstrapEndpoint=a.bootstrapEndpoint||"",this.globalKeywordsEndpoint=a.globalKeywordsEndpoint||"",this._indexedFields=a.indexedFields||["text","tokens"],this._titleFields=a.titleFields||[],this._alwaysPrefixMatch=a.alwaysPrefixMatch||!1,this._deduplicationKey=a.deduplicationKey||null,this._enabledLocalCache=a.enabledLocalCache!=null?a.enabledLocalCache:!0,this._enabledQueryCache=a.enabledQueryCache!=null?a.enabledQueryCache:!0,this._disableAllCaches=a.disableAllCaches!=null?a.disableAllCaches:!1,this._enabledMergeUids=a.enabledMergeUids!=null?a.enabledMergeUids:!1,this._queryExactMatch=a.queryExactMatch||!1,this._acrossTransitions=a.acrossTransitions||!1,this._minQueryLength=a.minQueryLength||-1,this._enforceNewRequestIDUponFetch=a.enforceNewRequestIDUponFetch||!1,this._minExactMatchLength=4,this._filters=[],this._headerflags=a.headerflags||new Map(),this.transport=null,this.setExclusions(a.exclusions),this.backendUnicodeMatch=new(b("SearchI18nMatch"))({prefix_kana_hiragana_to_katakana:!!a.kanaNormalization}),this.cacheUnicodeMatch=new(b("SearchI18nMatch"))({prefix_kana_hiragana_to_katakana:!!a.kanaNormalization})}a.prototype.init=function(){"use strict";this.init=b("emptyFunction"),this._fields=b("createObjectFrom")(this._indexedFields),this._activeQueries=0,this.dirty()};a.prototype.dirty=function(){"use strict";__p&&__p();this.value="";this._bootstrapped=!1;this._bootstrapping=!1;this._data=Object.create(null);this.localCache={};this.queryCache={};this.queryIDs={};this.inform("dirty",{});return this};a.prototype.bootstrap=function(a){a===void 0&&(a=!1);if(this._bootstrapped&&!a)return;this.bootstrapWithoutToken();this._bootstrapped=!0;this._bootstrapping=!0;this.inform("bootstrap",{bootstrapping:!0})};a.prototype.bootstrapWithoutToken=function(){"use strict";this.fetch(this.bootstrapEndpoint,this.bootstrapData,{bootstrap:!0,token:this.token})};a.prototype.bootstrapWithToken=function(){"use strict";var a=babelHelpers["extends"]({},this.bootstrapData);a.token=this.token;this.fetch(this.bootstrapEndpoint,a,{bootstrap:!0,replaceCache:!0,value:""})};a.prototype.query=function(a,b,c,d,e){"use strict";__p&&__p();this.inform("beforeQuery",babelHelpers["extends"]({value:a,local_only:b,exclusions:c,time_waited:d},e));d=Date.now();if(this._disableAllCaches){this.dirty();if(!a){this.bootstrap();return!0}}else this._enabledQueryCache||(this.queryCache={},this.queryIDs={});var f=this.buildUids(a,[],c),g=this.respond(a,f);this.value=a;this.inform("query",babelHelpers["extends"]({value:a,results:g},e));var h=this.tokenizeBackend(a).flatValue;if(b||!h||this._isQueryTooShort(h)||!this.queryEndpoint||Object.prototype.hasOwnProperty.call(this.getQueryCache(),h)||!this.shouldFetchMoreResults(g)){this.inform("logPerformanceTiming",babelHelpers["extends"]({field:"cache_keypress_render",value:Date.now()-d},e));this.inform("completeCacheFetch");return!1}this.inform("queryEndpoint",babelHelpers["extends"]({value:a},e));this.fetch(this.queryEndpoint,this.getQueryData(a,f),babelHelpers["extends"]({value:a,exclusions:c},e));return!0};a.prototype._isQueryTooShort=function(a){"use strict";return a.length<this._minQueryLength};a.prototype._tokenize=function(a,c){"use strict";return b("TokenizeUtil").parse(a,c)};a.prototype.tokenizeBackend=function(a,b){"use strict";a=this.backendUnicodeMatch.prefixMatchPrepare(a);return this._tokenize(a,b)};a.prototype.tokenizeCache=function(a,b){"use strict";a=this.cacheUnicodeMatch.prefixMatchPrepare(a);return this._tokenize(a,b)};a.prototype.shouldFetchMoreResults=function(a){"use strict";return a.length<this._maxResults};a.prototype.getQueryData=function(a,b){"use strict";a=babelHelpers["extends"]({value:a},this.queryData);b=b||[];b.length&&(a.existing_ids=b.join(","));this._bootstrapping&&(a.bsp=!0);return a};a.prototype.setQueryData=function(a,b){"use strict";b&&(this.queryData={});Object.assign(this.queryData,a);return this};a.prototype.setBootstrapData=function(a,b){"use strict";b&&(this.bootstrapData={});Object.assign(this.bootstrapData,a);return this};a.prototype.getExclusions=function(){"use strict";return b("createArrayFromMixed")(this._exclusions)};a.prototype.setExclusions=function(a){"use strict";this._exclusions=a?a.map(String):[]};a.prototype.addFilter=function(a){"use strict";var b=this._filters;b.push(a);return{remove:function(){b.splice(b.indexOf(a),1)}}};a.prototype.clearFilters=function(){"use strict";this._filters=[]};a.prototype.notify=function(a,b,c,d){"use strict";b=this.buildData(b);this.inform("notify",{value:a,results:b,isAsync:!!c,rootid:d});return b};a.prototype.respond=function(a,b,c){"use strict";b=this.buildData(b);this.processResults(a,b,c);this.inform("respond",{value:a,results:b,isAsync:!!c});return b};a.prototype.respondWithResults=function(a,b,c){"use strict";this.processResults(a,b,c);this.inform("respond",{value:a,results:b,isAsync:!!c});return b};a.prototype.processResults=function(a,b,c){"use strict";__p&&__p();if(this.bootstrapData.alwaysShowEcho){c=-1;for(var d=0;d<b.length;++d)if(b[d].text.toLowerCase()===a.toLowerCase()){c=d;break}d={};c===-1?(d={bootstrapped:!1,index:0,query:a,render_type:"hashtag",text:a,type:"hashtag",uid:this.getUniqueID()},b.map(function(a){a.index+=1}),b.unshift(d)):c>0&&(d=b.splice(c,1)[0],b.unshift(d),b.map(function(a,b){a.index=b}))}};a.prototype.getUniqueID=function(){"use strict";var a="_"+Math.random().toString(36).substr(2,9);while(this._data[a]!==undefined)a="_"+Math.random().toString(36).substr(2,9);return a};a.prototype.fetch=function(a,c,d){"use strict";__p&&__p();if(!a)return;(this._enforceNewRequestIDUponFetch||c.request_id===undefined)&&(c.request_id=this._guid(),d.request_id=c.request_id);c=new(b("AsyncRequest"))().setURI(a).setData(c).setMethod("GET").setReadOnly(!0).setAllowCrossPageTransition(this._acrossTransitions).setHandler(function(a){this.fetchHandler(a,d||{})}.bind(this));if(a===this.queryEndpoint){for(var e=this._headerflags,f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=e.length)break;h=e[g++]}else{g=e.next();if(g.done)break;h=g.value}h=h;var i=h[0];h=h[1];c.setRequestHeader(i,h)}c.setFinallyHandler(function(){this._activeQueries--,this._activeQueries||this.inform("activity",{activity:!1})}.bind(this))}c.setErrorHandler(function(a){return this.asyncErrorHandler(a,d)}.bind(this));this.inform("beforeFetch",{request:c,fetch_context:d});c.send();this.transport=c.transport;a===this.queryEndpoint&&(this._activeQueries||this.inform("activity",{activity:!0}),this._activeQueries++)};a.prototype.fetchHandler=function(a,b){"use strict";__p&&__p();var c=b.value,d=b.exclusions;a.getPayload().requestID!==undefined&&(b.request_id=a.getPayload().requestID);var e=this.getQueryIDs(),f=this.tokenizeBackend(c||"").flatValue;e[f]=b.request_id;!c&&b.replaceCache&&(this.localCache={});this.inform("buildQueryCache",{});e=a.getPayload().entries;this.addEntries(e,c);this.inform("fetchComplete",{entries:e,response:a,value:c,fetch_context:b});f=!c&&this.value?this.value:c;this.respond(f,this.buildUids(f,[],d),!0);c||(this._bootstrapping&&(this._bootstrapping=!1,this.inform("bootstrap",{bootstrapping:!1})),b.token&&a.getPayload().token!==b.token&&this.bootstrapWithToken())};a.prototype.addEntries=function(a,c){"use strict";__p&&__p();a=this.processEntries(b("createArrayFromMixed")(a||[]),c);var d=a;this._enabledMergeUids&&(d=this.buildUids(c,a));if(c){var e=this.getQueryCache();c=this.tokenizeBackend(c).flatValue;e[c]=d}else this.fillCache(d);return a};a.prototype.processEntries=function(a,b){"use strict";return a.map(function(a,c){var d=a.uid=a.uid+"",e=this.getEntry(d);!e?(e=a,e.query=b,e.bootstrapped=!b,this.setEntry(d,e)):Object.assign(e,a);this.processEntry(e,b);e.index===undefined&&(e.index=c);return d},this)};a.prototype.processEntry=function(a,b){"use strict"};a.prototype.getAllEntries=function(){"use strict";return this._data||{}};a.prototype.getEntry=function(a){"use strict";return this._data[a]||null};a.prototype.setEntry=function(a,b){"use strict";this._data[a]=b};a.prototype.fillCache=function(a){"use strict";__p&&__p();if(!this._enabledLocalCache)return;var b=this.localCache;a.forEach(function(a){var c=this.getEntry(a);if(!c)return;c=this.tokenizeCache(this.getTextToIndex(c)).tokens;for(var d=0,e=c.length;d<e;++d){var f=c[d];Object.prototype.hasOwnProperty.call(b,f)||(b[f]={});b[f][a]=!0}},this)};a.prototype.getTextToIndex=function(a){"use strict";if(a.textToIndex&&!a.needs_update)return a.textToIndex;a.needs_update=!1;a.textToIndex=this.getTextToIndexFromFields(a,this._indexedFields);return a.textToIndex};a.prototype.getTextToIndexFromFields=function(a,b){"use strict";var c=[];for(var d=0;d<b.length;++d){var e=a[b[d]];e&&c.push(e.join?e.join(" "):e)}return c.join(" ")};a.prototype.mergeUids=function(a,b,c,d){"use strict";this.inform("mergeUids",{local_uids:a,query_uids:b,new_uids:c,value:d});this._checkExtendedMatch(d,a);return this.deduplicateByKey(a.sort(this.bootstrapSort.bind(this)).concat(b,c))};a.prototype.bootstrapSort=function(a,b){"use strict";__p&&__p();a=this.getEntry(a);b=this.getEntry(b);if(a.extended_match!==b.extended_match)return a.extended_match?1:-1;if(a.index!==b.index)return a.index-b.index;if(a.text.length!==b.text.length)return a.text.length-b.text.length;return a.text===b.text?a.uid<b.uid?-1:1:a.text<b.text?-1:1};a.prototype._checkExtendedMatch=function(a,c){"use strict";var d=this._alwaysPrefixMatch?b("TokenizeUtil").isPrefixMatch:b("TokenizeUtil").isQueryMatch;for(var e=0;e<c.length;++e){var f=this.getEntry(c[e]);f.extended_match=f.tokens?!d(a,f.text):!1}};a.prototype.buildUids=function(a,c,d){"use strict";__p&&__p();c||(c=[]);if(!a)return c;d||(d=[]);var e=this.buildCacheResults(a,this.localCache),f=this.buildQueryResults(a);e=this.mergeUids(e,f,c,a);var g=b("createObjectFrom")(d.concat(this._exclusions));f=e.filter(function(b){if(Object.prototype.hasOwnProperty.call(g,b)||!this.getEntry(b))return!1;for(var c=0;c<this._filters.length;++c)if(!this._filters[c](this.getEntry(b),a))return!1;return g[b]=!0},this);return this.uidsIncludingExact(a,f)};a.prototype.uidsIncludingExact=function(a,c){"use strict";__p&&__p();var d=c.length;if(d<=this._maxResults||b("str2rstr")(a).length<this._minExactMatchLength)return c;for(var e=0;e<d;++e){var f=this.getEntry(c[e]);f.text_lower||(f.text_lower=f.text.toLowerCase());if(f.text_lower===this.tokenizeCache(a).flatValue){if(e>=this._maxResults){f=c.splice(e,1)[0];c.splice(this._maxResults-1,0,f)}break}}return c};a.prototype.buildData=function(a){"use strict";var b=[],c=Math.min(a.length,this._maxResults);for(var d=0;d<c;++d)b.push(this.getEntry(a[d]));return b};a.prototype.findBestPreviousQuery=function(a,b){"use strict";var c=0,d=null;if(this._queryExactMatch)return Object.prototype.hasOwnProperty.call(b,a)?a:null;for(var e in b)a.indexOf(e)===0&&e.length>c&&(c=e.length,d=e);return d};a.prototype.findQueryCache=function(a){"use strict";a=this.findBestPreviousQuery(a,this.getQueryCache());return this.getQueryCache()[a]||[]};a.prototype.buildQueryResults=function(a){"use strict";a=this.tokenizeBackend(a).flatValue;var b=this.findQueryCache(a);if(Object.prototype.hasOwnProperty.call(this.getQueryCache(),a))return b;a=this.filterQueryResults(a,b);return a};a.prototype.filterQueryResults=function(a,c){"use strict";var d=this._alwaysPrefixMatch?b("TokenizeUtil").isPrefixMatch:b("TokenizeUtil").isQueryMatch;return c.filter(function(b){return d(a,this.getTextToIndex(this.getEntry(b)))},this)};a.prototype.buildCacheResults=function(a,b){"use strict";__p&&__p();var c=this.tokenizeCache(a,this._alwaysPrefixMatch),d=this._alwaysPrefixMatch?c.sortedTokens:c.tokens,e=d.length;c=c.isPrefixQuery?e-1:null;var f={},g={},h={},i=[],j=!1,k={},l=0;for(var m=0;m<e;++m){var n=d[m];if(!Object.prototype.hasOwnProperty.call(k,n))l++,k[n]=!0;else continue;for(var o in b)if(!Object.prototype.hasOwnProperty.call(f,o)&&o===n||(this._alwaysPrefixMatch||c===m)&&this.cacheUnicodeMatch.prefixMatch(o,n)){o===n?(Object.prototype.hasOwnProperty.call(g,o)&&(j=!0),f[o]=!0):((Object.prototype.hasOwnProperty.call(f,o)||Object.prototype.hasOwnProperty.call(g,o))&&(j=!0),g[o]=!0);for(var p in b[o])(m===0||Object.prototype.hasOwnProperty.call(h,p)&&h[p]==l-1)&&(h[p]=l)}}for(var q in h)h[q]==l&&i.push(q);(j||l<e)&&(i=this.filterQueryResults(a,i));this._titleFields&&this._titleFields.length>0&&(i=this.filterNonTitleMatchQueryResults(a,i));return i};a.prototype.filterNonTitleMatchQueryResults=function(a,c){"use strict";return c.filter(function(c){var d=this.tokenizeCache(a),e=d.tokens.length;if(e===0)return!0;c=this.getTitleTerms(this.getEntry(c));d=d.tokens[0];return e===1||this._alwaysPrefixMatch?b("TokenizeUtil").isPrefixMatch(d,c)||this.cacheUnicodeMatch.prefixMatch(c,d):b("TokenizeUtil").isQueryMatch(d,c)},this)};a.prototype.getTitleTerms=function(a){"use strict";a.titleToIndex||(a.titleToIndex=this.getTextToIndexFromFields(a,this._titleFields));return a.titleToIndex};a.prototype.deduplicateByKey=function(a){"use strict";if(!this._deduplicationKey)return a;var c=b("createObjectFrom")(a.map(this._getDeduplicationKey.bind(this)),a);return a.filter(function(a){return c[this._getDeduplicationKey(a)]==a}.bind(this))};a.prototype._getDeduplicationKey=function(a){"use strict";var b=this.getEntry(a);if(b[this._deduplicationKey])return b[this._deduplicationKey]+"";else return"__"+a+"__"};a.prototype.getQueryCache=function(){"use strict";return this.queryCache};a.prototype.getQueryIDs=function(){"use strict";return this.queryIDs};a.prototype.setMaxResults=function(a){"use strict";this._maxResults=a,this.value&&this.respond(this.value,this.buildUids(this.value))};a.prototype.getMaxResults=function(){"use strict";return this._maxResults};a.prototype.updateToken=function(a){"use strict";this.token=a;this.dirty();return this};a.prototype.getResponseHeaderValue=function(a){"use strict";var b="";this.transport&&(b=this.transport.getResponseHeader(a),b||(b=""));return b};a.prototype._guid=function(){"use strict";var a=Date.now(),b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=Math.floor((a+Math.random()*16)%16);a=Math.floor(a/16);b=(b=="x"?c:c&7|8).toString(16);return b});return b};Object.assign(a.prototype,{events:["bootstrap","query","respond"],asyncErrorHandler:b("emptyFunction")});e.exports=a}),null);
__d("SearchBootstrapCache",["AsyncRequest","AsyncResponse","CacheStorage","SearchBootstrapCacheConstants"],(function(a,b,c,d,e,f){__p&&__p();var g=1;a={get:function(a,c,d,e,f){__p&&__p();var g=this.getKey(a,c,d),h=this.getStorage(),i=h.get(g);h=b("SearchBootstrapCacheConstants")[c.type]||36e5;if(i==null||Date.now()-i.timestamp>h)f(d,a,c);else{g=new(b("AsyncRequest"))();g.getData=function(){return i.requestData};h=new(b("AsyncResponse"))(g,i.payload);e(h,c)}},set:function(a,b,c){var d=a.getRequest().getData();this.getStorage().set(this.getKey(d,b,c),{timestamp:Date.now(),payload:a.payload,requestData:d})},getKey:function(a,b,c){return JSON.stringify({filter:a.filter,context:a.context,viewer:a.viewer,lazy:a.lazy,token:a.token,type:b.type,bootstrapEndpoint:c})},getStorage:function(){return new(b("CacheStorage"))("localstorage","_SearchBootstrapCache_"+g)}};e.exports=a}),null);
__d("SearchSingleState",["fbt"],(function(a,b,c,d,e,f,g){__p&&__p();function h(a,b,c,d){return{classNames:"grammar",groupIndex:0,indexInGroup:a,path:b,text:c,type:"grammar",uid:d}}a={getSuggestions:function(a,b,c){if(c==="ent:user")return this.getSuggestionsForUser(a,b);else if(c==="ent:page")return this.getSuggestionsForPage(a,b);else if(c==="ent:app")return this.getSuggestionsForApp(a,b);else if(c==="ent:group")return this.getSuggestionsForGroup(a,b)},getSuggestionsForUser:function(a,b){return[h(0,"/search/"+a+"/photos-of",g._("photos of {full name}",[g._param("full name",b)]),"photos_of_user"),h(1,"/search/"+a+"/friends",g._("friends of {full name}",[g._param("full name",b)]),"friends_of_user"),h(2,"/search/"+a+"/pages-liked",g._("favorite pages of {full name}",[g._param("full name",b)]),"pages_liked_user"),h(3,"/search/str/"+b+"/users-named",g._("find all people named \"{full name}\"",[g._param("full name",b)]),"people_named_text")]},getSuggestionsForPage:function(a,b){return[h(0,"/search/"+a+"/photos-of",g._("photos of {name of page}",[g._param("name of page",b)]),"photos_of_page"),h(1,"/search/"+a+"/likers",g._("people who like {name of page}",[g._param("name of page",b)]),"page_likers"),h(2,"/search/str/"+b+"/pages-named",g._("find all pages named \"{name of page}\"",[g._param("name of page",b)]),"pages_named_text")]},getSuggestionsForGroup:function(a,b){return[h(0,"/search/"+a+"/members",g._("{name of group} members",[g._param("name of group",b)]),"members_of_group"),h(1,"/search/"+a+"/photos-in",g._("photos in {name of groups}",[g._param("name of groups",b)]),"photos_in_group"),h(2,"/search/"+a+"/creators",g._("{name of group} creators",[g._param("name of group",b)]),"creators_of_group"),h(3,"/search/"+a+"/admins",g._("{name of group} administrators",[g._param("name of group",b)]),"admins_of_group")]},getSuggestionsForApp:function(a,b){return[h(0,"/search/"+a+"/apps-similar-to",g._("apps similar to {name of app}",[g._param("name of app",b)]),"similar_apps"),h(1,"/search/"+a+"/app-users",g._("people who use {name of app}",[g._param("name of app",b)]),"app_users"),h(2,"/search/str/"+b+"/pages-named",g._("find all apps named \"{name of page}\"",[g._param("name of page",b)]),"apps_named_text")]}};e.exports=a}),null);
__d("SearchDataSource",["Arbiter","AsyncResponse","CSRFGuard","CurrentUserInitialData","DataSource","Event","FacebarJSConstants","HashtagSearchResultUtils","PageTransitionsRegistrar","SearchBootstrapCache","SearchRegion","SearchSingleState","UnicodeCJK","XHRRequest","createArrayFromMixed","debounce"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=100,i="/typeahead/search/facebar/nullstate/";c=babelHelpers.inherits(a,b("DataSource"));g=c&&c.prototype;function a(a){__p&&__p();a.headerflags=new Map();(b("SearchRegion").sgp_fork_ss_at_proxygen||b("SearchRegion").sgp_fork_gs_at_proxygen)&&a.headerflags.set("X-FB-ForkingType","edge-sgp-search");g.constructor.call(this,a);this._updateMaxResults=function(){var a=window.innerHeight||document.documentElement.clientHeight;this.setMaxResults(Math.max(this._numResults.min,Math.min(this._numResults.max,Math.ceil(2+(a-370)/56))))}.bind(this);this._token=a.token||"";this._lazyonload=a.lazyonload!==!1;this._extraTypes=a.extraTypes;this._buckets=a.buckets;this._noMultiFetch=a.noMultiFetch||!1;this._nullStateConfig=a.nullStateConfig||{};var c=a.maxResults||8;this._numResults={min:3,max:c};this.recordingRoute=a.recordingRoute||"non_banzai";this._enabledHashtag=a.enabledHashtag||!1;this.logBackendQueriesWindow=a.logBackendQueriesWindow||25;this._genTime=a.genTime;this._bootstrapError=!1;this._hasKeywordBootstrap=a.hasKeywordBootstrap||!1;this._addJoinedTermsMatching=a.addJoinedTermsMatching||!1;this._useBootstrapCache=a.useBootstrapCache||!1;this._useBrowserCache=a.useBrowserCache||!1;this.cacheUnicodeMatch.setConfigs({prefix_hangul_conjoining_jamo:!0,prefix_kana_drop_trailing_latin:a.cjkDropLatinInCjTokens,prefix_kana_hiragana_to_katakana:a.cjkUiCacheHiraganaToKatakana,search_i18n_prefix_arabic_normalization:a.arabicNormalization});this.backendUnicodeMatch.setConfigs({prefix_kana_drop_trailing_latin:a.cjkDropLatinInCjTokens})}a.prototype.init=function(){__p&&__p();g.init.call(this);this._leanPayload=null;this._bootstrapRequestsPending=0;this._criticalOnly=!0;this._updateMaxResults();var a=b("debounce")(this._updateMaxResults,h,this,!0);b("Event").listen(window,"resize",a);this._nullStateConfig.prefetchNullState&&this.fetchNullState("");this._nullStateConfig.singleState&&b("Arbiter").subscribe("page_transition",this.handlePageTransition.bind(this));(this._nullStateConfig.prefetchNullState||this._nullStateConfig.singleState)&&b("Arbiter").subscribe("search/updateNullState",this.updateNullState.bind(this));this._nullStateConfig.recent&&b("Arbiter").subscribe("search/refreshRecentSearchesNullstate",this.refreshRecentSearches.bind(this))};a.prototype.refreshRecentSearches=function(){this.nullStateData=null};a.prototype.handlePageTransition=function(){this.nullStateParams={}};a.prototype.updateNullState=function(event,a){this.nullStateParams=a,this.fetchNullState()};a.prototype.markResultsAsNullState=function(a){__p&&__p();if(a)for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;d.isNullState=!0}};a.prototype.markResultsAsSingleState=function(a){__p&&__p();if(a)for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;d.isSingleState=!0}};a.prototype.fetchNullState=function(a){this.lastNullOrSingleStateFetchStartTime=Date.now();if(!this._nullStateConfig.hasNullState)return;var b=null;this.nullStateParams&&this.nullStateParams.uid?(this.nullStateParams.query=a||"",b=this._fetchDataForSingleState(),this.markResultsAsNullState(b)):(b=this._fetchDataForNullState(),this.markResultsAsSingleState(b));b&&this.inform("respond",{value:this.nullStateParams?this.nullStateParams.query:"",results:b,isAsync:!1,nullState:!0})};a.prototype._fetchDataForSingleState=function(){__p&&__p();if(this.nullStateDataWithProfile&&this.nullStateParams.uid===this.nullStateDataWithProfile.profileID)return this.nullStateDataWithProfile.data;if(this.nullStateParams.type==="ent:app"||this.nullStateParams.type==="ent:group"||this.nullStateParams.type==="ent:page"){this.fetch(i,{profile_id:this.nullStateParams.uid,ent_type:this.nullStateParams.type},{singleState:!0});this.nullStateDataWithProfile={profileID:this.nullStateParams.uid};return}var a=b("SearchSingleState").getSuggestions(this.nullStateParams.uid,this.nullStateParams.text,this.nullStateParams.type);if(!a)return this._fetchDataForNullState();this.nullStateDataWithProfile={data:a,profileID:this.nullStateParams.uid};return a};a.prototype._shouldRefreshNullState=function(){if(!this._nullStateConfig.recent)return!1;var a=window.location.href;if(!a)return!1;return a.contains("allactivity")&&a.contains("log_filter=search")?!0:!1};a.prototype._fetchDataForNullState=function(){if(this.nullStateData&&!this._shouldRefreshNullState()){this.markResultsAsNullState(this.nullStateData);setTimeout(function(){this.inform("respond",{value:"",results:this.nullStateData,isAsync:!0,nullState:!0})}.bind(this),0);return}this.fetchingNullState||(this.fetchingNullState=!0,this.fetch(i,{value:""},{nullState:!0,value:""}));return null};a.prototype.dirty=function(){g.dirty.call(this),this._bootstrapError=!1,this._fetchOnUseRequests=[]};a.prototype.asyncErrorHandler=function(a,b){b.nullState&&(this.fetchingNullState=!1),b.bootstrap&&(this._bootstrapError=!0),this.inform("fetchError",{response:a,fetch_context:b})};a.prototype.fetch=function(a,c,d){d=d||{};d.fetch_start=Date.now();var e=b("PageTransitionsRegistrar").getMostRecentURI().getPath();c=babelHelpers["extends"]({},c,{path:e});g.fetch.call(this,a,c,d)};a.prototype.xhrFetchHandler=function(a,c,d){a=b("CSRFGuard").clean(a);a=JSON.parse(a);return this.fetchHandler(new(b("AsyncResponse"))(null,a.payload),d,c)};a.prototype.fetchHandler=function(a,c,d){__p&&__p();d===void 0&&(d=null);if(c.nullState){this.fetchingNullState=!1;this.nullStateData=a.getPayload().entries;this.markResultsAsNullState(this.nullStateData);this.inform("respond",{value:"",results:this.nullStateData,isAsync:!0,nullState:!0});return}if(c.singleState){this.nullStateDataWithProfile.data=a.getPayload().entries;this.markResultsAsSingleState(this.nullStateDataWithProfile.data);this.inform("respond",{results:this.nullStateDataWithProfile.data,isAsync:!0,value:this.nullStateParams?this.nullStateParams.query:"",nullState:!0});return}var e=a.getPayload(),f=babelHelpers["extends"]({fetch_end:Date.now()},c),h=f.value?"event":"persistent";this.inform("beginFetchHandler",{response:a});c.bootstrap&&(this._bootstrapError=!1);var i=d===null?a.getRequest().uri.getPath():d.getURI().getPath();i===this.bootstrapEndpoint&&this._useBootstrapCache&&b("SearchBootstrapCache").set(a,c,this.bootstrapEndpoint);if(c.type=="lean")this._leanPayload=e,this._processLean();else{e.coeff2_ts&&(f.coeff2_ts=e.coeff2_ts);g.fetchHandler.call(this,a,c);i=d===null?a.getRequest().getData():d.getData();c.bootstrap&&!i.no_cache&&(f.browserCacheHit=e.timestamp<this._genTime);c.bootstrap&&!e.no_data&&this._bootstrapRequestsPending>0&&(c.bootstrap=!1,--this._bootstrapRequestsPending,this._bootstrapRequestsPending||this._bootstrapPostProcess());if(e.no_data||e.stale||e.token!==this._token){d=babelHelpers["extends"]({},i);d.lazy&&(delete d.lazy,d.token=this._token,this._fetchOnUse(d,c))}}this.inform("endpointStats",{info:f,response:a},h);c&&!!c.value&&this.inform("completeFetch",{response:a,stats:f});e=this.getResponseHeaderValue("X-FB-ForkingPoolID");e.length>0&&this.inform("logProxygenForkPoolId",{field:"fork_pool_id",value:e})};a.prototype.respond=function(a,b,c){this.inform("respondValidUids",b);this.inform("reorderResults",b);b=this.buildData(b,a);b.forEach(function(a,b){a.origIndex=b,a.fromCache=!c});this.inform("respond",{value:a,results:b,isAsync:!!c});return b};a.prototype.buildData=function(a,b){if(!a||a.length===0)return[];b=a.map(this.getEntry,this);b.length=Math.min(b.length,this._maxResults);return b};a.prototype.fetchLean=function(){this._fetchLean()};a.prototype._isQueryTooShort=function(a){return a.length<this._minQueryLength&&!this._performShortQuery&&!b("UnicodeCJK").hasIdeoOrSyll(a)};a.prototype.shouldFetchMoreResults=function(a){return a.length<this._maxResults};a.prototype._bootstrapPostProcess=function(){var a=0;for(var b in this._data)Object.prototype.hasOwnProperty.call(this._data,b)&&a++;this.inform("bootstrapped",{time:Date.now(),size:a},"persistent");this._processLean()};a.prototype._processLean=function(){if(this._leanPayload){var a,b=this._leanPayload.entries;for(var c in b)a=this.getEntry(c),a&&(a.index=b[c]);this.setExclusions(this._leanPayload.blocked);this._leanPayload=null}};a.prototype._bootstrapFetch=function(a,b){b=babelHelpers["extends"]({},b,this.bootstrapData);this._criticalOnly&&this._lazyonload&&(b.lazy=1);a={bootstrap:!0,type:a};this._fetchBootstrapMaybeCache(b,a);++this._bootstrapRequestsPending};a.prototype._fetchBootstrapMaybeCache=function(a,c){__p&&__p();if(this._useBootstrapCache)b("SearchBootstrapCache").get(a,c,this.bootstrapEndpoint,this.fetchHandler.bind(this),this.fetch.bind(this));else if(this._useBrowserCache){var d=new(b("XHRRequest"))(this.bootstrapEndpoint).setData(babelHelpers["extends"]({},a,{__user:b("CurrentUserInitialData").USER_ID,__a:1})).setMethod("GET").setResponseHandler(function(a){return this.xhrFetchHandler(a,d,c||{})}.bind(this)).setErrorHandler(function(a){return this.asyncErrorHandler(a,c)}.bind(this));this.inform("beforeFetch",{request:d,fetch_context:c});d.send()}else this.fetch(this.bootstrapEndpoint,a,c)};a.prototype._fetchOnUse=function(a,b){for(var c in this.bootstrapData)Object.prototype.hasOwnProperty.call(a,c)||(a[c]=this.bootstrapData[c]);this._criticalOnly?this._fetchOnUseRequests.push({args:a,ctx:b}):this._fetchBootstrapMaybeCache(a,b)};a.prototype._fetchLean=function(){var a={no_cache:1};a.options=b("createArrayFromMixed")(a.options);a.options.push("lean");this._fetchOnUse(a,{type:"lean"})};a.prototype.bootstrap=function(a){__p&&__p();a||(this._criticalOnly=!1,this._flushFetchOnUseRequests());if(this._bootstrapped)return;a={filter:["event"]};this._fetchOnUse(a,{type:"event"});a=["app","page","group","friendlist"];a=a.concat(this._extraTypes||[]);var c=[];this._hasKeywordBootstrap&&c.push(b("FacebarJSConstants").keywordType);if(this._noMultiFetch)a.push("user"),a=a.concat(c),this._bootstrapFetch("user",{filter:a});else{this._bootstrapFetch("other",{filter:a});if(this._buckets)for(var a=0;a<this._buckets.length;++a){var d={filter:["user"],buckets:this._buckets[a]};this._bootstrapFetch("user",d)}else this._bootstrapFetch("user",{filter:["user"]});c.length>0&&this._bootstrapFetch("keyword",{filter:c})}this._fetchLean();this._bootstrapped=!0};a.prototype.getBootstrapError=function(){return this._bootstrapError};a.prototype._flushFetchOnUseRequests=function(){var a=this._fetchOnUseRequests.length;for(var b=0;b<a;++b){var c=this._fetchOnUseRequests[b];this._fetchBootstrapMaybeCache(c.args,c.ctx)}a>0&&this.inform("extra_bootstrap",{time:Date.now()},"persistent");this._fetchOnUseRequests=[]};a.prototype.onLoad=function(a,b){this.inform("onload",{time:Date.now()},"persistent"),a&&setTimeout(this.bootstrap.bind(this,b),0)};a.prototype.mergeUids=function(a,b,c,d){__p&&__p();var e=this.getDynamicHashtagResult(d);d&&e&&b.indexOf(e)<=0&&b.unshift(e);e=c[0]?this.getEntry(c[0]):null;var f=b[0]?this.getEntry(b[0]):null;e=e&&e.replace_results?e:null;e=!e&&f&&f.replace_results?f:e;f=g.mergeUids.call(this,a,b,c,d);if(e){this.inform("backend_topreplace",{});return this.deduplicateByKey([e.uid].concat(f))}return f};a.prototype.getTextToIndexFromFields=function(a,b){var c=[],d=a.tokenVersion==="v2";for(var e=0;e<b.length;++e){if(d&&(b[e]==="text"||b[e]==="alias"))continue;var f=a[b[e]];f&&(f=f.join?f.join(" "):f,c.push(f),b[e]=="text"&&this._addJoinedTermsMatching&&(f=f.toLowerCase(),f=f.replace(/ /g,""),c.push(f)))}return c.join(" ")};a.prototype.getDynamicHashtagResult=function(a){if(!a||!this._enabledHashtag)return;var c=b("HashtagSearchResultUtils").getHashtagFromQuery(a);if(!c)return;var d="hashtag:"+c,e=this.getEntry(d);e||this.processEntries([b("HashtagSearchResultUtils").makeTypeaheadResult(c)],a);return d};a.prototype.tokenizeCache=function(a,b){a=this.cacheUnicodeMatch.prefixMatchPrepare(a);a=this._tokenize(a,b);b=a.tokens;b.length>0&&a.value.startsWith("@")&&(b[0]="@"+b[0]);return a};e.exports=a}),null);
__d("SearchPeopleFriendsOf",["fbt","TokenizeUtil","URI"],(function(a,b,c,d,e,f,g){__p&&__p();function a(a,b){"use strict";this.friendsOfUri=a,this.placementStrategy=b.placement_strategy,this.placementParams=b.placement_params,this.triggerStrategy=b.trigger_strategy,this.triggerParams=b.trigger_params}a.prototype.injectInto=function(a,b){"use strict";if(!a||a.length===0||!this.$1(a,b))return;if(a[0].type!=="user")return;b=this.createFindAllFriendsOf(a[0].text,a[0].uid);this.$2(b,a)};a.prototype.$2=function(a,b){"use strict";var c=this.$3(b);if(c==="last"){var d=b.filter(function(a){return a.type==="user"}).length;c=d}b.splice(c,0,a)};a.prototype.$1=function(a,b){"use strict";var c=this.$4(this.triggerStrategy);return c(a,this.triggerParams,b)};a.prototype.$3=function(a){"use strict";var b=this.$4(this.placementStrategy);return b(a,this.placementParams)};a.prototype.$4=function(a){"use strict";return this["$SearchPeopleFriendsOf_"+a]};a.prototype.$5=function(a,b,c){"use strict";return!1};a.prototype.$6=function(a,b,c){"use strict";return!0};a.prototype.$7=function(a,b,c){"use strict";__p&&__p();c=parseInt(b,10);b=0;for(var d=0;d<a.length;d++){var e=a[d];e.type==="user"&&e.index_rank==-1&&b++;if(b>c)return!1}return!0};a.prototype.$8=function(a,c,d){"use strict";__p&&__p();c=parseInt(c,10);d=b("TokenizeUtil").tokenize(d);d=d.map(function(a){return a.toLowerCase()});var e=0;for(var f=0;f<a.length;f++){var g=a[f];if(g.type!=="user"||g.index_rank!=-1)continue;g=b("TokenizeUtil").tokenize(g.text);g=g.map(function(a){return a.toLowerCase()});if(g.length<d.length)continue;var h=!0;for(var i=0;i<d.length-1;i++)if(d[i]!==g[i]){h=!1;break}i=d.length-1;if(h&&g[i].startsWith(d[i])){e++;if(e>=c)return!1}}return!0};a.prototype.$9=function(a,b){"use strict";return"last"};a.prototype.$10=function(a,b){"use strict";return 1};a.prototype.createFindAllFriendsOf=function(a,c){"use strict";a=g._("{name}'s Friends",[g._param("name",a)]);c=new(b("URI"))(this.friendsOfUri).addQueryData({q:"",init:"psm",fofid:c}).toString();return{uid:"people_search",type:"user",text:a,classNames:"seeAllUser",photo:"/images/search_typeahead/people_see_more.png",logType:"grammar",path:c}};e.exports=a}),null);
__d("SearchPeopleSeeMore",["fbt","invariant","TokenizeUtil","URI"],(function(a,b,c,d,e,f,g,h){__p&&__p();function a(a,b){var c=b.placement,d=b.strategy,e=b.min_users;b=b.query_to_show;this.seeMoreUri=a;this.placement=c;this.strategy=d;this.min_users=e;this.query_to_show=b}a.prototype.injectInto=function(a,b){"use strict";if(!a||a.length===0)return;b=this.$1(a,b);if(!b)return;b=this.createFindAllPeopleResult(b);this.$2(b,a)};a.prototype.$1=function(a,b){"use strict";__p&&__p();if(this.strategy==="disabled")return null;if(a[0].type!=="user")return null;a=a.filter(function(a){return a.type==="user"});if(a.length<this.min_users)return null;else a.length>this.min_users&&(a=a.slice(0,this.min_users));var c,d=a[0];switch(this.strategy){case"all_identical":var e=a.every(function(a){return this.$3(d.text,a.text)}.bind(this));c=e?d.text:null;break;case"top_results_prefix":c=a.reduce(function(a,b){return this.$4(a,b.text)}.bind(this),d.text);break;default:h(0,3956)}return!c?null:this.query_to_show==="common"?c:b};a.prototype.$2=function(a,b){"use strict";if(this.placement==="last"){var c=b.filter(function(a){return a.type==="user"}).length;b.splice(c,0,a)}else{c=parseInt(this.placement,10);b.splice(c,0,a)}};a.prototype.createFindAllPeopleResult=function(a){"use strict";var c=g._("Find all people named \"{query}\"",[g._param("query",a.toLowerCase())]);a=new(b("URI"))(this.seeMoreUri).addQueryData({q:a,init:"psm"}).toString();return{uid:"people_search",type:"user",text:c,classNames:"seeAllUser",photo:"/images/search_typeahead/people_see_more.png",path:a}};a.prototype.$3=function(a,c){"use strict";if(a===c)return!0;a=b("TokenizeUtil").tokenize(a);var d=b("TokenizeUtil").tokenize(c);return a.length!==d.length?!1:a.every(function(a,b){return a===d[b]})};a.prototype.$4=function(a,c){"use strict";__p&&__p();if(!a||!c)return;if(a===c)return a;a=b("TokenizeUtil").tokenize(a);c=b("TokenizeUtil").tokenize(c);var d=[];for(var e=0;e<a.length&&e<c.length;e++)if(a[e]===c[e])d.push(a[e]);else break;return d.length===0?null:d.join(" ")};e.exports=a}),null);
__d("SearchTypeaheadCore",["Arbiter","DOM","Event","Input","Keys","Parent","ScriptPath","TypeaheadCore"],(function(a,b,c,d,e,f){__p&&__p();var g,h;g=babelHelpers.inherits(a,b("TypeaheadCore"));h=g&&g.prototype;a.prototype.init=function(a,c,d){"use strict";__p&&__p();h.init.call(this,a,c,d);a=b("Parent").byTag(d,"form");var e=this.reset.bind(this);b("Arbiter").subscribe("pre_page_transition",function(event,a){var b=/^\/search/,c=b.test(a.from.path);b=b.test(a.to.path);c&&!b&&setTimeout(e,0)});if(a){var f=b("DOM").find(a,"input.search_sid_input");b("Event").listen(a,"submit",function(){this.data&&this.data.queryData&&(f.value=this.data.queryData.sid),setTimeout(e,0)}.bind(this),b("Event").Priority.URGENT)}};a.prototype.select=function(){"use strict";this.reset(),this.element.focus(),setTimeout(function(){this.element.blur()}.bind(this),0),b("ScriptPath").setClickPointInfo({click:"Search"})};a.prototype.handleTab=function(event){"use strict";var a=this.view.getQuerySuggestion(this.value);a?(b("Input").setValue(this.element,a),this.checkValue(),event.kill()):h.handleTab.call(this,event)};a.prototype.getSearchType=function(){"use strict";return"regular"};a.prototype.focus=function(){"use strict";h.focus.call(this),(this.getValue().length===0||this.element.getAttribute("singlestate")==="true")&&this.data.fetchNullState(this.getValue())};a.prototype.keyup=function(event){"use strict";if(this.getValue().length===0&&b("Event").getKeyCode(event)===b("Keys").ESC)return;this.getValue().length===0&&this.data.fetchNullState(this.getValue());this.element.setAttribute("singlestate",!1)};function a(){"use strict";g.apply(this,arguments)}e.exports=a}),null);
__d("BanzaiNectar",["Banzai"],(function(a,b,c,d,e,f){function a(a){return{log:function(c,d,e){d={e:d,a:e};b("Banzai").post("nectar:"+c,d,a)}}}c=a();c.create=a;e.exports=c}),null);
__d("SearchTypeaheadRecorder",["AsyncRequest","Banzai","BanzaiNectar","BanzaiScuba","CurrentUser","Event","FacebarGlobalOptions","Keys","TokenizeUtil","Vector","clickRefAction","ge","mapObject","throttle","whitelistObjectKeys"],(function(a,b,c,d,e,f){__p&&__p();var g={WAITING:"WAITING",SUCCESS:"SUCCESS",NO_RESULTS:"NO_RESULTS",ERROR:"ERROR"};function a(a){"use strict";this.init(a),this.initEvents(a)}a.prototype.init=function(a){"use strict";__p&&__p();this.core=a.getCore();this.data=a.getData();this.view=a.getView();this.element=this.core.getElement();this.initTime=Date.now();this._onloadTime=0;this._extraRecorder=[];this.performanceTimings={};this.allFromSingleState=!1;this.allFromNullState=!1;a=b("ge")("search_first_focus");this.initStartTime=a&&a.value;this.bootstrapStats={bootstrapped:0};this.type="legacy_search";this._reset()};a.prototype._reset=function(){"use strict";__p&&__p();this.stats={};this.avgStats={};this.appendStats={};this._backspacing=!1;this.backendQueries=[];this.backendQueriesStatus={};this._topreplace=!1;this._inflightRequests={};var a=Math.random().toString();this.data.setQueryData({sid:a});this.view.setSid(a);this.recordStat("sid",a);this.recordStat("keypressed",0)};a.prototype.initEvents=function(){"use strict";__p&&__p();this.core.subscribe("focus",function(event){if(!this.stats.session_start_time){this.recordStat("session_start_time",Date.now());var a=new Date();a=a.getTimezoneOffset();a=Date.now()-a*60*1e3;this.recordStat("session_start_time_user_timezone",a);this._lastRenderTime=0;this._firstKeypressTime=null}}.bind(this)),this.core.subscribe("blur",function(event){var a=Date.now();for(var b in this._inflightRequests){var c=this._inflightRequests[b];c=a-c;this.recordAvgStat("search_endpoint_ms_from_js",c)}this.recordStat("session_end_time",a);this.submit()}.bind(this)),this.view.subscribe("select",function(a,b){this.recordStat("time_between_select_and_last_render",Date.now()-this._lastRenderTime),this._firstKeypressTime!=null&&this.recordStat("keypress_to_select_time",Date.now()-this._firstKeypressTime),this.recordSelectInfo(b)}.bind(this)),this.view.subscribe("render",function(a,b){this._lastRenderTime=Date.now(),this.recordRender(b)}.bind(this)),this.data.subscribe("logPerformanceTiming",function(a,b){this.performanceTimings[b.field]=b.value}.bind(this)),this.data.subscribe("logProxygenForkPoolId",function(a,b){this.recordStat(b.field,b.value)}.bind(this)),this.data.subscribe("activity",function(a,b){this.recordStat("pending_request",b.activity)}.bind(this)),this.data.subscribe("respondValidUids",function(a,b){this.validUids=b.slice(0)}.bind(this)),this.data.subscribe("beforeQuery",function(a,b){__p&&__p();if(!b.value){this.query="";this.results=[];this.data.lastNullOrSingleStateFetchStartTime=Date.now();return}this.stats.first_query_time||this.recordStat("first_query_time",Date.now());this.query=b.value;this.queryStartTime||(this.queryStartTime=[]);this.queryStartTime[this.query]=Date.now();this.recordCountStat("num_queries")}.bind(this)),this.data.subscribe("queryEndpoint",function(a,b){this.recordCountStat("num_search_ajax_requests"),this.recordAvgStat("endpoint_query_length",b.value.length),this._inflightRequests[b.value]=Date.now()}.bind(this)),this.data.subscribe("onload",function(a,b){this._onloadTime=b.time}.bind(this)),this.data.subscribe("bootstrapped",function(a,b){this.bootstrapStats.endTime=b.time,this.bootstrapStats.bootstrapped=1}.bind(this)),this.core.subscribe("recordFunction",function(a,b){this._extraRecorder.push(b)}.bind(this)),this.data.subscribe("endpointStats",function(a,b){a=b.info;b=a.fetch_end-a.fetch_start;a.value?this.recordAvgStat("search_endpoint_ms_from_js",b):this.bootstrapStats[a.type]=b;a.coeff2_ts&&(this.bootstrapStats.coeff2_ts=a.coeff2_ts);typeof a.browserCacheHit!=="undefined"&&this.recordCountStat(a.browserCacheHit?"bootstrap_cachehits":"bootstrap_cachemisses");this._inflightRequests[a.value]&&delete this._inflightRequests[a.value]}.bind(this)),this.data.subscribe("fetchComplete",function(a,b){a=b.entries;b=b.value;b&&this.backendQueriesStatus[b]&&(this._addDurationForBackendQuery(this.backendQueriesStatus[b]),this.backendQueriesStatus[b].status=a&&a.length>0?g.SUCCESS:g.NO_RESULTS)}.bind(this)),this.data.subscribe("fetchError",function(a,b){a=b.fetch_context;b=a.value;if(a.bootstrap||!b)return;this.backendQueriesStatus[b]&&(this.backendQueriesStatus[b].status=g.ERROR,this._addDurationForBackendQuery(this.backendQueriesStatus[b]))}.bind(this)),this.data.subscribe("query",function(a,b){this.recordAvgStat("num_results_from_cache",b.results.length)}.bind(this)),this.data.subscribe("backend_topreplace",function(a,b){!1===this._topreplace&&(this.recordStat("backend_topreplace",1),this._topreplace=!0)}.bind(this)),this.data.subscribe("completeFetch",function(a,b){if(this.core.scubaInfo){a=b.response;b={recv:b.stats.fetch_end-b.stats.fetch_start,render:Date.now()-b.stats.fetch_start,payload_size:JSON.stringify(a).length};a.payload.entities||(a.payload.entities=this.buildResults());this.logToScuba(a,b,this.core.scubaInfo,this.query,this.type)}}.bind(this)),this.data.subscribe("completeCacheFetch",b("throttle")(function(a,b){this.core.scubaInfo&&this.logToScuba({},{},this.core.scubaInfo,this.query,this.type)}.bind(this),500)),b("Event").listen(this.element,"keydown",function(event){this.recordStat("keypressed",1),this.recordCountStat("count_keys_pressed"),b("Event").getKeyCode(event)==b("Keys").BACKSPACE?!this._backspacing&&this.query&&(this._backspacing=!0,this.recordAppendStat("before_backspace_queries",this.query)):this._backspacing=!1,this._firstKeypressTime==null&&(this._firstKeypressTime=Date.now())}.bind(this)),this.data.subscribe("beforeFetch",function(a,b){a=b.request.data?b.request.data.value:null;if(!a)return;this.backendQueries.push(a);this.backendQueriesStatus[a]={status:g.WAITING,start_time:Date.now()}}.bind(this))};a.prototype.recordStat=function(a,b){"use strict";this.stats[a]=b};a.prototype.recordCountStat=function(a){"use strict";var b=this.stats[a];this.stats[a]=b?b+1:1};a.prototype.recordAvgStat=function(a,b){"use strict";this.avgStats[a]?(this.avgStats[a][0]+=b,++this.avgStats[a][1]):this.avgStats[a]=[b,1]};a.prototype.recordAppendStat=function(a,b){"use strict";Object.prototype.hasOwnProperty.call(this.appendStats,a)||(this.appendStats[a]=[]),this.appendStats[a].push(b)};a.prototype.recordRender=function(a){"use strict";__p&&__p();this.results=a.filter(function(a){return a.uid!="search"&&a.type!="disabled_result"&&a.type!="header"}).map(function(a){return babelHelpers["extends"]({},a)});a=null;this.queryStartTime&&(a=this.queryStartTime[this.query]);var c=this.results.every(function(a){return a.fromCache||a.isSeeMore}),d=this.results.every(function(a){return a.isFromGSEF||a.fromCache||a.isSeeMore||a.isJSBootstrapMatch})&&this.results.some(function(a){return a.isFromGSEF}),e=this.results.every(function(a){return a.isGloballyCachedKeyword||a.fromCache||a.isSeeMore||a.isJSBootstrapMatch})&&this.results.some(function(a){return a.isGloballyCachedKeyword}),f=this.results.every(function(a){return a.isNullState}),g=this.results.every(function(a){return a.isSingleState}),h=this.results.every(function(a){return a.exactMatchKeyword||a.isSeeMore});this.allFromSingleState=g;this.allFromNullState=f;if(this.results.length&&this.data.lastNullOrSingleStateFetchStartTime&&f)this.recordStat("time_render_null_state",Date.now()-this.data.lastNullOrSingleStateFetchStartTime),this.data.lastNullOrSingleStateFetchStartTime=null;else if(this.data.lastNullOrSingleStateFetchStartTime&&this.results.length&&g)this.recordStat("time_render_single_state",Date.now()-this.data.lastNullOrSingleStateFetchStartTime);else if(a){f=Date.now()-a;h?this.recordAppendStat("times_render_gs_echo",f):this.recordAppendStat(c?"times_render_local":"times_render_remote",f);!c&&d&&this.recordAppendStat("time_render_gs_early_fetch",f);!c&&e&&this.recordAppendStat("time_render_globally_cached_keywords",f);!c&&!d&&!e&&this.recordAppendStat("time_render_remote_main_call",f)}this.data.lastNullOrSingleStateFetchStartTime=null;g=b("Vector").getViewportDimensions();this.recordStat("window_size_width",g.x);this.recordStat("window_size_height",g.y);this.results.length>0&&!this.stats.first_result_time&&this.recordStat("first_result_time",Date.now());a="typed";this.allFromNullState?a="nullstate":this.allFromSingleState&&(a="singlestate");this.recordStat("last_state",a)};a.prototype.recordSelectInfo=function(a){"use strict";__p&&__p();var c=a.selected,d=a.index;c.groupIndex!==undefined&&(d=a.index-c.groupIndex-1);var e={href:c.path},f=c.dataGT?{gt:JSON.parse(c.dataGT)}:{};b("clickRefAction")("click",e,null,null,f);if(c.uid=="search"||c.uid=="people_search")this.recordStat("selected_position",this.results!=null?this.results.length:0),this.recordStat("selected_search",1);else if(c.uid=="invite")this.recordStat("selected_invite",1);else{e=c.log_type||c.rankType||c.render_type||c.type;f=e=="friend"?"user":e;this.recordStat("selected_"+f,1);this.recordStat("selected_position",d);this.recordStat("selected_type",e);this.recordStat("selected_name_length",c.text.length);this.recordStat("selected_id",c.uid);this.recordStat("selected_degree",c.bootstrapped?1:2);this.recordStat("selected_recent_search",c.recent_search);f=b("TokenizeUtil").parse(this.data.getTextToIndex(c)).tokens;d=h(f,this.query);d&&this.recordStat("matched_terms",d);this.recordStat("selected_text",c.text)}var g={};this._extraRecorder.forEach(function(b){b(a,this.results,g)}.bind(this));this.recordStat("extra_select_info",JSON.stringify(g));this.recordStat("selected_with_mouse",a.clicked?1:0)};a.prototype._addDurationForBackendQuery=function(a){"use strict";a.start_time&&(a.duration=Date.now()-a.start_time,delete a.start_time)};a.prototype._dataToSubmit=function(){"use strict";__p&&__p();this.recordStat("candidate_results",this.buildResults());this.recordStat("query",this.query);this.recordStat("init_time",this.initTime);this.initStartTime&&(this.recordStat("init_start_time",this.initStartTime),this.recordStat("onload_time",this._onloadTime),this.initStartTime=0);this.recordStat("bootstrapped",this.bootstrapStats.bootstrapped);this.bootstrapStats.endTime&&(this.recordStat("bootstrapped_time",this.bootstrapStats.endTime),this.recordStat("user_bootstrap_ms",this.bootstrapStats.user),this.recordStat("other_bootstrap_ms",this.bootstrapStats.other),this.bootstrapStats.endTime=0);var a=this.data.getBootstrapError();a&&this.recordStat("bootstrap_error",1);this.recordStat("coeff2_ts",this.bootstrapStats.coeff2_ts);this.recordStat("max_results",this.data._maxResults);if(this.backendQueries.length>0){this.backendQueries.length>this.data.logBackendQueriesWindow&&(this.backendQueries=this.backendQueries.slice(this.backendQueries.length-this.data.logBackendQueriesWindow));this.recordStat("backend_queries",this.backendQueries);a=b("whitelistObjectKeys")(this.backendQueriesStatus,this.backendQueries);b("mapObject")(a,this._addDurationForBackendQuery,this);this.recordStat("backend_queries_status",a)}if(b("FacebarGlobalOptions").taSessionLoggingSample){var c=[];this.results.forEach(function(a){c.push([a.text||"",a.category||"",a.subtext||""])});this.recordStat("raw_suggestions_text",c)}a=this.stats;for(var d in this.avgStats){var e=this.avgStats[d];a[d]=e[0]/e[1]}for(var f in this.appendStats)a[f]=JSON.stringify(this.appendStats[f]);return a};a.prototype.buildResults=function(){"use strict";var a=(this.results||[]).map(function(a,c){var d=b("TokenizeUtil").parse(this.data.getTextToIndex(a)).tokens,e=a.rankType||a.render_type||a.type,f=a.log_type,g=a.bootstrapped?1:0,i=a.s_token||"",j=typeof a.index==="undefined"?100:a.index;d=h(d,this.query)||this.query;var k=a.index_rank,l=a.match_type,m=a.l_type,n=a.vertical_type,o=a.prefix_match,p=a.prefix_length,q=a.text,r=a.category,s=a.subtext,t=a.fromCache,u=a.isNullState,v=a.isSingleState,w=a.logInfo;return typeof a.groupIndex==="number"?[a.groupIndex,a.indexInGroup,a.uid,e,g,i,d,k,l,o,p,a.origIndex,m,n,q,r,s,j,t,u,v,w,f]:[0,c,a.uid,e,g,i,d,k,l,o,p,a.origIndex,m,n,q,r,s,j,t,u,v,w,f]}.bind(this));return JSON.stringify(a)};a.prototype.submit=function(){"use strict";var a=this._dataToSubmit();switch(this.data.recordingRoute){case"banzai_vital":b("Banzai").post(this._banzaiRoute,a,{delay:0,retry:!0});break;default:this.submitThroughAsyncRequest(a)}this._reset()};a.prototype.addLatencyToSample=function(a,b,c,d){"use strict";a.addInteger(d+"query_start",c.queryStart),a.addInteger(d+"query_end",c.queryEnd),a.addInteger(d+"keypress_query_end",c.keyPressToQueryEnd),a.addInteger(d+"render",c.render),a.addInteger(d+"keypress_render",c.keyPressToRender),b[d+"query_start"]=c.queryStart,b[d+"query_end"]=c.queryEnd,b[d+"keypress_query_end"]=c.keyPressToQueryEnd,b[d+"render"]=c.render,b[d+"keypress_render"]=c.keyPressToRender};a.prototype.logToScuba=function(a,c,d,e,f){"use strict";__p&&__p();var g={},h=new(b("BanzaiScuba"))("search_facebar_js",null,{addBrowserFields:!0,addPredictedGeographyFields:!0,addUser:!0,addSearchVersion:!0,addGatekeepers:{facebarGKs:!0}});h.addInteger("sample_rate",d.sample_rate);g.sample_rate=d.sample_rate;h.addNormal("site",d.site);g.site=d.site;h.addDenorm("query",e);g.query=e;d=a.payload||{};d.entities&&(h.addInteger("num_entities",d.entities.length),g.num_entities=d.entities.length);Object.keys(this.performanceTimings).forEach(function(a){h.addInteger(a,this.performanceTimings[a]),g[a]=this.performanceTimings[a]}.bind(this),this);if(d.results||d.entries){var i=(d.results||d.entries).length;h.addInteger("num_results",i);g.num_results=i}d.gzipped_payload_size!==undefined&&(h.addInteger("gzipped_payload_size",d.gzipped_payload_size),g.gzipped_payload_size=d.gzipped_payload_size);c.recv&&c.render>c.recv&&(h.addInteger("time_render",c.render-c.recv),g.time_render=c.render-c.recv,h.addInteger("time_js_async",c.recv),g.time_js_async=c.recv);c.payload_size&&(h.addInteger("payload_size",c.payload_size),g.payload_size=c.payload_size);this.stats.time_render_null_state&&(!e||e.length===0)&&(h.addInteger("time_render_null_state",this.stats.time_render_null_state),g.time_render_null_state=this.stats.time_render_null_state);h.addInteger("query_id",a.queryId);g.query_id=a.queryId;h.addDenorm("user_id",b("CurrentUser").getID());g.user_id=b("CurrentUser").getID();h.addDenorm("session_id",this.stats.sid);g.session_id=this.stats.sid;h.addNormal("typeahead_type",f);g.typeahead_type=f;c.remoteQueryLatencies&&(this.addLatencyToSample(h,g,c.remoteQueryLatencies,"remote_"),h.addInteger("remote_keypress_query_dispatch",c.remoteQueryLatencies.keyPressToQueryDispatch),g.remote_keypress_query_dispatch=c.remoteQueryLatencies.keyPressToQueryDispatch,h.addInteger("remote_keypress_query_start",c.remoteQueryLatencies.keyPressToQueryStart),g.remote_keypress_query_start=c.remoteQueryLatencies.keyPressToQueryStart,h.addNormal("inflight_requests",c.remoteQueryLatencies.inflightRequests),h.addInteger("inflight_requests",c.remoteQueryLatencies.inflightRequests),g.inflight_requests=c.remoteQueryLatencies.inflightRequests,h.addNormal("waiting_queries",c.remoteQueryLatencies.waitingQueries),h.addInteger("waiting_queries",c.remoteQueryLatencies.waitingQueries),g.waiting_queries=c.remoteQueryLatencies.waitingQueries);c.cacheQueryLatencies&&this.addLatencyToSample(h,g,c.cacheQueryLatencies,"cache_");h.post();b("BanzaiNectar").log("search_facebar_js","typeahead",g)};a.prototype.submitThroughAsyncRequest=function(a){"use strict";Object.keys(a).length>0&&new(b("AsyncRequest"))().setURI(this._endPoint).setMethod("POST").setData({stats:a}).setOption("handleErrorAfterUnload",!0).setErrorHandler(function(c){a.retry=!0,new(b("AsyncRequest"))().setURI(this._endPoint).setMethod("POST").setData({stats:a}).setOption("asynchronous_DEPRECATED",!1).send()}.bind(this)).send()};var h=function(a,c){__p&&__p();if(!a||!c)return;c=b("TokenizeUtil").parse(c);if(c.flatValue[c.flatValue.length-1]===" ")return c.flatValue;var d=c.tokens[c.tokens.length-1],e={};a.forEach(function(a){e[a]=(e[a]||0)+1});var f={};c=c.tokens.slice(0,c.tokens.length-1);c.forEach(function(a){f[a]=(f[a]||0)+1});for(var g=0;g<a.length;++g){var h=a[g];if(h.indexOf(d)===0&&e[h]-(f[h]||0)>0){c.push(h);return c.join(" ")}}return undefined};Object.assign(a.prototype,{_endPoint:"/ajax/typeahead/record_metrics.php",_banzaiRoute:"search"});e.exports=a}),null);
__d("SearchTypeaheadView",["csx","cx","fbt","Arbiter","ContextualLayerUpdateOnScroll","ContextualTypeaheadView","DOM","FbtResultBase","SearchPeopleFriendsOf","SearchPeopleFriendsOfOptions","SearchPeopleSeeMore","SearchPeopleSeeMoreOptions","URI","goURI","isEmail"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j;c=babelHelpers.inherits(a,b("ContextualTypeaheadView"));j=c&&c.prototype;function a(a,c){"use strict";j.constructor.call(this,a,c),this._peopleSeeMore=new(b("SearchPeopleSeeMore"))(this.getSeeMoreEndpoint("",!0),b("SearchPeopleSeeMoreOptions")),this._peopleFriendsOf=new(b("SearchPeopleFriendsOf"))(this.getSeeMoreEndpoint("",!0),b("SearchPeopleFriendsOfOptions"))}a.prototype.initializeLayer=function(){"use strict";j.initializeLayer.call(this),this.layer.setOffsetY(-1),this.layer.enableBehavior(b("ContextualLayerUpdateOnScroll"))};a.prototype.ignoreClick=function(event){"use strict";event.prevent()};a.prototype.render=function(a,b,c){"use strict";if(!b)return;this._bucketize&&(b=k(b));this.showPeopleSeeMore&&a&&this._peopleSeeMore.injectInto(b,a);this.showPeopleFriendsOf&&a&&this._peopleFriendsOf.injectInto(b,a);b={results:b,value:a};this.inform("finalResultsReordering",b);return j.render.call(this,a,b.results,c)};a.prototype.disableBucketization=function(){"use strict";this._bucketize=!1};a.prototype.buildBuckets=function(a,c){"use strict";__p&&__p();var d=c.length,e=0,f;for(f=0;f<d;++f)c[f].type=="user"&&e++;this._redirectToUsersResultsPage=this.showFilterResults&&e===d;this.setWebSuggLoggingParams(a,c);!a&&this.showFindPeople&&c.unshift(this.buildFindPeople());this._bucketize&&(c=j.buildBuckets.call(this,a,c));a&&this._shouldShowSeeMore&&(c.push(this.buildSeeMore(a,d)),b("isEmail")(a)&&e<1&&c.push(this.buildInvite(a)));return c};a.prototype.buildFindPeople=function(){"use strict";var a=i._("Find people");return{classNames:"seeAllUser seeAllUserNullState",logType:"grammar",path:this.getSeeMoreEndpoint(null,!0),photo:"/images/search_typeahead/people_see_more.png",text:a,type:"no_header"}};a.prototype.buildSeeMore=function(a,c){"use strict";c=this.getSeeMoreText(a,c);var d="seeMoreV2",e="calltoactionV2",f=b("DOM").create("span",{className:"simpleSearchSeeMoreRowRedesignIcon"});e=b("DOM").create("li",{className:e},[f,b("DOM").create("a",{href:this.getSeeMoreEndpoint(a),rel:"ignore"},[b("DOM").create("span",{className:"text"},[b("DOM").create("span",{className:d},c)])])]);c instanceof b("FbtResultBase")?e.setAttribute("aria-label",c.flattenToArray()):e.setAttribute("aria-label",c);return{uid:"search",node:e,search:!0}};a.prototype.getSeeMoreText=function(a,c){"use strict";if(this.showKeywordResultsPage)return i._("Search for {query}",[i._param("query",a)]);if(c<=0)return i._("See results for {query}",[i._param("query",a)]);if(this._redirectToUsersResultsPage)return i._("Filter results for {query}",[i._param("query",a)]);c=b("DOM").create("b",{},a);return i._("Find more results for {query}",[i._param("query",c)])};a.prototype.getSeeMoreSubtext=function(a){"use strict";if(a===0)return i._("No results to display");return a===1?i._("Displaying top result"):i._({"*":"Displaying top {number} results"},[i._param("number",a,[0])])};a.prototype.buildInvite=function(a){"use strict";var c=i._("Invite {query} to Facebook",[i._param("query",a)]);a=b("DOM").create("li",{className:"calltoaction"},[b("DOM").create("a",{href:this.getInviteEndpoint(a),rel:"ignore"},[b("DOM").create("span",{className:"text"},[b("DOM").create("span",{className:"invite"},[c])])])]);c instanceof b("FbtResultBase")?a.setAttribute("arial-label",c.flattenToArray()):a.setAttribute("aria-label",c);return{uid:"invite",node:a,search:!0}};a.prototype.searchPageQueryData=function(a){"use strict";return babelHelpers["extends"]({q:a},this.queryData||{})};a.prototype.searchPageTypeData=function(a){"use strict";return this._redirectToUsersResultsPage||a?{type:"users"}:{}};a.prototype.select=function(a){"use strict";var c=this.index,d=this.results[c];if(!d||d.type=="header")return;d=this.items[c];c=b("DOM").scry(d,"a")[0];j.select.call(this,a);c&&c.href&&(c.target=="_blank"?window.open(c.href):b("goURI")(c.href))};a.prototype.setSid=function(a){"use strict";this.queryData.tas=a};a.prototype.getSeeMoreEndpoint=function(a,c){"use strict";return new(b("URI"))(this.seeMoreEndpoint).addQueryData(this.searchPageQueryData(a)).addQueryData(this.searchPageTypeData(c)).toString()};a.prototype.getInviteEndpoint=function(a){"use strict";return new(b("URI"))("/invite.php").addQueryData({email_list:a})};a.prototype.show=function(){"use strict";this.isVisible()||(b("Arbiter").inform("layer_shown",{type:"SearchTypeahead"}),this.searchBtns=this.searchBtns||b("DOM").scry(this.typeahead,"button.reDesignedBtn"),this.searchBtns[0]&&CSS.addClass(this.searchBtns[0],"btnSelected"),j.show.call(this))};a.prototype.hide=function(){"use strict";this.isVisible()&&(b("Arbiter").inform("layer_hidden",{type:"SearchTypeahead"}),this.searchBtns=this.searchBtns||b("DOM").scry(this.typeahead,"button.reDesignedBtn"),this.searchBtns[0]&&CSS.matchesSelector(this.searchBtns[0],".btnSelected")&&CSS.removeClass(this.searchBtns[0],"btnSelected"),j.hide.call(this))};a.prototype.getQuerySuggestion=function(a){"use strict";var b=this.results[this.index];b=b&&b.type!="header"?b.text.toLowerCase():"";return b==a.toLowerCase()?"":b};a.prototype.setWebSuggLoggingParams=function(a,b){"use strict";__p&&__p();var c=0,d=0;for(var e=0;e<b.length;e++)if(b[e].type==="websuggestion"){d===0&&(d=e+1);var f="FR"+(e-c)+"AS"+c,g=e+1;b[e].path+="&wssk="+f+"&wssp="+g+"&wspq="+encodeURIComponent(a);b[e].path+="&wssrc="+b[e].websuggestion_source;c++}f="&wssc="+b.length+"-"+a.length+"&wsbp="+c+"-"+d;for(e=0;e<b.length;e++)b[e].type==="websuggestion"&&(b[e].path+=f)};function k(a){var b,c,d,e,f=[],g={};c=a.length;for(b=0;b<c;b++)d=a[b],e=d.render_type||d.type,Object.prototype.hasOwnProperty.call(g,e)||(g[e]=f.length,f.push([])),f[g[e]].push(d);a=[];c=f.length;for(b=0;b<c;++b)d=f[b][0],e=d.render_type||d.type,a=a.concat(f[b]);return a}Object.assign(a.prototype,{_shouldShowSeeMore:!0,_bucketize:!0,queryData:{init:"quick"}});e.exports=a}),null);
__d("SimpleSearchNavigation",["Arbiter","DOMQuery","Input","QueryHistory","URI"],(function(a,b,c,d,e,f){__p&&__p();var g=null,h=null;a={registerInput:function(a,c){h=b("DOMQuery").scry(a,"input")[0],g&&this._updateTitle(g,c),b("Arbiter").subscribe("page_transition",function(a,c){this._updateTitle(b("QueryHistory").get(c.uri))}.bind(this))},_updateTitle:function(a,c){h&&(b("Input").setValue(h,a||""),h.setAttribute("singlestate",a&&c),h.blur())},setPageTitle:function(a,c){b("QueryHistory").set(b("URI").getNextURI(),a);h?this._updateTitle(a,c):g=a;c={};b("Arbiter").inform("search/updateNullState",c,"state")},setPageQuery:function(a){b("Arbiter").inform("search/updateNullState",a,"state")}};e.exports=a}),null);
__d("XSearchFacebarSurveyController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/search/facebar_survey/",{id:{type:"String",required:!0},query:{type:"String"},session_id:{type:"String",required:!0},on_session_start:{type:"Exists",defaultValue:!1},result_selected:{type:"Exists",defaultValue:!1}})}),null);
__d("AbandonedSessionSurvey",["AsyncRequest","SubscriptionsHandler","XSearchFacebarSurveyController","getOrCreateDOMID"],(function(a,b,c,d,e,f){__p&&__p();function a(a){"use strict";this.tryToSubmitSurvey=function(){this.searchBoxFocused&&(this.openSurvey(),this.resultSelected=!1,this.searchBoxFocused=!1)}.bind(this),this.core=a.getCore(),this.data=a.getData(),this.view=a.getView(),this.subscriptionsHandler=new(b("SubscriptionsHandler"))()}a.prototype.enable=function(){"use strict";this.subscriptionsHandler.addSubscriptions(this.core.subscribe("focus",function(){this.searchBoxFocused=!0,this.resultSelected=!1}.bind(this)),this.data.subscribe("beforeQuery",function(a,b){this.query=b.value||""}.bind(this)),this.view.subscribe("select",function(){this.resultSelected=!0,this.tryToSubmitSurvey()}.bind(this)),this.core.subscribe("blur",this.tryToSubmitSurvey))};a.prototype.disable=function(){"use strict";this.subscriptionsHandler.release(),this.request&&this.request.abort()};a.prototype.openSurvey=function(){"use strict";__p&&__p();if(this.openedSurvey)return;this.openedSurvey=!0;var a=this.core.element;a==null&&(a=this.core.getElement());var c=this.normalizeValue(this.query);a=b("XSearchFacebarSurveyController").getURIBuilder().setString("id",b("getOrCreateDOMID")(a)).setString("query",c!=null?c:"").setString("session_id",this.data.queryData.sid).setExists("result_selected",this.resultSelected);this.request=new(b("AsyncRequest"))().setMethod("POST").setAllowCrossPageTransition(!0).setURI(a.getURI());this.request.send()};a.prototype.normalizeValue=function(a){"use strict";return String(a).trim().replace(/\s+/g," ").replace(/[\u200E|\u200F|\u202a|\u202b|\u202c]/g,"").toLowerCase()};e.exports=a}),null);
__d("TypeaheadSearchFilter",["Arbiter"],(function(a,b,c,d,e,f){__p&&__p();function a(a){"use strict";this._typeahead=a}a.prototype.enable=function(){"use strict";var a=this._typeahead,c=a.getView().seeMoreEndpoint;this._subscriptions=[b("Arbiter").subscribe("search/typeahead/updateFilter",function(b,c){c.filter_type=="web"&&(a.getView().queryData.form="FBKBFR"),a.getView().queryData.type=c.filter_type}),b("Arbiter").subscribe("search/typeahead/updateSeeMoreEndpoint",function(b,c){a.getView().seeMoreEndpoint=c}),b("Arbiter").subscribe("page_transition",function(b,d){a.getView().queryData.form&&delete a.getView().queryData.form,delete a.getView().queryData.type,a.getView().seeMoreEndpoint=c},"new")]};a.prototype.disable=function(){"use strict";this._subscriptions.forEach(function(a){a.unsubscribe()}),this._subscriptions=null};Object.assign(a.prototype,{_subscription:null});e.exports=a}),null);
__d("legacy:SearchFilterTypeaheadBehavior",["TypeaheadSearchFilter"],(function(a,b,c,d,e,f){a.TypeaheadBehaviors||(a.TypeaheadBehaviors={}),a.TypeaheadBehaviors.initFilters=function(a){a.enableBehavior(b("TypeaheadSearchFilter"))}}),3);
__d("TypeaheadSearchRecorderBasic",["SearchTypeaheadRecorder","emptyFunction"],(function(a,b,c,d,e,f){function a(a){"use strict";this._typeahead=a}a.prototype.enable=function(){"use strict";new(b("SearchTypeaheadRecorder"))(this._typeahead)};Object.assign(a.prototype,{disable:b("emptyFunction")});e.exports=a}),null);
__d("legacy:SearchRecorderBasicTypeaheadBehavior",["TypeaheadSearchRecorderBasic"],(function(a,b,c,d,e,f){a.TypeaheadBehaviors||(a.TypeaheadBehaviors={}),a.TypeaheadBehaviors.searchRecorderBasic=function(a){a.enableBehavior(b("TypeaheadSearchRecorderBasic"))}}),3);
__d("SessionStartSurvey",["AsyncRequest","SubscriptionsHandler","XSearchFacebarSurveyController","getOrCreateDOMID"],(function(a,b,c,d,e,f){__p&&__p();function a(a){"use strict";this.core=a.getCore(),this.data=a.getData(),this.subscriptionsHandler=new(b("SubscriptionsHandler"))()}a.prototype.enable=function(){"use strict";this.subscriptionsHandler.addSubscriptions(this.data.subscribe("query",function(){this.openSurvey()}.bind(this)))};a.prototype.disable=function(){"use strict";this.subscriptionsHandler.release(),this.request&&this.request.abort()};a.prototype.openSurvey=function(){"use strict";if(this.openedSurvey)return;this.openedSurvey=!0;var a=b("XSearchFacebarSurveyController").getURIBuilder().setString("id",b("getOrCreateDOMID")(this.core.element)).setExists("on_session_start",!0).setString("session_id",this.data.queryData.sid);this.request=new(b("AsyncRequest"))().setMethod("POST").setURI(a.getURI());this.request.send()};e.exports=a}),null);
__d("TypeaheadDetectQueryLocale",[],(function(a,b,c,d,e,f){__p&&__p();function a(a){"use strict";this._typeahead=a,this._data=a.getData(),this._queryCache={"":this._data.queryCache,ja_JP:{},zh_TW:{}}}a.prototype.enable=function(){"use strict";__p&&__p();this._previousLocale="",this._reset=this._typeahead.subscribe("reset",this._swapQueryCache.bind(this,"")),this._beforeQuery=this._data.subscribe("beforeQuery",function(a,b){a=b.value;if(a===""){this._swapQueryCache("");return}b=null;a=a.charCodeAt(a.length-1);12352<=a&&a<=12543?b="ja_JP":12544<=a&&a<=12735&&(b="zh_TW");this._swapQueryCache(b)}.bind(this))};a.prototype.disable=function(){"use strict";this._swapQueryCache(""),this._data.unsubscribe(this._beforeQuery),this._typeahead.ubsubscribe(this._reset)};a.prototype._swapQueryCache=function(a){"use strict";if(a===null||a===this._previousLocale)return;this._data.queryCache=this._queryCache[a];this._data.setQueryData({query_locale:a});this._previousLocale=a};e.exports=a}),null);
__d("TypeaheadExcludeBootstrapFromQueryCache",[],(function(a,b,c,d,e,f){__p&&__p();function a(a){"use strict";this._data=a.getData()}a.prototype.enable=function(){"use strict";this._buildingQueryCache=!1,this._buildQueryCache=this._data.subscribe("buildQueryCache",function(){this._buildingQueryCache=!0}.bind(this)),this._mergeUids=this._data.subscribe("mergeUids",function(a,b){this._buildingQueryCache&&b.local_uids.splice(0,b.local_uids.length)}.bind(this)),this._fetchComplete=this._data.subscribe("fetchComplete",function(){this._buildingQueryCache=!1}.bind(this))};a.prototype.disable=function(){"use strict";this._data.unsubscribe(this._buildQueryCache),this._data.unsubscribe(this._mergeUids),this._data.unsubscribe(this._fetchComplete)};e.exports=a}),null);
__d("TypeaheadRecentSearchUpdater",["Arbiter"],(function(a,b,c,d,e,f){__p&&__p();function a(a){"use strict";this.view=a.getView()}a.prototype.enable=function(){"use strict";this.updaterSubscription=this.view.subscribe("select",function(){b("Arbiter").inform("search/refreshRecentSearchesNullstate",{},"state")})};a.prototype.disable=function(){"use strict";this.view.unsubscribe(this.updaterSubscription)};e.exports=a}),null);
__d("TypeaheadShowLoadingIndicator",["CSS"],(function(a,b,c,d,e,f){__p&&__p();function a(a){"use strict";this._typeahead=a}a.prototype.enable=function(){"use strict";this._subscription=this._typeahead.subscribe("loading",function(a,c){b("CSS").conditionClass(this._typeahead.getElement(),"typeaheadLoading",c.loading),b("CSS").conditionClass(this._typeahead.getView().getElement(),"typeaheadViewLoading",c.loading)}.bind(this))};a.prototype.disable=function(){"use strict";this._typeahead.unsubscribe(this._subscription),this._subscription=null};Object.assign(a.prototype,{_subscription:null});e.exports=a}),null);
__d("legacy:ShowLoadingIndicatorTypeaheadBehavior",["TypeaheadShowLoadingIndicator"],(function(a,b,c,d,e,f){a.TypeaheadBehaviors||(a.TypeaheadBehaviors={}),a.TypeaheadBehaviors.showLoadingIndicator=function(a){a.enableBehavior(b("TypeaheadShowLoadingIndicator"))}}),3);
__d("SearchTypeaheadRenderer",["fbt","BadgeHelper","DOM","Locale","TokenizeUtil","TypeaheadFacepile","UnicodeBidi","URI","WWWBase"],(function(a,b,c,d,e,f,g){__p&&__p();var h=!1;function i(a,c){__p&&__p();c=[];var d=a.photos||a.photo;d&&(d instanceof Array?d=b("TypeaheadFacepile").render(d):d=b("DOM").create("img",{alt:"",src:d}),c.push(d));if(a.text){d=a.alias;var e=this.value,f=a.text,j=b("UnicodeBidi").isDirectionRTL(f.toString()),k=b("Locale").isRTL();j=j&&!k?"rtl":!j&&k?"ltr":"";k=[f];d&&b("TokenizeUtil").isQueryMatch(e,d)&&!b("TokenizeUtil").isQueryMatch(e,f)&&k.push(b("DOM").create("span",{className:"alias"},[" \xb7 "+d]));a.is_verified&&k.push(b("BadgeHelper").renderBadge("xsmall","verified"));if(a.badge){k.push(b("DOM").create("span",{className:""}," \xb7 "));e=[a.badge];k.push(b("DOM").create("span",{className:"unSeenPosts"},e))}c.push(b("DOM").create("span",{className:"text",dir:j},k))}if(a.category){f=[a.category];a.is_external&&f.push(b("DOM").create("span",{className:"arrow"}));d=a.message?"preCategory":"category";c.push(b("DOM").create("span",{className:d},f))}a.message&&c.push(b("DOM").create("span",{className:"category"},[a.message]));e=a.subtextOverride||a.subtext;if(e){j=[e];c.push(b("DOM").create("span",{className:"subtext"},j))}k=a.classNames||a.type||"";d=a.is_external?"_blank":"";f=!a.song&&a.path||"";f&&(/^https?\:\/\//.test(f)||(f=b("WWWBase").uri+f.substr(1)),f+=(f.indexOf("?")>0?"&":"?")+"ref=ts&fref=ts");e=b("DOM").create("a",{href:f,rel:"ignore",target:d},c);j=null;if(a.type==="header"){f=null;d=null;a.uid==="recent"?(d=new(b("URI"))("/profile.php"),d.setQueryData({sk:"allactivity",log_filter:"search"}),f=g._("EDIT")):a.uid==="pymk"&&(d=new(b("URI"))("/find-friends/browser/"),f=g._("SEE ALL"));d&&(j=b("DOM").create("a",{href:d,className:"typeaheadHeaderRightLink"},f),e.setAttribute("class","typeaheadHeaderLeftLink"),k+=" typeaheadHeader")}c=b("DOM").create("li",{className:k},[e,j]);a.text&&(c.setAttribute("title",a.text),c.setAttribute("aria-label",a.text));this.showupadatedsuggestions&&!h&&(i.className+=" updatedSuggestionRows",h=!0);return c}i.className="search";e.exports=i}),null);
__d("legacy:SearchTypeaheadRenderer",["SearchTypeaheadRenderer"],(function(a,b,c,d,e,f){a.TypeaheadRenderers||(a.TypeaheadRenderers={}),a.TypeaheadRenderers.search=b("SearchTypeaheadRenderer")}),3);