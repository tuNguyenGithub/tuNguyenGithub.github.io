if (self.CavalryLogger) { CavalryLogger.start_js(["bE3NI"]); }

__d("VideoViewFraudDetectorWhiteOps",["FBSiteWhiteOps"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){a.setDetectionID(c),d&&a.addListener("videoView/runFraudDetector",function(){b("FBSiteWhiteOps").appendToWindow(c,"FACEBOOK_VIDEO_VIEW",null)})}e.exports=a}),null);
__d("RTISubscriptionData",["ChannelConstants","areEqual"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ChannelConstants").SUBSCRIPTION_STATE;function a(a,b,c,d,e,f,h){this.$1=a,this.$2=b,this.$7=!0,this.$8=!1,this.$9=g.SUBSCRIBE,this.$10=null,this.$11=Date.now(),this.$3=d,this.$4=e?e:null,this.$5=f?f:null,this.$6=h?h:null,this.$12=c}a.prototype.matchesContext=function(a){return b("areEqual")(this.$3,a)};a.prototype.getCreatedTime=function(){return this.$11};a.prototype.getTopic=function(){return this.$1};a.prototype.getViewId=function(){return this.$12};a.prototype.getSubscribeCallback=function(){return this.$4};a.prototype.setSubscribeCallback=function(a){this.$4=a};a.prototype.getUnsubscribeCallback=function(){return this.$6};a.prototype.setUnsubscribeCallback=function(a){this.$6=a};a.prototype.getUnsubscribeHook=function(){return this.$5};a.prototype.setUnsubscribeHook=function(a){this.$5=a};a.prototype.getMessageListener=function(){return this.$2};a.prototype.setMessageListener=function(a){this.$2=a};a.prototype.getArbiterToken=function(){return this.$10};a.prototype.setArbiterToken=function(a){this.$10=a};a.prototype.isAlive=function(){return this.$9!=g.UNSUBSCRIBE};a.prototype.isMutatingContext=function(){return this.$9==g.MUTATE_CONTEXT};a.prototype.isDirty=function(){return this.$7};a.prototype.setDirty=function(a){this.$7=a};a.prototype.getState=function(){return this.$9};a.prototype.setState=function(a){this.$9=a};a.prototype.getContext=function(){return this.$3};a.prototype.isSent=function(){return this.$8};a.prototype.setSent=function(a){this.$8=a};a.prototype.prepareMutateContext=function(a){this.setState(g.MUTATE_CONTEXT),this.setDirty(!0),this.setSent(!1),this.$3=a};a.prototype.prepareUnsubscribe=function(){this.setState(g.UNSUBSCRIBE),this.setDirty(!0),this.setSent(!1),this.$2=null};e.exports=a}),null);
__d("SkywalkerUtils",["CurrentLocale","RTISubscriptionManagerConfig"],(function(a,b,c,d,e,f){__p&&__p();a={patchContext:function(a){a=a||{};a.locale=b("CurrentLocale").get();if(b("RTISubscriptionManagerConfig").assimilator){var c=b("RTISubscriptionManagerConfig").assimilator;c.tierType!=null&&(a.tierType=c.tierType);c.sandboxIP!=null&&c.sandboxPort!=null&&c.sandboxHostname!=null&&(a.sandboxIP=c.sandboxIP,a.sandboxPort=c.sandboxPort,a.sandboxHostname=c.sandboxHostname)}return a}};e.exports=a}),null);
__d("RTISubscriptionStore",["Arbiter","BanzaiODS","ChannelConstants","ErrorUtils","RTISubscriptionData","SkywalkerUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ChannelConstants").SUBSCRIPTION_STATE;function a(){this.$1={},this.$2=1}a.prototype.subscribe=function(a,c,d,e,f,h){__p&&__p();d=b("SkywalkerUtils").patchContext(d||{});var i=this.$3(a,d);if(i){var j=i.getState()==g.UNSUBSCRIBE&&i.isDirty()&&!i.isSent();i.isAlive()?b("BanzaiODS").bumpEntityKey("RTISubscriptionStore","duplicate_subscription_alive"):j?b("BanzaiODS").bumpEntityKey("RTISubscriptionStore","duplicate_subscription_unflushed_unsubscribe"):b("BanzaiODS").bumpEntityKey("RTISubscriptionStore","duplicate_subscription_unknown");if(i.isAlive()||j){i.setMessageListener(c);i.setSubscribeCallback(e);i.setUnsubscribeHook(f);i.setUnsubscribeCallback(h);if(j){i.setDirty(!1);i.setSent(!0);i.setState(g.SUBSCRIBE);j=b("ChannelConstants").getRTISkywalkerArbiterType(i.getTopic(),i.getViewId());i.setArbiterToken(this.$4(j,i.getTopic(),i))}return i}}j=this.$2;this.$2+=1;i=new(b("RTISubscriptionData"))(a,c,j,d,e,f,h);c=b("ChannelConstants").getRTISkywalkerArbiterType(a,j);i.setArbiterToken(this.$4(c,a,i));a in this.$1||(this.$1[a]=new Set());this.$1[a].add(i);return i};a.prototype.unsubscribe=function(a){if(!this.isSubscribed(a))return;a.prepareUnsubscribe();var c=a.getArbiterToken();c&&(b("Arbiter").unsubscribe(c),a.setArbiterToken(null))};a.prototype.mutateContext=function(a,b){if(!this.isSubscribed(a))return;a.prepareMutateContext(b)};a.prototype.isSubscribed=function(a){return a.getTopic()in this.$1&&this.$1[a.getTopic()].has(a)&&a.isAlive()};a.prototype.clearSubscriptions=function(){this.$1={}};a.prototype.deleteSubscriptions=function(a){var b=[];this.forEachSubscription(function(c){a.call(this,c)&&b.push(c)}.bind(this));b.forEach(function(a){if(a.getTopic()in this.$1){var b=this.$1[a.getTopic()];b["delete"](a)}}.bind(this))};a.prototype.forEachSubscription=function(a){__p&&__p();for(var b in this.$1){var c=this.$1[b];for(var c=c,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;if(a.call(this,f))return}}};a.prototype.$3=function(a,b){__p&&__p();a=this.$1[a];if(!a)return null;for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;if(e.matchesContext(b))return e}return null};a.prototype.$4=function(a,c,d){return b("Arbiter").subscribe(a,function(a,event){b("BanzaiODS").bumpEntityKey("RTISubscriptionStore","skywalker_subscription_delivery"),event.obj.forEach(function(a){a={topic:c,payload:a};var e=d.getMessageListener();e&&b("ErrorUtils").applyWithGuard(e,this,[a])}.bind(this))}.bind(this))};e.exports=a}),null);
__d("StreamStateMachineConstants",[],(function(a,b,c,d,e,f){"use strict";a={states:{GQLS_STATE_CREATED:"created",GQLS_STATE_ACTIVE:"active",GQLS_STATE_PAUSED:"paused",GQLS_STATE_TERMINATED:"terminated"},events:{GQLS_STATE_TRANSIT_ON_CREATE:"onCreated",GQLS_STATE_TRANSIT_ON_ACTIVE:"onActive",GQLS_STATE_TRANSIT_ON_PAUSE:"onPause",GQLS_STATE_TRANSIT_ON_RESUME:"onResume",GQLS_STATE_TRANSIT_ON_TERMINATE:"onTerminate"}};e.exports=a}),null);
__d("StreamStateMachine",["StreamStateMachineConstants"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("StreamStateMachineConstants").events,h=b("StreamStateMachineConstants").states,i=babelHelpers["extends"]({},g,{GQLS_STATE_TRANSIT_ON_REFRESH:"onRefresh"});function a(a,b){a===void 0&&(a=!1),b===void 0&&(b=1e4),this.$1=b,this.$2=null,this.$3=null,this.$5=a,this.$4=null}a.prototype.start=function(){this.$6(i.GQLS_STATE_TRANSIT_ON_CREATE),this.$5||this.$6(i.GQLS_STATE_TRANSIT_ON_ACTIVE)};a.prototype.ping=function(){switch(this.$4){case h.GQLS_STATE_ACTIVE:this.$6(i.GQLS_STATE_TRANSIT_ON_REFRESH);break;case h.GQLS_STATE_PAUSED:this.$6(i.GQLS_STATE_TRANSIT_ON_RESUME);break;case h.GQLS_STATE_CREATED:this.$6(i.GQLS_STATE_TRANSIT_ON_ACTIVE);break;case h.GQLS_STATE_TERMINATED:break}};a.prototype.kill=function(){this.$6(i.GQLS_STATE_TRANSIT_ON_TERMINATE)};a.prototype.setLifecycleHandler=function(a){this.$3=a};a.prototype.getState=function(){return this.$4};a.prototype.$6=function(event){__p&&__p();switch(event){case i.GQLS_STATE_TRANSIT_ON_CREATE:this.$7();break;case i.GQLS_STATE_TRANSIT_ON_ACTIVE:this.$8();break;case i.GQLS_STATE_TRANSIT_ON_REFRESH:this.$9();break;case i.GQLS_STATE_TRANSIT_ON_PAUSE:this.$10();break;case i.GQLS_STATE_TRANSIT_ON_RESUME:this.$11();break;case i.GQLS_STATE_TRANSIT_ON_TERMINATE:this.$12();break}};a.prototype.$7=function(){this.$4=h.GQLS_STATE_CREATED,this.$3&&this.$3(g.GQLS_STATE_TRANSIT_ON_CREATE)};a.prototype.$8=function(){this.$4=h.GQLS_STATE_ACTIVE,this.$3&&this.$3(g.GQLS_STATE_TRANSIT_ON_ACTIVE),this.$13()};a.prototype.$9=function(){clearTimeout(this.$2),this.$13()};a.prototype.$10=function(){this.$4=h.GQLS_STATE_PAUSED,this.$3&&this.$3(g.GQLS_STATE_TRANSIT_ON_PAUSE)};a.prototype.$11=function(){this.$4=h.GQLS_STATE_ACTIVE,this.$3&&this.$3(g.GQLS_STATE_TRANSIT_ON_RESUME),this.$13()};a.prototype.$12=function(){clearTimeout(this.$2),this.$4=h.GQLS_STATE_TERMINATED};a.prototype.$13=function(){this.$5&&(this.$2=setTimeout(function(){this.$6(g.GQLS_STATE_TRANSIT_ON_PAUSE)}.bind(this),this.$1))};e.exports=a}),null);
__d("RTISubscriptionToken",["StreamStateMachine","gkx"],(function(a,b,c,d,e,f){__p&&__p();function a(a,c,d,e,f){"use strict";__p&&__p();this.$1=a;this.$2=c;this.$4=d;this.$5=e;this.$3=f;this.$6=null;if(b("gkx")("676931")){a=this.getContext();c=this.hasHeartbeatOption(a);this.$7=new(b("StreamStateMachine"))(c);this.$7.start()}}a.prototype.setFriendFanoutToken=function(a){"use strict";this.$6=a};a.prototype.getFriendFanoutToken=function(){"use strict";return this.$6};a.prototype.getSubscriptionData=function(){"use strict";return this.$1};a.prototype.isSubscribed=function(){"use strict";return this.$3(this.$1)};a.prototype.getContext=function(){"use strict";return this.$1.getContext()};a.prototype.mutateContext=function(a){"use strict";this.$4(this.$1,a)};a.prototype.unsubscribe=function(){"use strict";var a=this.$1.getUnsubscribeHook();a&&a();this.$2(this.$1);this.$6&&this.$6.unsubscribe();b("gkx")("676931")&&(this.$7&&this.$7.kill())};a.prototype.fastUnsubscribe=function(){"use strict";this.unsubscribe(),this.$5()};a.prototype.hasHeartbeatOption=function(a){"use strict";__p&&__p();if(a&&a.transformContext){a=JSON.parse(a.transformContext);if(a.serializedQueryParameters){a=JSON.parse(a.serializedQueryParameters);if(a&&a["%options"]&&a["%options"].heartbeat)return!0}}return!1};a.prototype.ping=function(){"use strict";b("gkx")("676931")&&(this.$7&&this.$7.ping())};a.prototype.handleLifecycles=function(a){"use strict";b("gkx")("676931")&&(this.$7&&this.$7.setLifecycleHandler(a))};e.exports=a}),null);
__d("SkywalkerWebClientTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:SkywalkerWebClientLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:SkywalkerWebClientLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:SkywalkerWebClientLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setClientSessionUuid=function(a){this.$1.client_session_uuid=a;return this};a.prototype.setClientTime=function(a){this.$1.client_time=a;return this};a.prototype.setEventName=function(a){this.$1.event_name=a;return this};a.prototype.setGateway=function(a){this.$1.gateway=a;return this};a.prototype.setMessage=function(a){this.$1.message=a;return this};a.prototype.setTime=function(a){this.$1.time=a;return this};a.prototype.setTopic=function(a){this.$1.topic=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.setWeight=function(a){this.$1.weight=a;return this};c={client_session_uuid:!0,client_time:!0,event_name:!0,gateway:!0,message:!0,time:!0,topic:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("SkywalkerLogger",["BanzaiODS","FBLogger","LogHistory","SkywalkerWebClientTypedLogger","nullthrows","uuid"],(function(a,b,c,d,e,f){__p&&__p();var g="skywalker_web_client",h=b("LogHistory").getInstance(g);function a(a){a===void 0&&(a={}),this.$1=a,this.$1.client_session_uuid==null&&(this.$1.client_session_uuid=b("uuid")())}a.prototype.log=function(a){"use strict";a=this.$2(a);var event=b("nullthrows")(a.event_name);h.log(event,a);this.$3(a)};a.prototype.warn=function(a){"use strict";a=this.$2(a);var event=b("nullthrows")(a.event_name);h.warn(event,a);b("FBLogger")(g).warn(event);this.$3(a)};a.prototype.error=function(a){"use strict";a=this.$2(a);var event=b("nullthrows")(a.event_name);h.error(event,a);b("FBLogger")(g).mustfix(event);this.$3(a)};a.prototype.bump=function(a){"use strict";b("BanzaiODS").bumpEntityKey(g,a)};a.prototype.$2=function(a){"use strict";a=babelHelpers["extends"]({},this.$1,a);a.client_time==null&&(a.client_time=Date.now());return a};a.prototype.$3=function(a){"use strict";var c=new(b("SkywalkerWebClientTypedLogger"))();c.updateData(a);c.log()};e.exports=a}),null);
__d("SkywalkerOracle",["gkx"],(function(a,b,c,d,e,f){"use strict";f.OracleGK=b("gkx")("678786")}),null);
__d("SystemEvents",["ArbiterMixin","Cookie","ErrorGuard","ErrorUtils","SystemEventsInitialData","TimeSlice","UserActivity","UserAgent_DEPRECATED","gkx","mixin","setIntervalAcrossTransitions","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=1e3;c=babelHelpers.inherits(a,b("mixin")(b("ArbiterMixin")));g=c&&c.prototype;function a(){g.constructor.call(this),this.$SystemEvents12=function(){var a=this.$SystemEvents7();this.$SystemEvents2!=a&&(this.$SystemEvents2=a,this.inform(this.USER,a));this.$SystemEvents13()}.bind(this),this.USER="SystemEvents/USER",this.ONLINE="SystemEvents/ONLINE",this.TIME_TRAVEL="SystemEvents/TIME_TRAVEL",this.$SystemEvents1=b("SystemEventsInitialData").ORIGINAL_USER_ID,this.$SystemEvents2=this.$SystemEvents1,this.$SystemEvents3=navigator.onLine,this.$SystemEvents4=Date.now(),this.$SystemEvents6()}a.prototype.isPageOwner=function(a){return(a||this.$SystemEvents7())==this.$SystemEvents1};a.prototype.isOnline=function(){return!!(b("UserAgent_DEPRECATED").chrome()||this.$SystemEvents3)};a.prototype.checkTimeTravel=function(){var a=Date.now(),b=a-this.$SystemEvents4;this.$SystemEvents4=a;(b<0||b>1e4)&&this.inform(this.TIME_TRAVEL,b)};a.prototype.$SystemEvents6=function(){this.$SystemEvents8(),this.$SystemEvents9(),this.$SystemEvents10(),this.$SystemEvents11()};a.prototype.$SystemEvents8=function(){var a=b("TimeSlice").guard(function(){this.$SystemEvents3||(this.$SystemEvents3=!0,this.inform(this.ONLINE,this.$SystemEvents3))}.bind(this),"SystemEvents onOnline"),c=b("TimeSlice").guard(function(){this.$SystemEvents3&&(this.$SystemEvents3=!1,this.inform(this.ONLINE,this.$SystemEvents3))}.bind(this),"SystemEvents onOffline");b("UserAgent_DEPRECATED").ie()?b("UserAgent_DEPRECATED").ie()>=11?(window.addEventListener("online",a,!1),window.addEventListener("offline",c,!1)):b("UserAgent_DEPRECATED").ie()>=8?window.attachEvent("onload",function(){document.body.ononline=a,document.body.onoffline=c}):b("setIntervalAcrossTransitions")(function(){(navigator.onLine?a:c)()},h):window.addEventListener&&(window.addEventListener("online",a,!1),window.addEventListener("offline",c,!1))};a.prototype.$SystemEvents13=function(){clearTimeout(this.$SystemEvents5),this.$SystemEvents5=b("setTimeoutAcrossTransitions")(this.$SystemEvents12,h)};a.prototype.$SystemEvents9=function(){if(self!==top&&b("gkx")("678677"))return;b("gkx")("678678")&&b("UserActivity").subscribe(function(){this.$SystemEvents13()}.bind(this));this.$SystemEvents13()};a.prototype.$SystemEvents10=function(){b("setIntervalAcrossTransitions")(this.checkTimeTravel.bind(this),h)};a.prototype.$SystemEvents11=function(){b("setIntervalAcrossTransitions")(function(){window.onerror!=b("ErrorUtils").onerror&&window.onerror!=b("ErrorGuard").onerror&&(window.onerror=b("ErrorUtils").onerror)},h)};a.prototype.$SystemEvents7=function(){return b("Cookie").get("c_user")||"0"};e.exports=new a()}),3);
__d("RTISubscriptionManager",["Arbiter","BanzaiODS","Bootloader","ChannelConstants","CurrentUser","ErrorUtils","RTIFriendFanoutConfig","RTISubscriptionManagerConfig","RTISubscriptionStore","RTISubscriptionToken","Run","SkywalkerLogger","SkywalkerOracle","SystemEvents","gkx","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("SkywalkerOracle").OracleGK,h=b("ChannelConstants").SUBSCRIPTION_STATE;function a(){__p&&__p();this.PULL_HINT_DELAY_MILLIS=1e4,this.$1=new(b("RTISubscriptionStore"))(),this.$2=new(b("SkywalkerLogger"))({gateway:"chatproxy"}),this.$3=!1,this.$4=!1,this.$5=!1,this.$6=!1,this.$7=!1,this.$8=!0,this.$9=0,this.$10=document.readyState==="complete",b("Run").onAfterLoad(function(){this.$10=!0,this.flush()}.bind(this)),this.$11=null,b("Arbiter").subscribe(b("ChannelConstants").ON_ENTER_STATE,function(a,c){if(!this.$11)return;a=/pull/.test(c.state);!this.$3&&a?(this.$4=!0,this.$5||(this.$5=!0,b("setTimeoutAcrossTransitions")(function(){this.$3=this.$4,this.$5=!1,this.$3&&this.flush()}.bind(this),this.PULL_HINT_DELAY_MILLIS))):!a?(this.$4=!1,this.$3=!1):a&&(this.$3=!0,this.flush())}.bind(this)),b("SystemEvents").subscribe(b("SystemEvents").ONLINE,function(a,b){b||(this.$3=!1,this.$4=!1)}.bind(this)),b("SystemEvents").subscribe(b("SystemEvents").USER,function(a,b){this.$3=!1,this.$4=!1,this.$1.clearSubscriptions()}.bind(this)),b("Arbiter").subscribe(b("ChannelConstants").RTI_SESSION,function(a,b){!this.$11&&b&&this.deleteSubscriptions(function(a){return a.getState()===h.UNSUBSCRIBE}),this.$11=b,this.$11&&(this.$3=!0,this.flush())}.bind(this)),b("Arbiter").subscribe(b("ChannelConstants").ON_INVALID_HISTORY,function(){this.$3=!0,this.forEachSubscription(function(a){return a.setDirty(!0)}),this.getCurrentSession()}.bind(this)),this.getCurrentSession(),b("Arbiter").subscribe(b("ChannelConstants").SKYWALKER,function(a,c){i("skywalker_delivery");a=c.obj.topic;var d=c.obj.view_id,e={};a!=null?this.$2.log({event_name:"payload_received",topic:a}):this.$2.error({event_name:"payload_parse_error",message:"Missing Skywalker topic field in payload"});c.obj.payloads===undefined?e.obj=[c.obj.payload]:e.obj=c.obj.payloads;c=b("ChannelConstants").getRTISkywalkerArbiterType(a,d);b("Arbiter").inform(c,e)}.bind(this)),this.$12()}a.prototype.subscribe=function(a,c,d,e,f,g){__p&&__p();this.$2.log({event_name:"subscribe_attempt",topic:a});i("subscribe_attempt");e=this.$1.subscribe(a,function(a){b("gkx")("676931")?(this.isHeartbeat(a.payload)||c(a),h.ping()):c(a)}.bind(this),d,e,f,g);var h=this.$13(e);f=a.substr(0,a.lastIndexOf("/"));if(b("RTIFriendFanoutConfig").passFriendFanoutSubscribeGK&&b("RTIFriendFanoutConfig").topicPrefixes.indexOf(f)>=0){g=a+"_user_id_"+b("CurrentUser").getID();this.$2.log({event_name:"subscribe_attempt",me_topic:g});i("subscribe_attempt");f=this.$1.subscribe(g,c,d);a=this.$13(f);h.setFriendFanoutToken(a)}e.isDirty()&&this.flush();return h};a.prototype.mutateContext=function(a,b){var c=a.getTopic();this.$2.log({event_name:"mutate_context_attempt",topic:c});i("mutate_context_attempt");this.$1.isSubscribed(a)&&(this.$1.mutateContext(a,b),this.flush())};a.prototype.isHeartbeat=function(a){try{a=JSON.parse(a);if(a.heartbeat)return!0}catch(a){}return!1};a.prototype.unsubscribe=function(a){var b=a.getTopic();this.$2.log({event_name:"unsubscribe_attempt",topic:b});i("unsubscribe_attempt");this.$1.unsubscribe(a)};a.prototype.unsubscribeAll=function(a){if(!this.isReady()||this.$11==null)return;var b=this.$11;i("unsubscribe_all");var c={reset:"t"};a=a!=null?a:function(a){};b.issueRequest("/sub",c,{},a)};a.prototype.activePing=function(){if(!this.isReady()||this.$11==null)return;var a={state:"active"};this.$11.issueRequest("/active_ping",a,{},function(a){})};a.prototype.flush=function(){__p&&__p();if(!this.isReady()||this.$11==null||this.$6){this.$7=!0;this.$11==null&&this.getCurrentSession();return}var a=this.$11;this.$6=!0;this.$7=!1;var c=this.getMaxConsecutiveFlushFailures();if(this.$9>=c){i("reset_state");this.$9=0;this.$1.clearSubscriptions();this.unsubscribeAll(function(){this.$6=!1}.bind(this));return}var d=[],e={};c=!0;var f=0,g=function(a){__p&&__p();if(f>=this.getMaxFlushBatchSize()){this.$7=!0;return!0}if(a.isDirty()){a.getState()===h.MUTATE_CONTEXT&&(c=!1);var b="subscriptions",g=e[b];g||(g=[],e[b]=g);d.push(a);a.setDirty(!1);a.setSent(!1);b={topic:a.getTopic(),state:a.getState(),context:a.getContext(),viewId:a.getViewId()};f+=1;g.push(b)}else c=!1;return!1}.bind(this);this.forEachSubscription(g);if(c&&e.subscriptions&&e.subscriptions.length>0){g=[];for(var k=0;k<e.subscriptions.length;k++)e.subscriptions[k].state===h.SUBSCRIBE&&g.push(e.subscriptions[k]);e.subscriptions=g;this.$8=!0}k=function(a){__p&&__p();var c=a.data!=null;this.$9=c?0:this.$9+1;this.$8&&c&&(this.$8=!1);for(var e=0;e<d.length;e++){var f=d[e];f.isDirty()||(f.setSent(c),f.setDirty(!c));var g=f.getTopic(),k=c?"success":"failure";k=j(f)+"_"+k;!c&&a.error!=null?this.$2.warn({event_name:k,topic:g,message:a.error}):this.$2.log({event_name:k,topic:g});i(k);if(f.getState()===h.SUBSCRIBE){g=f.getSubscribeCallback();g&&b("ErrorUtils").applyWithGuard(g,this,[a])}else if(f.getState()===h.MUTATE_CONTEXT)c&&f.setState(h.SUBSCRIBE);else if(f.getState()===h.UNSUBSCRIBE){k=f.getUnsubscribeCallback();k&&b("ErrorUtils").applyWithGuard(k,this,[a])}}this.deleteSubscriptions(function(a){return a.getState()===h.UNSUBSCRIBE&&a.isSent()&&!a.isDirty()});this.$6=!1;this.$7&&(i("repeated_flush"),this.$7=!1,this.flush())}.bind(this);if(Object.keys(e).length<=0){this.$6=!1;return}g={};this.$8&&(g.reset="t");a.issueRequest("/sub",g,e,k)};a.prototype.deleteSubscriptions=function(a){this.$1.deleteSubscriptions(a)};a.prototype.forEachSubscription=function(a){this.$1.forEachSubscription(a)};a.prototype.isFlushInProgress=function(){return this.$6};a.prototype.getSubscriptions=function(){var a=[];this.forEachSubscription(function(b){return a.push(b)});return a};a.prototype.isSubscribed=function(a){return this.$1.isSubscribed(a)};a.prototype.isReady=function(){return this.$11!=null&&this.$3&&this.$10};a.prototype.getCurrentSession=function(){b("Arbiter").inform(b("ChannelConstants").GET_RTI_SESSION_REQUEST)};a.prototype.getMaxConsecutiveFlushFailures=function(){return b("RTISubscriptionManagerConfig").config&&Object.prototype.hasOwnProperty.call(b("RTISubscriptionManagerConfig").config,"max_consecutive_flush_failures")?Number(b("RTISubscriptionManagerConfig").config.max_consecutive_flush_failures):b("ChannelConstants").DEFAULT_MAX_CONSECUTIVE_FLUSH_FAILURES};a.prototype.getMaxFlushBatchSize=function(){return b("RTISubscriptionManagerConfig").config&&Object.prototype.hasOwnProperty.call(b("RTISubscriptionManagerConfig").config,"max_subscription_flush_batch_size")?Number(b("RTISubscriptionManagerConfig").config.max_subscription_flush_batch_size):b("ChannelConstants").DEFAULT_MAX_SUBSCRIPTION_FLUSH_BATCH_SIZE};a.prototype.$13=function(a){return new(b("RTISubscriptionToken"))(a,function(a){return this.unsubscribe(a)}.bind(this),function(a,b){return this.mutateContext(a,b)}.bind(this),function(){return this.flush()}.bind(this),function(a){return this.isSubscribed(a)}.bind(this))};a.prototype.$12=function(){if(!g)return;b("Bootloader").loadModules(["SkywalkerOracleManager"],function(a){new a(function(a,b){this.subscribe(a,b)}.bind(this)).startOracle()}.bind(this),"RTISubscriptionManager")};function i(a){b("BanzaiODS").bumpEntityKey("RTISubscriptionManager",a)}function j(a){if(a.getState()===h.SUBSCRIBE)return"subscribe";else if(a.getState()===h.MUTATE_CONTEXT)return"mutate_context";else if(a.getState()===h.UNSUBSCRIBE)return"unsubscribe";return"unknown_state"}var k=new a();b("Run").onUnload(function(){return k.unsubscribeAll()});e.exports=k}),null);
__d("UFIVideoPlayerRegistry",["EventEmitter","VideoPlayerReason","ViewportBounds","destroyOnUnload","getOrCreateDOMID"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new(b("EventEmitter"))(),h=new Map(),i=new Map(),j=new Map(),k=new Map(),l=new Set(),m=new Map();b("destroyOnUnload")(function(){g.removeAllListeners(),h.clear(),i.clear(),j.clear(),k.clear(),l.clear()});function n(a){a=a;var b=[];while(a)b.unshift(a),a=a.parentElement;return b}function o(a,b){__p&&__p();var c=n(a);a=null;var d=null;b.forEach(function(b){var e=b[0];b=b[1];e=n(e);for(var f=0;f<c.length;++f)if(c[f]!==e[f]){(d===null||f>d)&&(d=f,a=b);break}});return a}function p(a,b){__p&&__p();var c=n(a);a=null;var d=null;b.forEach(function(b){var e=b[0];b=b[1];e=n(e);for(var f=0;f<c.length;++f)if(c[f]!==e[f]){(d===null||f>d)&&(d=f,a=b);break}});return a}var q={registerVideoPlayerController:function(a){var b=a.getVideoID(),c=k.get(b);c?c.push(a):(c=[a],k.set(b,c),j["delete"](b));l.forEach(function(a){return a()});a=h.get(b);if(!a)return;a.forEach(function(a){return this._associateUFIController(a,b)}.bind(this))},addOnRegisterListener:function(a){l.add(a)},removeOnRegisterListener:function(a){l["delete"](a)},getAvailableVideoPlayerController:function(a){return i.get(a)},seekAvailableVideoPlayerController:function(a,c){a=q.getAvailableVideoPlayerController(a);if(!a)return;["ready","playing","paused","finished"].includes(a.getState())&&(a.pause(b("VideoPlayerReason").SEEK),a.seek(c),a.play(b("VideoPlayerReason").SEEK))},scrollToAvailableVideo:function(a){a=q.getAvailableVideoPlayerController(a);if(!a)return;a=b("ViewportBounds").getElementPosition(a.getRootNode());window.scroll(0,a.y)},setAvailableVideoPlayerControllerSphericalViewport:function(a,b){a=q.getAvailableVideoPlayerController(a);if(!a)return;a.emit("SphericalVideoViewportTagComment/click",b)},getAvailableVideoPlayerControllerForElement:function(a,c){if(!a)return null;var d=j.get(c)||new Map(),e=b("getOrCreateDOMID")(a);a=d.get(e)||this._findVideoPlayerControllerForElement(a,c);d.set(e,a);j.set(c,d);return a},getAvailableVideoPlayerControllerTimeForElement:function(a,b){if(!a)return null;a=q.getAvailableVideoPlayerControllerForElement(a,b);if(!a)return null;b=a.getCurrentTimePosition();return b>=0?Math.floor(b):null},getAvailableVideoPlayerControllerTime:function(a){a=q.getAvailableVideoPlayerController(a);if(!a)return null;a=a.getCurrentTimePosition();return a>=0?Math.floor(a):null},registerUFIController:function(a,b,c){var d=a.getInstanceID(),e=a.getFluentContentToken();if(!e)return;var f=h.get(e);f?f.push(a):(f=[a],h.set(e,f));g.addListener(d+"/register",b);g.addListener(d+"/unregister",c);this._associateUFIController(a,e)},getAvailableUFIController:function(a){__p&&__p();var b=m.get(a);if(b)return b;var c=h.get(a.getVideoID());if(!c)return null;c.length===1?b=c[0]:b=p(a.getRootNode(),c.map(function(a){return[a.getRootNode(),a]}));if(b){c=this._findVideoPlayerControllerForElement(b.getRootNode(),a.getVideoID());if(c!==a)return null;m.set(a,b)}return b},findVideoPlayerControllerByVideoID:function(a){return this._findVideoPlayerControllerForElement(null,a)},_findVideoPlayerControllerForElement:function(a,b){b=k.get(b);if(!b)return null;if(b.length===1)return b[0];return!a?null:o(a,b.filter(function(a){return!a.isState("destroyed")}).map(function(a){return[a.getRootNode(),a]}))},_associateUFIController:function(a,c){__p&&__p();var d=a.getInstanceID();a=this._findVideoPlayerControllerForElement(a.getRootNode(),c);if(!a||a.isState("destroyed"))return;c=i.get(d);if(c){if(!c.isState("destroyed")&&b("getOrCreateDOMID")(c.getRootNode())===b("getOrCreateDOMID")(a.getRootNode()))return;g.emit(d+"/unregister")}i.set(d,a);g.emit(d+"/register",a)}};e.exports=q}),null);
__d("FBCircularGlyph.react",["cx","Image.react","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){var a=this.props,c=a.circleSize,d=a.glyph,e=a.glyphSize;a=babelHelpers.objectWithoutProperties(a,["circleSize","glyph","glyphSize"]);return b("React").createElement("div",babelHelpers["extends"]({},a,{className:b("joinClasses")("_32qy",a.className),style:babelHelpers["extends"]({width:c,height:c},a.style)}),b("React").createElement("div",{className:"_32qz"},b("React").createElement("div",{className:"_32q-"},b("React").createElement(b("Image.react"),{src:d,width:e,height:e}))))};function a(){h.apply(this,arguments)}a.propTypes={circleSize:c.number,glyph:c.oneOfType([c.object,c.string])};e.exports=a}),null);
__d("LitestandStoryInsertionStatus",["ArbiterMixin"],(function(a,b,c,d,e,f){var g="check";a={registerBlocker:function(a){return this.subscribe(g,function(b,c){c.can_insert&&a()&&(c.can_insert=!1)})},canInsert:function(){var a={can_insert:!0};this.inform(g,a);return a.can_insert}};Object.assign(a,b("ArbiterMixin"));e.exports=a}),null);
__d("RealtimeEntityPresenceTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:RealtimeEntityPresenceLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:RealtimeEntityPresenceLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:RealtimeEntityPresenceLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAction=function(a){this.$1.action=a;return this};a.prototype.setActionReason=function(a){this.$1.action_reason=a;return this};a.prototype.setAppID=function(a){this.$1.app_id=a;return this};a.prototype.setCapabilities=function(a){this.$1.capabilities=a;return this};a.prototype.setClientSubscriptionID=function(a){this.$1.client_subscription_id=a;return this};a.prototype.setClientTimeMs=function(a){this.$1.client_time_ms=a;return this};a.prototype.setEntityHandler=function(a){this.$1.entity_handler=a;return this};a.prototype.setEntityID=function(a){this.$1.entity_id=a;return this};a.prototype.setEntityType=function(a){this.$1.entity_type=a;return this};a.prototype.setEventSource=function(a){this.$1.event_source=a;return this};a.prototype.setExceptionMessage=function(a){this.$1.exception_message=a;return this};a.prototype.setExceptionType=function(a){this.$1.exception_type=a;return this};a.prototype.setGatewayConnected=function(a){this.$1.gateway_connected=a;return this};a.prototype.setSequenceID=function(a){this.$1.sequence_id=a;return this};a.prototype.setSessionID=function(a){this.$1.session_id=a;return this};a.prototype.setSourceHost=function(a){this.$1.source_host=a;return this};a.prototype.setSourceTwTaskHandle=function(a){this.$1.source_tw_task_handle=a;return this};a.prototype.setTopic=function(a){this.$1.topic=a;return this};a.prototype.setUserAgentString=function(a){this.$1.user_agent_string=a;return this};a.prototype.setUserFbid=function(a){this.$1.user_fbid=a;return this};c={action:!0,action_reason:!0,app_id:!0,capabilities:!0,client_subscription_id:!0,client_time_ms:!0,entity_handler:!0,entity_id:!0,entity_type:!0,event_source:!0,exception_message:!0,exception_type:!0,gateway_connected:!0,sequence_id:!0,session_id:!0,source_host:!0,source_tw_task_handle:!0,topic:!0,user_agent_string:!0,user_fbid:!0};e.exports=a}),null);
__d("EntityPresenceLogger",["CurrentUser","EntityPresenceConfig","Int64","Random","RealtimeEntityPresenceTypedLogger","UserAgentData","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b,c){this.entityType=a,this.entityID=b,this.subscriptionID=c,this.shouldLog=this.$1(),this.sequenceID=0}a.prototype.logEnter=function(a){this.shouldLog&&this.$2().setAction("enter").setSequenceID(++this.sequenceID).setCapabilities(a).log()};a.prototype.logSubscribeCallback=function(a){this.shouldLog&&this.$2().setAction("subscribe_completed").setActionReason(a?"succeeded":"failed").log()};a.prototype.logPing=function(){this.shouldLog&&this.$2().setAction("ping").setSequenceID(++this.sequenceID).log()};a.prototype.logSkippedPing=function(){this.shouldLog&&this.$2().setAction("skipped_ping").setSequenceID(this.sequenceID).log()};a.prototype.logChangeCapabilities=function(a){this.shouldLog&&this.$2().setAction("change_capabilities").setSequenceID(++this.sequenceID).setCapabilities(a).log()};a.prototype.logLeave=function(){this.shouldLog&&this.$2().setAction("leave").setSequenceID(++this.sequenceID).log()};a.prototype.logUnsubscribeCallback=function(a){this.shouldLog&&this.$2().setAction("unsubscribe_completed").setActionReason(a?"succeeded":"failed").log()};a.prototype.getLogInfo=function(){return this.shouldLog?{client_subscription_id:this.subscriptionID,sequence_id:this.sequenceID.toString()}:{}};a.prototype.$1=function(){if(b("gkx")("678741"))return!0;return b("gkx")("678742")?b("Random").random()<b("EntityPresenceConfig").sessionLoggingSamplingRate:!1};a.prototype.$2=function(){return new(b("RealtimeEntityPresenceTypedLogger"))().setEntityType(this.entityType).setEntityID(this.entityID).setClientSubscriptionID(this.subscriptionID).setClientTimeMs(Date.now()).setEventSource("client").setAppID("229895473858072").setUserFbid(b("CurrentUser").getID()).setUserAgentString(b("UserAgentData").browserName+"/"+(b("UserAgentData").browserFullVersion||""))};e.exports=a}),null);
__d("EntityPresenceManager",["Arbiter","ChannelConstants","EntityPresenceConfig","EntityPresenceLogger","FBLogger","Int64","RTISubscriptionManager","UserActivity","uuid"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="entity_presence",h="capabilities",i={users:0,activePing:null,start:function(){this.users++;if(!b("EntityPresenceConfig").activePingEnabled)return;b("RTISubscriptionManager").activePing();this.activePing===null&&(this.activePing=setInterval(function(){b("UserActivity").isOnTab()?(b("RTISubscriptionManager").activePing(),b("Arbiter").inform(b("ChannelConstants").ENTITY_PRESENCE_ACTIVE_PING)):b("Arbiter").inform(b("ChannelConstants").ENTITY_PRESENCE_SKIPPED_PING)},b("EntityPresenceConfig").activePingFrequency))},stop:function(){this.users=Math.max(this.users-1,0),this.users===0&&this.activePing!==null&&(clearInterval(this.activePing),this.activePing=null)}};a={enter:function(a,c,d){__p&&__p();var e=g+"/"+a+"/"+c,f=b("uuid")(),j=new(b("EntityPresenceLogger"))(a,c,f);j.logEnter(d);a=j.getLogInfo();d&&(a[h]=d.toString());var k=b("RTISubscriptionManager").subscribe(e,function(){b("FBLogger")(g).warn("Unexpected update received for entity presence")},a,function(a){a=a!=null&&a.data!=null;j.logSubscribeCallback(a)},null,function(a){a=a!=null&&a.data!=null;j.logUnsubscribeCallback(a)});i.start();return{called:!1,capabilities:d,pingListener:null,skippedPingListener:null,changeCapabilities:function(a){j.logChangeCapabilities(a);var b=j.getLogInfo();a&&(b[h]=a.toString());k.mutateContext(b);this.capabilities=a},leave:function(){__p&&__p();if(this.called){b("FBLogger")(g).warn("leave() called twice for same PresenceTokenType");return}j.logLeave();i.stop();b("Arbiter").unsubscribe(this.pingListener);b("Arbiter").unsubscribe(this.skippedPingListener);k.fastUnsubscribe();this.called=!0},_init:function(){this.pingListener=b("Arbiter").subscribe(b("ChannelConstants").ENTITY_PRESENCE_ACTIVE_PING,function(a){j.logPing()});this.skippedPingListener=b("Arbiter").subscribe(b("ChannelConstants").ENTITY_PRESENCE_SKIPPED_PING,function(a){j.logSkippedPing()});return this}}._init()}};e.exports=a}),null);
__d("DocumentFocusForAdsVideoAutoplayRule",["VideoAutoplayRule"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("VideoAutoplayRule"));g=c&&c.prototype;function a(a){g.constructor.call(this,a)}a.prototype.calculateAutoplayScore=function(){return this.isEnabled()?this.$DocumentFocusForAdsVideoAutoplayRule1():1};a.prototype.$DocumentFocusForAdsVideoAutoplayRule1=function(){var a=this.videoUnit.getVideoPlayerController();return a&&a.isAd()?document.hasFocus()?1:0:1};e.exports=a}),null);
__d("FeedVideoClickToPlayController",["DocumentFocusForAdsVideoAutoplayRule","Event","IntersectionObserver","VideoPlayerAbortLoadingExperiment","VideoPlayerExperiments","VideoPlayerReason","destroyOnUnload","gkx","setImmediate","throttle"],(function(a,b,c,d,e,f){__p&&__p();var g=null;function h(){"use strict";this.$4=new Set(),b("gkx")("677712")?this.$3=new(b("IntersectionObserver"))(function(a){this.onWindowEvent()}.bind(this),{threshold:[0,.5,1]}):this.$3=null,this.$2=null,this.$1=null,b("destroyOnUnload")(function(){this.$4.clear(),this.$2&&(this.$2.remove(),this.$2=null),this.$3&&(this.$3.disconnect(),this.$3=null),this.$1&&(this.$1.remove(),this.$1=null),this===g&&(g=null)}.bind(this))}h.prototype.addVideoUnit=function(a){"use strict";__p&&__p();if(b("VideoPlayerExperiments").useBringYourOwnAutoplayRule&&b("VideoPlayerExperiments").pauseAdIfNoDocumentFocus){var c=new(b("DocumentFocusForAdsVideoAutoplayRule"))(a);a.registerAutoplayRule(c)}b("gkx")("677712")?this.$5()||this.$6():this.$7()||this.$8();this.$9()||this.$10();a.addListener("beginPlayback",function(c){c=c.reason;(c===b("VideoPlayerReason").USER||c===b("VideoPlayerReason").LOOP)&&this.$4.add(a)}.bind(this));a.addListener("turnOffAutoplay",function(b){b=b.reason;b==="unmuted"&&this.$4.add(a)}.bind(this));a.getVideoPlayerController().isState("playing")&&!a.isAutoplayable()&&this.$4.add(a);a.addListener("pausePlayback",function(){this.$4["delete"](a)}.bind(this));a.addListener("finishPlayback",function(){this.$4["delete"](a)}.bind(this))};h.registerVideoUnit=function(a){"use strict";g==null&&(g=new h()),g.addVideoUnit(a)};h.prototype.$8=function(){"use strict";this.$2&&this.$2.remove(),this.$2=b("Event").listen(window,"scroll",b("throttle")(this.onWindowEvent.bind(this),200))};h.prototype.$6=function(){"use strict";this.$3&&this.$3.disconnect(),this.$3.observe(window)};h.prototype.$10=function(){"use strict";this.$1&&this.$1.remove(),this.$1=b("Event").listen(window,"resize",b("throttle")(this.onWindowEvent.bind(this),200))};h.prototype.$7=function(){"use strict";return!!this.$2};h.prototype.$5=function(){"use strict";return!!this.$3};h.prototype.$9=function(){"use strict";return!!this.$1};h.prototype.$11=function(a){"use strict";a.pause(b("VideoPlayerReason").AUTOPLAY),!b("VideoPlayerExperiments").noAbortLoadingInFeedClickToPlay&&b("VideoPlayerAbortLoadingExperiment").canAbort&&a.abortLoading(),this.$4["delete"](a)};h.prototype.onWindowEvent=function(){"use strict";this.$4.forEach(function(a){if(a&&!a.isVisible()&&!a.getIsInChannel()){var c=a.getVideoPlayerController();c.isAd()||b("VideoPlayerExperiments").pauseWhenOffscreen?b("VideoPlayerExperiments").slidingWNSv3?b("setImmediate")(function(){a&&!a.isVisible()&&!a.getIsInChannel()&&this.$11(a)}.bind(this)):this.$11(a):c.isMuted()&&c.isState("playing")&&(this.$11(a),c.emit("resumeAutoplay"))}}.bind(this))};e.exports=h}),null);
__d("FeedVideoPlayerController",["csx","Arbiter","AttachmentRelatedShareConstants","DOM","DOMQuery","LitestandStoryInsertionStatus","Run","SubscriptionsHandler","VideoAutoplayPlayerBase","VideoPlayerApiEvents","VideoPlayerExperiments","VideoPlayerFallbackEvents","VideoPlayerLoggerErrors","VideoPlayerLoggerErrorStates","VideoPlayerLoggerEvent","VideoPlayerReason","VideoPlayerStates","getElementPosition","getViewportDimensions"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=42;c=babelHelpers.inherits(a,b("VideoAutoplayPlayerBase"));h=c&&c.prototype;function a(a,c){__p&&__p();h.constructor.call(this);this.$FeedVideoPlayerController1=c;this.$FeedVideoPlayerController2=a;this.$FeedVideoPlayerController3=new Set();this.$FeedVideoPlayerController1.viewport_autoplay||this.$FeedVideoPlayerController3.add("server_blocked");this.$FeedVideoPlayerController12=b("VideoPlayerExperiments").autoplayUntilHalfGone?.5:1;this.$FeedVideoPlayerController4=this.isAutoplayable();this.$FeedVideoPlayerController6=c.controller;this.$FeedVideoPlayerController10=c.startsMuted;this.$FeedVideoPlayerController13=!1;this.$FeedVideoPlayerController7=this.isAutoplayable();(this.$FeedVideoPlayerController6.getIsInChannel()||this.$FeedVideoPlayerController6.isState(b("VideoPlayerStates").PLAYING)&&!this.$FeedVideoPlayerController6.isMuted())&&(this.$FeedVideoPlayerController7=!1);this.$FeedVideoPlayerController6.registerOption("FeedAutoplay","isAutoplaying",function(){return this.$FeedVideoPlayerController7}.bind(this),function(a){this.$FeedVideoPlayerController7=a}.bind(this));this.$FeedVideoPlayerController6.registerOption("FeedAutoplay","isVisibleForAutoplay",function(){return this.isVisible()}.bind(this));this.$FeedVideoPlayerController6.registerOption("FeedAutoplay","shouldOpenSidePaneInChannelView",function(){return c.autoPlayWithChannelViewOrSnowlift});this.$FeedVideoPlayerController6.registerOption("FeedAutoplay","isFilteredByWarningScreen",function(){return this.$FeedVideoPlayerController13}.bind(this),function(a){this.$FeedVideoPlayerController13=a}.bind(this));this.$FeedVideoPlayerController6.setLogEntryPropertyGetters({autoplay_eligible:function(){return this.isAutoplayable()}.bind(this),autoplay_failure_reasons:function(){return JSON.stringify(Array.from(this.$FeedVideoPlayerController3))}.bind(this)});this.$FeedVideoPlayerController14();b("Run").onLeave(function(){this.$FeedVideoPlayerController5.release()}.bind(this));if(this.isState(b("VideoPlayerStates").FALLBACK)){this.$FeedVideoPlayerController15();this.$FeedVideoPlayerController16();return}this.$FeedVideoPlayerController5.addSubscriptions(b("LitestandStoryInsertionStatus").registerBlocker(function(){return this.isState(b("VideoPlayerStates").PLAYING)}.bind(this)))}a.prototype.$FeedVideoPlayerController17=function(){return this.$FeedVideoPlayerController6.isState(b("VideoPlayerStates").DESTROYED)};a.prototype.$FeedVideoPlayerController18=function(){return!!this.$FeedVideoPlayerController1.show_play_button_on_finish};a.prototype.getDistanceToViewport=function(){if(this.$FeedVideoPlayerController17())return-Infinity;if(this.$FeedVideoPlayerController6.isFullscreen())return 0;var a=b("getViewportDimensions")().height,c=this.getDOMPosition();if(c.height===0)return-Infinity;c=c.y+(1-this.$FeedVideoPlayerController12)*c.height;return c-a/2};a.prototype.isVisible=function(){__p&&__p();if(this.$FeedVideoPlayerController17())return!1;if(this.$FeedVideoPlayerController6.isFullscreen())return!0;var a=b("getViewportDimensions")().height,c=b("getViewportDimensions")().width,d=this.getDOMPosition();if(d.height===0)return!1;var e=d.y-i+(1-this.$FeedVideoPlayerController12)*d.height,f=d.y+this.$FeedVideoPlayerController12*d.height,g=d.x+(1-this.$FeedVideoPlayerController12)*d.width,h=d.x+this.$FeedVideoPlayerController12*d.width;if(e<0||f>=a||g<0||h>=c)return!1;e=this.$FeedVideoPlayerController19();return e!==null?this.$FeedVideoPlayerController20(d,b("getElementPosition")(e)):!0};a.prototype.$FeedVideoPlayerController19=function(){var a=b("DOMQuery").scry(this.$FeedVideoPlayerController2.video_container,"^div._1yj5");return a.length>0?a[0]:null};a.prototype.$FeedVideoPlayerController20=function(a,b){var c=a.x;a=a.x+a.width;var d=b.x;b=b.x+b.width;return d<c&&a<b};a.prototype.isAutoplayable=function(){return this.$FeedVideoPlayerController1.viewport_autoplay&&!this.$FeedVideoPlayerController9&&!this.$FeedVideoPlayerController3.size&&!this.$FeedVideoPlayerController13};a.prototype.$FeedVideoPlayerController21=function(a){this.$FeedVideoPlayerController4&&(this.$FeedVideoPlayerController4=!1,this.$FeedVideoPlayerController6.unmute()),this.$FeedVideoPlayerController6.play(a)};a.prototype.getCurrentTimePosition=function(){return this.$FeedVideoPlayerController6.getCurrentTimePosition()};a.prototype.playWithoutUnmute=function(a){this.$FeedVideoPlayerController6.play(a)};a.prototype.getVideoID=function(){return this.$FeedVideoPlayerController6.getVideoID()};a.prototype.$FeedVideoPlayerController22=function(){this.$FeedVideoPlayerController16()};a.prototype.$FeedVideoPlayerController14=function(){__p&&__p();this.$FeedVideoPlayerController5=new(b("SubscriptionsHandler"))();var a=[["finishPlayback",function(){return this.$FeedVideoPlayerController23()}.bind(this)],["turnOffAutoplay",function(a){var b=null;a&&(b=a.reason);this.$FeedVideoPlayerController24(b)}.bind(this)],["unmuteVideo",function(){return this.$FeedVideoPlayerController25()}.bind(this)],["stateChange",function(){return this.$FeedVideoPlayerController26()}.bind(this)],["switchVideo",function(){return this.$FeedVideoPlayerController22()}.bind(this)],["fallbackPlay",function(){return this.$FeedVideoPlayerController27()}.bind(this)],["buffered",function(){return this.$FeedVideoPlayerController16()}.bind(this)],["buffering",function(){return this.$FeedVideoPlayerController16()}.bind(this)],["beginPlayback",function(a){a=a.reason;return this.$FeedVideoPlayerController28(a)}.bind(this)],["toggleFullscreen",function(){return this.$FeedVideoPlayerController29()}.bind(this)],["resumeAutoplay",function(a){var b=null;a&&(b=a.reason);this.$FeedVideoPlayerController30(b)}.bind(this)],["crossfadeWatchAndScroll",function(){return this.$FeedVideoPlayerController31()}.bind(this)],["enterWatchAndScroll",function(){return this.$FeedVideoPlayerController31()}.bind(this)],["exitWatchAndScroll",function(){return this.$FeedVideoPlayerController32()}.bind(this)],["muteVideo",function(){return this.$FeedVideoPlayerController33()}.bind(this)]],c=function(event){return this.emit.bind(this,event)}.bind(this);this.$FeedVideoPlayerController5.addSubscriptions.apply(this.$FeedVideoPlayerController5,a.map(function(a){var b=a[0];a=a[1];return this.$FeedVideoPlayerController6.addListener(b,a)}.bind(this)).concat(b("VideoPlayerApiEvents").map(function(event){return this.$FeedVideoPlayerController6.addListener(event,c(event))}.bind(this))))};a.prototype.$FeedVideoPlayerController33=function(){b("VideoPlayerExperiments").fixFeedVideosPlayOffscreen&&this.$FeedVideoPlayerController34("unmuted")};a.prototype.$FeedVideoPlayerController32=function(){b("VideoPlayerExperiments").fixFeedVideosPlayOffscreen&&(this.$FeedVideoPlayerController34("watch_and_scroll"),this.$FeedVideoPlayerController6&&this.$FeedVideoPlayerController6.isMuted()&&this.$FeedVideoPlayerController34("unmuted"))};a.prototype.$FeedVideoPlayerController31=function(){b("VideoPlayerExperiments").fixFeedVideosPlayOffscreen&&(this.$FeedVideoPlayerController35("watch_and_scroll"),this.$FeedVideoPlayerController34("manually_paused"))};a.prototype.$FeedVideoPlayerController29=function(){this.$FeedVideoPlayerController10&&this.$FeedVideoPlayerController6.unmute()};a.prototype.$FeedVideoPlayerController26=function(){if(this.$FeedVideoPlayerController17())return;this.$FeedVideoPlayerController6.isState(b("VideoPlayerStates").FALLBACK)&&this.$FeedVideoPlayerController15();!this.$FeedVideoPlayerController6.isState(b("VideoPlayerStates").LOADING)&&this.$FeedVideoPlayerController8&&(clearTimeout(this.$FeedVideoPlayerController8),this.$FeedVideoPlayerController8=null);this.$FeedVideoPlayerController16()};a.prototype.$FeedVideoPlayerController28=function(a){b("VideoPlayerExperiments").fixFeedVideosPlayOffscreen&&this.$FeedVideoPlayerController34("manually_paused"),a===b("VideoPlayerReason").USER&&this.$FeedVideoPlayerController10&&this.$FeedVideoPlayerController6.unmute()};a.prototype.preload=function(){this.$FeedVideoPlayerController6.preload&&this.$FeedVideoPlayerController6.preload()};a.prototype.logDisplayed=function(){this.$FeedVideoPlayerController6.logEvent(b("VideoPlayerLoggerEvent").DISPLAYED,{autoplay_reason:this.$FeedVideoPlayerController1.autoplay_reason})};a.prototype.$FeedVideoPlayerController27=function(){var a={error:b("VideoPlayerLoggerErrors").ENTERED_FALLBACK,state:b("VideoPlayerLoggerErrorStates").PLAYBACK_FAILURE};this.$FeedVideoPlayerController6.logEvent(b("VideoPlayerLoggerEvent").ERROR,a)};a.prototype.$FeedVideoPlayerController25=function(){b("VideoPlayerExperiments").slidingWNSv3&&this.$FeedVideoPlayerController6.isAd()&&(this.$FeedVideoPlayerController12=.5),this.$FeedVideoPlayerController10=!1,this.$FeedVideoPlayerController7=!1};a.prototype.$FeedVideoPlayerController23=function(){var a=this.$FeedVideoPlayerController6.getOption("Looping","isLooping");a||this.$FeedVideoPlayerController35("has_seen_finished")};a.prototype.$FeedVideoPlayerController15=function(){this.$FeedVideoPlayerController11={isAutoplaying:this.$FeedVideoPlayerController7,preventAutoplay:this.$FeedVideoPlayerController9},this.$FeedVideoPlayerController35(b("VideoPlayerStates").FALLBACK)};a.prototype.$FeedVideoPlayerController35=function(a){this.$FeedVideoPlayerController9=!0,a&&this.$FeedVideoPlayerController3.add(a),this.$FeedVideoPlayerController7=!1};a.prototype.$FeedVideoPlayerController30=function(a){this.$FeedVideoPlayerController34(a)};a.prototype.$FeedVideoPlayerController34=function(a){a?this.$FeedVideoPlayerController3["delete"](a):(this.$FeedVideoPlayerController3["delete"]("unmuted"),this.$FeedVideoPlayerController3["delete"]("has_seen_finished"),this.$FeedVideoPlayerController3["delete"]("manually_paused")),this.$FeedVideoPlayerController9=this.$FeedVideoPlayerController3.size>0,this.$FeedVideoPlayerController7=!this.$FeedVideoPlayerController9};a.prototype.$FeedVideoPlayerController24=function(a){this.$FeedVideoPlayerController35(a),this.$FeedVideoPlayerController7=!1};a.prototype.$FeedVideoPlayerController16=function(){this.$FeedVideoPlayerController36()};a.prototype.getDOMPosition=function(){return this.$FeedVideoPlayerController6.getDOMPosition()};a.prototype.isLooping=function(){return!!this.$FeedVideoPlayerController6.getOption("Looping","isLooping")};a.prototype.pause=function(a){this.$FeedVideoPlayerController6.pause(a)};a.prototype.$FeedVideoPlayerController37=function(){this.$FeedVideoPlayerController14(),this.$FeedVideoPlayerController3["delete"](b("VideoPlayerStates").FALLBACK),this.$FeedVideoPlayerController7=this.$FeedVideoPlayerController11.isAutoplaying,this.$FeedVideoPlayerController9=this.$FeedVideoPlayerController11.preventAutoplay};a.prototype.$FeedVideoPlayerController36=function(){if(this.isState(b("VideoPlayerStates").FALLBACK)){this.$FeedVideoPlayerController5.release();var a=this.$FeedVideoPlayerController2;a.fallback_link&&(b("DOM").remove(this.$FeedVideoPlayerController6.getVideoNode()),b("DOM").replace(a.video_container,a.fallback_link),b("DOM").appendContent(a.fallback_link,a.video_container));if(this.$FeedVideoPlayerController6.isFallbackRecoverable())this.$FeedVideoPlayerController37();else var c=this.$FeedVideoPlayerController6.addListener(b("VideoPlayerFallbackEvents").RECOVER,function(){this.$FeedVideoPlayerController37(),c.remove()}.bind(this))}};a.prototype.$FeedVideoPlayerController38=function(){b("Arbiter").inform(b("AttachmentRelatedShareConstants").FBVIDEO_CLICK,{attachment:this.$FeedVideoPlayerController2.video_container,fbvideo_id:this.$FeedVideoPlayerController1.video_ids[0]})};a.prototype.isState=function(a){return this.$FeedVideoPlayerController6.isState(a)};a.prototype.getSource=function(){return this.$FeedVideoPlayerController6.getSource()};a.prototype.getIsInChannel=function(){return this.$FeedVideoPlayerController6.getIsInChannel()};a.prototype.getVideoPlayerController=function(){return this.$FeedVideoPlayerController6};a.prototype.abortLoading=function(){this.$FeedVideoPlayerController1.abort_loading_blocked||this.$FeedVideoPlayerController6.abortLoading()};a.prototype.isMuted=function(){return this.$FeedVideoPlayerController6.isMuted()};a.prototype.isPlaying=function(){return this.$FeedVideoPlayerController6.isState("playing")};a.prototype.shouldPauseWhenScrolledOffscreen=function(){return!1};e.exports=a}),null);
__d("VideoFeedRegister",["Bootloader","FeedVideoPlayerController","VideoAutoplayControllerX","VideoPlayerExperiments","VideoPlayerFeedRegisterConfig","gkx"],(function(a,b,c,d,e,f){__p&&__p();a={registerVideoUnit:function(a,c){__p&&__p();var d=c.controller;c.controller.getOption("VideoWithInstreamVideo","enabled")&&(c.controller=c.controller.getOption("VideoWithInstreamVideo","controller"));var e=new(b("FeedVideoPlayerController"))(a,c);c.controller.registerOption("WatchAndScroll","isEligible",function(){return c.wnsEnabled});if(c.channelVersion){if((c.channelVersion!=="channel_view"||!c.channelModule.getInteraction())&&b("VideoPlayerFeedRegisterConfig").watchAndScrollModule&&b("VideoPlayerFeedRegisterConfig").watchAndScrollModule.isActive()){b("VideoPlayerFeedRegisterConfig").watchAndScrollModule.registerChannelVideoController(c.controller);return}c.channelVersion==="channel_view"&&c.channelModule.registerVideoController(c.controller)}else if(b("gkx")("678893")){a=e.getVideoPlayerController();a&&a.runOnApiReady(function(){b("VideoAutoplayControllerX").registerVideoUnit(e)})}else b("VideoAutoplayControllerX").registerVideoUnit(e);c.wnsEnabled&&b("VideoPlayerFeedRegisterConfig").watchAndScrollModule&&b("VideoPlayerFeedRegisterConfig").watchAndScrollModule.registerVideoController(c.controller,c.videoChannelCaller,b("VideoPlayerFeedRegisterConfig").watchAndScrollV3,b("VideoPlayerFeedRegisterConfig").wnsChannelsIntegrationEnabled);!b("VideoPlayerExperiments").disableDisableOffscreenPlayModule&&b("VideoPlayerFeedRegisterConfig").disableOffscreenPlayModule&&b("VideoPlayerFeedRegisterConfig").disableOffscreenPlayModule.registerVideoUnit(e);if(c.autoPlayWithChannelViewOrSnowlift){var f=d;f.runOnApiReady(function(){b("Bootloader").loadModules(["PhotoSnowlift"],function(a){return a.bootstrap(f.getVideoURL())},"VideoFeedRegister")})}}};e.exports=a}),null);
__d("VideoPlayerRegistry",["regeneratorRuntime","Promise","EventEmitter"],(function(a,b,c,d,e,f){__p&&__p();var g=new Set(),h=new(b("EventEmitter"))(),i={ADDED:"added",REMOVED:"removed",addListener:function(a,b){return h.addListener(a,b)},once:function(a,b){return h.once(a,b)},has:function(a){return g.has(a)},add:function(a){if(i.has(a))return!1;g.add(a);h.emit(i.ADDED,a);return!0},remove:function(a){if(!i.has(a))return!1;g["delete"](a);h.emit(i.REMOVED,a);return!0},count:function(){return g.size},getList:function(){return Array.from(g)},getByRootNode:function(a){__p&&__p();var c;return b("regeneratorRuntime").async(function(d){__p&&__p();while(1)switch(d.prev=d.next){case 0:c=null;this.getList().forEach(function(b){b.getByRootNode()===a&&(c=b)});if(c){d.next=6;break}d.next=5;return b("regeneratorRuntime").awrap(new(b("Promise"))(function(b,c){var d=this.addListener(i.ADDED,function(c){c.getRootNode()===a&&(d.remove(),b(c))})}.bind(this)));case 5:c=d.sent;case 6:return d.abrupt("return",c);case 7:case"end":return d.stop()}},null,this)}};e.exports=i}),null);
__d("VideoScrubberPreviewComponent",[],(function(a,b,c,d,e,f){__p&&__p();function g(a,b){"use strict";__p&&__p();if(!b)throw new Error("VideoScrubberPreview Component config null.");this.$4=b;this.$5=a;this.$2=b.hasPreviewThumbnails;this.$3=g.getSpriteURIs(b.spriteIndexToURIMap);this.$5.isPlayingVODHighlights()||this.$6();this.$5.addListener("switchedToFullVideo",function(){return this.$6()}.bind(this));this.$5.addListener("switchedToLiveVODHighlights",function(){return this.$7()}.bind(this))}g.prototype.hasPreviewThumbnails=function(){"use strict";return this.$2};g.prototype.$6=function(){"use strict";this.$5.registerOption("VideoScrubberPreviewComponent","scrubberPreviewSprites",this.getSprites.bind(this)),this.$5.registerOption("VideoScrubberPreviewComponent","hasPreviewThumbnails",this.hasPreviewThumbnails.bind(this)),this.$5.registerOption("VideoScrubberPreviewComponent","previewThumbnailInformation",this.getPreviewThumbnailInformation.bind(this))};g.prototype.$7=function(){"use strict";this.$5.unregisterOption("VideoScrubberPreviewComponent","scrubberPreviewSprites"),this.$5.unregisterOption("VideoScrubberPreviewComponent","hasPreviewThumbnails"),this.$5.unregisterOption("VideoScrubberPreviewComponent","previewThumbnailInformation")};g.prototype.getSprites=function(){"use strict";return this.$3};g.prototype.getPreviewThumbnailInformation=function(){"use strict";this.hasPreviewThumbnails()?this.$4.imagesPerColumn=this.$4.maxImagesPerSprite/this.$4.imagesPerRow:this.$4.imagesPerColumn=0;return this.$4};g.getSpriteURIs=function(a){"use strict";var b=new Map();for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.set(parseInt(c,10),a[c]);return b};e.exports=g}),null);
__d("VODPresenceCVCDisplayStage",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({PRE_ENTER:"pre_enter",POST_ENTER:"post_enter"})}),null);
__d("VideoVODCVCFetchingQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1825694550811294"};c.getQueryID=function(){"use strict";return"304616633641541"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("VideoVODCVCFetching",["Run","SubscriptionsHandler","VideoSocialFabricCVCExperiments","VideoVODCVCFetchingQueryWebGraphQLQuery","VODPresenceCVCDisplayStage","WebGraphQL","keyMirror","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("keyMirror")(b("VODPresenceCVCDisplayStage")),h="vod_cvc/",i=1e4;function a(a){__p&&__p();this.$5=null;this.$7=i;this.$8=!1;this.$12=function(){this.$8=!0,clearTimeout(this.$6)}.bind(this);if(!b("VideoSocialFabricCVCExperiments").isCVCPolledByGraphQL&&!b("VideoSocialFabricCVCExperiments").isCVCDisplayEnabled||a.isAd()||a.isLiveVideo())return;b("VideoSocialFabricCVCExperiments").isCVCPulledPreenter&&this.$10(a,g.PRE_ENTER);this.$9=a;a.registerOption("VideoVODCVCFetching","currentViewerCount",function(){return this.$1}.bind(this));this.$3=new(b("SubscriptionsHandler"))();this.$3.addSubscriptions(a.addListener("beginPlayback",function(){this.$5=null}.bind(this)),a.addListener("updateStatus",function(b){a.isState("playing")&&(this.$5===null&&(this.$5=b.position),this.$5+3<=b.position&&(this.$5=Infinity,this.$11(a)))}.bind(this)),a.addListener("pausePlayback",this.$12),a.addListener("finishPlayback",function(){return!a.getOption("Looping","isLooping")&&this.$12()}.bind(this)),a.addListener("becomeInvisible",this.$12));b("Run").onLeave(function(){return this.cleanOnLeave()}.bind(this))}a.prototype.cleanOnLeave=function(){this.$3&&this.$3.release(),this.$12(),this.$9&&this.$9.unregisterOption("VideoVODCVCFetching","currentViewerCount")};a.prototype.$11=function(a){this.$8=!1,this.$10(a,g.POST_ENTER)};a.prototype.getQuery=function(a,c){return new(b("VideoVODCVCFetchingQueryWebGraphQLQuery"))({video_id:a.getVideoID(),stage:c})};a.prototype.$10=function(a,c){__p&&__p();var d=b("WebGraphQL").exec(this.getQuery(a,c));b("promiseDone")(d,function(b){__p&&__p();if(this.$8)return;b=b.vod_presence_cvc;if(b){var d=b.cvc||0,e=b.is_displayed===null?!0:b.is_displayed;b=b.next_poll_ms||i;this.$1=d;a.emit("VideoVODCVC/viewCountChange",{cvc:d,shouldDisplayCVC:e});b>=0&&c===g.POST_ENTER&&(this.$6=setTimeout(this.$10.bind(this,a,c),b))}}.bind(this),function(b){if(this.$8)return;this.$6=setTimeout(this.$10.bind(this,a,c),this.$7);this.$7=Math.min(Number.MAX_SAFE_INTEGER,2*this.$7)}.bind(this))};a.prototype.$13=function(a){return h+a};e.exports=a}),null);
__d("EntityPresenceTypeEnum",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({EXTERNAL_CASE:"external_case",FRIEND_ONE:"friend_one",GMS_SRT:"gms_srt",LIVE_VIDEO:"live_video",LIVING_ROOM:"living_room",SPECTACLES:"spectacles",SRT_CUSTOMER_SUPPORT:"srt_customer_support",VOD:"vod"})}),null);
__d("VideoPlayerFormatsID",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({UNKNOWN:0,INLINE:1,SNOWLIFT:2,PERMALINK:3,CHANNEL:4,FULL_SCREEN:5,SOCIAL_PLAYER:6,TV:7,MISC:8,WATCH_SCROLL:9,WATCH_SCROLL_APP_BACKGROUND:10,WATCH_AND_GO:11,WATCH_AND_BROWSE:12,CANVAS:13,TAHOE:14,FB_STORIES:15})}),null);
__d("VideoPlayerSourceID",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({UNKNOWN:0,TOP_LIVE_BOOKMARK:1,VIDEO_HOME:2,MEDIA_GALLERY:3,DIRECT_INBOX:4,FB_STORIES:5,BACKSTAGE:6,NOTIFICATIONS:7,LIVING_ROOM_RECAP:8,LIVING_ROOM:9,INSTANT_SHOPPING:10,GROUP:11,COMMERCE:12,NEWSFEED:13,PHOTOSFEED:14,PERMALINK:15,INSTANT_ARTICLES:16,PAGE_TIMELINE:17,EVENTS:18,EXPLORE_FEED:19,SEARCH:20,MOVIE_CHECKOUT_FLOW:21,LIVE_CHAINING:22,SAVED:23,USER_TIMELINE:24})}),null);
__d("VideoVODCVCSubscription",["EntityPresenceManager","EntityPresenceTypeEnum","Int64","Run","SubscriptionsHandler","VideoPlayerFormats","VideoPlayerFormatsID","VideoPlayerLoggerEvent","VideoPlayerOrigins","VideoPlayerSourceID","VideoSocialFabricCVCExperiments"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=42,h=7,i=5;function a(a){__p&&__p();this.$8=function(){this.$6=null,this.$5&&(this.$5&&this.$5.leave(),this.$5=null)}.bind(this);if(!b("VideoSocialFabricCVCExperiments").isCVCSubscriptionEnabled||a.isAd()||a.isLiveVideo())return;this.$1=new(b("SubscriptionsHandler"))();this.$5=null;this.$2=a;this.$4=!1;this.$3=this.$2.getPlayerOrigin();this.$6=null;this.$1.addSubscriptions(a.addListener("beginPlayback",function(){this.$6=null}.bind(this)),a.addListener("updateStatus",function(a){this.$2.isState("playing")&&(this.$6===null&&(this.$6=a.position),this.$6+3<=a.position&&(this.$2.logEvent(b("VideoPlayerLoggerEvent").PLAYED_FOR_THREE_SECONDS),this.$6=Infinity,this.$7()))}.bind(this)),a.addListener("pausePlayback",this.$8),a.addListener("finishPlayback",function(){return!a.getOption("Looping","isLooping")&&this.$8()}.bind(this)),a.addListener("becomeInvisible",this.$8),a.addListener("seekEnd",this.$8),a.addListener("TahoeController/exitTahoe",this.$8));b("Run").onLeave(function(){return this.cleanOnLeave()}.bind(this))}a.prototype.cleanOnLeave=function(){this.$8(),this.$1&&this.$1.release()};a.prototype.$7=function(){if(this.$5)return;this.$5=b("EntityPresenceManager").enter(b("EntityPresenceTypeEnum").VOD,this.$2.getVideoID(),this.getLoggingCapabilitiesForEntityPresence())};a.prototype.getLoggingCapabilitiesForEntityPresence=function(){__p&&__p();var a=b("Int64").fromInt(0);a=b("Int64").fromString(Date.now().toString());var c=7;a=a.shiftLeft(c);b("VideoSocialFabricCVCExperiments").isCVCPolledBySkywalker||(a=a.add(b("Int64").fromInt(1)));c=64-(g+h+i+c);a=a.shiftLeft(c);a=a.shiftLeft(i);a=a.add(b("Int64").fromInt(this.mapPlayerFormatToCapabilityBits(this.$2.getPlayerFormat())));a=a.shiftLeft(h);a=a.add(b("Int64").fromInt(this.mapPlayerOriginToCapabilityBits(this.$3)));return a};a.prototype.mapPlayerOriginToCapabilityBits=function(a){__p&&__p();if(a===null)return b("VideoPlayerSourceID").UNKNOWN;switch(a){case b("VideoPlayerOrigins").COMMERCE:return b("VideoPlayerSourceID").COMMERCE;case b("VideoPlayerOrigins").DIRECT_INBOX:return b("VideoPlayerSourceID").DIRECT_INBOX;case b("VideoPlayerOrigins").EVENTS:return b("VideoPlayerSourceID").EVENTS;case b("VideoPlayerOrigins").EXPLORE_FEED:return b("VideoPlayerSourceID").EXPLORE_FEED;case b("VideoPlayerOrigins").FB_STORIES:return b("VideoPlayerSourceID").FB_STORIES;case b("VideoPlayerOrigins").GROUP:return b("VideoPlayerSourceID").GROUP;case b("VideoPlayerOrigins").INSTANT_ARTICLES:return b("VideoPlayerSourceID").INSTANT_ARTICLES;case b("VideoPlayerOrigins").INSTANT_SHOPPING:return b("VideoPlayerSourceID").INSTANT_ARTICLES;case b("VideoPlayerOrigins").LIVE_CHAINING:return b("VideoPlayerSourceID").LIVE_CHAINING;case b("VideoPlayerOrigins").LIVING_ROOM:return b("VideoPlayerSourceID").LIVING_ROOM;case b("VideoPlayerOrigins").LIVING_ROOM_RECAP:return b("VideoPlayerSourceID").LIVING_ROOM_RECAP;case b("VideoPlayerOrigins").MEDIA_GALLERY:return b("VideoPlayerSourceID").MEDIA_GALLERY;case b("VideoPlayerOrigins").MOVIE_CHECKOUT_FLOW:return b("VideoPlayerSourceID").MOVIE_CHECKOUT_FLOW;case b("VideoPlayerOrigins").NEWSFEED:return b("VideoPlayerSourceID").NEWSFEED;case b("VideoPlayerOrigins").NOTIFICATIONS:return b("VideoPlayerSourceID").NOTIFICATIONS;case b("VideoPlayerOrigins").PAGE_TIMELINE:return b("VideoPlayerSourceID").PAGE_TIMELINE;case b("VideoPlayerOrigins").PERMALINK:return b("VideoPlayerSourceID").PERMALINK;case b("VideoPlayerOrigins").PHOTOSFEED:return b("VideoPlayerSourceID").PHOTOSFEED;case b("VideoPlayerOrigins").SAVED:return b("VideoPlayerSourceID").SAVED;case b("VideoPlayerOrigins").SEARCH:return b("VideoPlayerSourceID").SEARCH;case b("VideoPlayerOrigins").TOP_LIVE_BOOKMARK:return b("VideoPlayerSourceID").TOP_LIVE_BOOKMARK;case b("VideoPlayerOrigins").USER_TIMELINE:return b("VideoPlayerSourceID").USER_TIMELINE;case b("VideoPlayerOrigins").VIDEO_HOME:return b("VideoPlayerSourceID").VIDEO_HOME;case b("VideoPlayerOrigins").UNKNOWN:default:return b("VideoPlayerSourceID").UNKNOWN}};a.prototype.mapPlayerFormatToCapabilityBits=function(a){__p&&__p();if(a===null)return b("VideoPlayerFormatsID").UNKNOWN;switch(a){case b("VideoPlayerFormats").INLINE:return b("VideoPlayerFormatsID").INLINE;case b("VideoPlayerFormats").SNOWLIFT:return b("VideoPlayerFormatsID").SNOWLIFT;case b("VideoPlayerFormats").PERMALINK:return b("VideoPlayerFormatsID").PERMALINK;case b("VideoPlayerFormats").CHANNEL:return b("VideoPlayerFormatsID").CHANNEL;case b("VideoPlayerFormats").FULL_SCREEN:return b("VideoPlayerFormatsID").FULL_SCREEN;case b("VideoPlayerFormats").SOCIAL_PLAYER:return b("VideoPlayerFormatsID").SOCIAL_PLAYER;case b("VideoPlayerFormats").TV:return b("VideoPlayerFormatsID").TV;case b("VideoPlayerFormats").MISC:return b("VideoPlayerFormatsID").MISC;case b("VideoPlayerFormats").WATCH_SCROLL:return b("VideoPlayerFormatsID").WATCH_SCROLL;case b("VideoPlayerFormats").WATCH_SCROLL_APP_BACKGROUND:return b("VideoPlayerFormatsID").WATCH_SCROLL_APP_BACKGROUND;case b("VideoPlayerFormats").WATCH_AND_GO:return b("VideoPlayerFormatsID").WATCH_AND_GO;case b("VideoPlayerFormats").WATCH_AND_BROWSE:return b("VideoPlayerFormatsID").WATCH_AND_BROWSE;case b("VideoPlayerFormats").CANVAS:return b("VideoPlayerFormatsID").CANVAS;case b("VideoPlayerFormats").TAHOE:return b("VideoPlayerFormatsID").TAHOE;case b("VideoPlayerFormats").FB_STORIES:return b("VideoPlayerFormatsID").FB_STORIES;default:return b("VideoPlayerFormatsID").UNKNOWN}};e.exports=a}),null);
__d("VideoWithClickToTahoe",["cx","AsyncRequest","Bootloader","CSS","Event","URI","VideoPlayerReason","gkx","logVideosClickTracking"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=!1;function a(a,c,d,e,f,g,h,i,j,k){this.$5=a,this.$6=new(b("URI"))(c),this.$4=d,this.$1=e,this.$2=f,this.$7=g,this.$8=h,this.$9=i,this.$10=j,this.$11=k,this.$5.addListener("stateChange",this.$12.bind(this)),this.$5.addListener("toggleFullscreen",this.$12.bind(this)),this.$5.setLogEntryPropertyGetters({channel_eligibility:"eligible"}),this.$5.addListener("enterTahoe",this.$13.bind(this,"control_click")),this.canOpenTahoe()&&this.$14(),this.$5.addListener("clickVideo",this.$15.bind(this)),this.$5.hasSeenClick()&&this.$15()}a.prototype.$16=function(){return this.$5.hasOption("VideoControls","available")};a.prototype.$14=function(){if(this.$17())return;var a=this.$5.getVideoNode();b("CSS").addClass(a,"_62vr");b("CSS").addClass(a,"_1yhw");b("CSS").addClass(a,"_400z");b("CSS").addClass(a,"_1vek");var c=this.$5.isBroadcast();c&&b("CSS").addClass(a,"_3yn5")};a.prototype.$18=function(){if(this.$17())return;var a=this.$5.getVideoNode();b("CSS").removeClass(a,"_62vr");b("CSS").removeClass(a,"_1yhw");b("CSS").removeClass(a,"_400z");b("CSS").removeClass(a,"_1vek");b("CSS").removeClass(a,"_3yn5")};a.prototype.$12=function(){this.$17()||(this.canOpenTahoe()?this.$14():this.$18())};a.prototype.$17=function(){return this.$5.isState("destroyed")};a.prototype.$15=function(){if(!this.canOpenTahoe())if(this.$5.isState("playing")){if(this.$5.getOption("VideoWithLiveBroadcast","isLive")||this.$5.getOption("VideoWithInstreamVideo","disableClickToPause"))return;this.$5.pause(b("VideoPlayerReason").USER)}else b("logVideosClickTracking")(this.$5.getVideoNode()),this.$5.play(b("VideoPlayerReason").USER);else this.$13("player_click")};a.prototype.$19=function(){h=!0,b("Bootloader").loadModules(["TahoeController","TahoeVideoView"],function(){},"VideoWithClickToTahoe"),this.$3&&this.$3.remove(),this.$3=null};a.prototype.canOpenTahoe=function(){var a=this.$5.getSource();if(a=="tahoe"||a=="channel")return!1;a=this.$5.getOption("VideoWithInstreamVideo","disableClickToPause");return this.$5.isFullscreen()||a||!this.$5.isState("playing")?!1:!0};a.prototype.$13=function(a){if(this.$2)new(b("AsyncRequest"))(this.$6.toString()).send(),this.$5.pause();else{h=!0;this.$3&&this.$3.remove();this.$3=null;var c=b("gkx")("678894")?b("URI").getNextURI():b("URI").getRequestURI(),d=babelHelpers["extends"]({},c.getQueryData(),{ref:"tahoe"});b("Bootloader").loadModules(["TahoeController"],function(b){b.openFromVideoPlayer(this.$5,this.$6.setQueryData(d),this.$4,this.$1,a,this.$7,this.$8,this.$9,this.$10,this.$11)}.bind(this),"VideoWithClickToTahoe")}};a.setUpBootloadOnHover=function(a){if(h||a.$3)return;a.$3=b("Event").listen(a.$5.getRootNode(),"mouseover",a.$19.bind(a))};e.exports=a}),null);
__d("VideoWithFluentUFISupport",["UFIVideoPlayerRegistry"],(function(a,b,c,d,e,f){function a(a){"use strict";b("UFIVideoPlayerRegistry").registerVideoPlayerController(a)}e.exports=a}),null);
__d("VideoWithSequentialAutoplay",["Arbiter","SubscriptionsHandler","VideoPlayerHTML5Experiments","VideoPlayerReason","destroyOnUnload"],(function(a,b,c,d,e,f){__p&&__p();function a(a,c){"use strict";__p&&__p();this.$1=a;this.$2=c;this.$3=new(b("SubscriptionsHandler"))();if(b("VideoPlayerHTML5Experiments").displayLoopingWhenAutoplayNextVideo&&this.$2&&this.$2!=="0")if(this.$1.hasOption("Looping","disabled"))this.$1.setOption("Looping","disabled",!0);else{var d=this.$1.addListener("optionsChange",function(){this.$1.hasOption("Looping","disabled")&&(this.$1.setOption("Looping","disabled",!0),d.remove())}.bind(this));this.$3.addSubscriptions(d)}this.$1.addListener("finishPlayback",this.$4.bind(this));this.$3.addSubscriptions(b("Arbiter").subscribe("nextVideoAutoplay",function(a,c){c.nextVideoID==this.$1.getVideoID()&&this.$1.play(b("VideoPlayerReason").AUTOPLAY)}.bind(this)));b("destroyOnUnload")(function(){return this.$3.release()}.bind(this))}a.prototype.$4=function(){"use strict";b("Arbiter").inform("nextVideoAutoplay",{nextVideoID:this.$2})};e.exports=a}),null);
__d("VideoWithVODBroadcast",[],(function(a,b,c,d,e,f){function a(a){"use strict";a.registerOption("VideoWithVODBroadcast","isLiveVOD",function(){return!0})}e.exports=a}),null);
__d("XVideoWithRapidFeedbackAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video/instream_video/rapid_feedback/async/",{ad_type:{type:"Enum",required:!0,enumType:1},video_id:{type:"String",required:!0},ad_client_token:{type:"String"},elapsed_time_since_ad:{type:"Float"},ad_position_in_video:{type:"Float"},player_origin:{type:"Enum",enumType:1},player_sub_origin:{type:"String"},player_format:{type:"Enum",enumType:1},script_path:{type:"String"},is_indicator_shown:{type:"Bool",defaultValue:!1},is_ad_complete:{type:"Bool",defaultValue:!1}})}),null);
__d("VideoWithRapidFeedback",["AsyncRequest","DateConsts","ScriptPath","VideoPlayerStates","ViewportTrackingHelper","XVideoWithRapidFeedbackAsyncController","onViewportChanged"],(function(a,b,c,d,e,f){__p&&__p();var g=10*b("DateConsts").MS_PER_SEC;function a(a,c){"use strict";this.$1=a,this.$2=c,this.$3=0,this.$4=0,this.$6=!1,this.$7=!1,a.isState(b("VideoPlayerStates").PLAYING)&&this.$8(),a.addListener("beginPlayback",this.$8.bind(this)),a.addListener("pausePlayback",this.$9.bind(this)),a.addListener("commercialBreak/vodBreakStarting",this.$10.bind(this)),a.addListener("commercialBreak/showUFI",this.$11.bind(this)),this.$5=this.$12(),b("onViewportChanged")(this.$13.bind(this))}a.prototype.$8=function(){"use strict";this.$3===0&&(this.$3=Date.now())};a.prototype.$9=function(){"use strict";this.$3>0&&(this.$4+=Date.now()-this.$3),this.$3=0};a.prototype.$10=function(){"use strict";this.$6=!0};a.prototype.$11=function(){"use strict";this.$6&&(this.$7=!0)};a.prototype.$13=function(){"use strict";__p&&__p();if(this.$1.isState(b("VideoPlayerStates").DESTROYED))return;var a=this.$5;this.$5=this.$12();if(a&&!this.$5){a=this.$4;this.$3>0&&(a+=Date.now()-this.$3);a>g&&(this.$4=0,this.$3=0,this.$14())}};a.prototype.$12=function(){"use strict";return b("ViewportTrackingHelper").isVisible(this.$1.getRootNode(),0)};a.prototype.$14=function(){"use strict";var a=null,c=null,d=null,e=null,f=null,g=null,h=this.$1.getOption("VideoWithInstreamVideo","controller");if(h){h=h.getMostRecentAdInfo();h&&h.adClientToken&&(a=h.adClientToken,c=Date.now()-h.adStartPlayingTimeMs,d=h.adPositionInVideoMs,e=h.playerOrigin,f=h.playerSubOrigin,g=h.playerFormat)}h=b("XVideoWithRapidFeedbackAsyncController").getURIBuilder().setEnum("ad_type",this.$2).setString("video_id",this.$1.getVideoID()).setString("ad_client_token",a).setFloat("elapsed_time_since_ad",c).setFloat("ad_position_in_video",d).setEnum("player_format",g).setEnum("player_origin",e).setString("player_sub_origin",f).setString("script_path",b("ScriptPath").getScriptPath()).setBool("is_indicator_shown",this.$6).setBool("is_ad_complete",this.$7);new(b("AsyncRequest"))(h.getURI()).send()};e.exports=a}),null);
__d("VideoPlayerRegistryComponent",["invariant","SubscriptionsHandler","VideoPlayerRegistry"],(function(a,b,c,d,e,f,g){__p&&__p();function a(a){"use strict";this.$1=a||null,this.$2=new(b("SubscriptionsHandler"))(),this.$1&&this.$3()}a.prototype.destroy=function(){"use strict";this.$4(),this.$1=null};a.prototype.getController=function(){"use strict";var a=this.$1;a||g(0,2032);return a};a.prototype.enable=function(a){"use strict";this.$1&&this.$1!==a&&this.$4(),this.$1=a,this.$3()};a.prototype.disable=function(a){"use strict";this.$4()};a.prototype.$3=function(){"use strict";var a=this.getController();b("VideoPlayerRegistry").add(a);this.$2.addSubscriptions(a.addListener("stateChange",function(){a.isState("destroyed")&&this.destroy()}.bind(this)))};a.prototype.$4=function(){"use strict";var a=this.getController();this.$2.release();this.$2.engage();b("VideoPlayerRegistry").remove(a)};e.exports=a}),null);
__d("PlayerKeyboardControls.react",["ix","cx","CenteredContainer.react","Event","EventListener","FBCircularGlyph.react","Image.react","Keys","LiveRewindUtils","LiveVideoPlayerActions","LiveVideoRewindLoggerEvent","React","ReactDOM","VideoPlayerLoggerSource","VideoPlayerReason","asset","clamp","joinClasses"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i,j=10,k=.1;c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.state={action:null},b}a.prototype.componentDidMount=function(){"use strict";this.$1=b("EventListener").listen(this.props.controller.getRootNode(),"keydown",this.$2.bind(this))};a.prototype.componentWillUnmount=function(){"use strict";this.$1&&this.$1.remove()};a.prototype.$3=function(){"use strict";if(!this.props.isLiveRewindEnabled)return;var a=this.props.controller,c=a.getCurrentTimePosition();this.setState({action:"pause"});a.pause(b("VideoPlayerReason").USER);b("LiveVideoPlayerActions").setIsRewound(a,!0);b("LiveRewindUtils").logLiveRewindEvent(b("LiveVideoRewindLoggerEvent").PAUSE,a,null,c,null,c)};a.prototype.$4=function(){"use strict";if(!this.props.isLiveRewindEnabled)return;var a=this.props.controller,c=a.getCurrentTimePosition();this.setState({action:"play"});a.play(b("VideoPlayerReason").USER);b("LiveRewindUtils").logLiveRewindEvent(b("LiveVideoRewindLoggerEvent").PLAY,a,null,c,null,c)};a.prototype.$5=function(){"use strict";return this.props.seekFrameWhenPaused&&!this.props.controller.isState("playing")?1/30:this.props.seekIncrement};a.prototype.$2=function(a){"use strict";__p&&__p();var c=this.props.controller,d=this.props.controller.getSource()===b("VideoPlayerLoggerSource").TAHOE;if(this.props.isFullscreenRequired&&!c.isFullscreen())return;var e=c.getCurrentTimePosition(),f=c.getVolume();switch(b("Event").getKeyCode(a)){case b("Keys").SPACE:d&&a.preventDefault();if(c.isState("playing")){if(this.props.isLiveStreaming){this.$3();break}this.setState({action:"pause"});c.pause(b("VideoPlayerReason").USER)}else{if(this.props.isLiveStreaming){this.$4();break}this.setState({action:"play"});c.play(b("VideoPlayerReason").USER)}break;case b("Keys").LEFT:if(this.props.isLiveStreaming){this.props.isLiveRewindEnabled&&(b("LiveRewindUtils").seekBack(c),this.setState({action:"rewind"}));break}this.setState({action:"rewind"});c.seek(e-this.$5());break;case b("Keys").RIGHT:if(this.props.isLiveStreaming){this.props.isLiveRewindEnabled&&(b("LiveRewindUtils").seekForward(c),this.setState({action:"forward"}));break}this.setState({action:"forward"});c.seek(e+this.$5());break;case b("Keys").UP:if(!c.isBroadcaster()&&c.isAudioBlocked())break;d&&a.preventDefault();e=Math.min(f+k,1);this.setState({action:"volume-up"});c.setVolume(e);c.isMuted()&&c.unmute();break;case b("Keys").DOWN:if(!c.isBroadcaster()&&c.isAudioBlocked())break;d&&a.preventDefault();e=Math.max(f-k,0);e<.001?(this.setState({action:"mute"}),c.mute()):(this.setState({action:"volume-down"}),c.setVolume(e));break;case b("Keys").M:if(!c.isBroadcaster()&&c.isAudioBlocked())break;c.isMuted()?(this.setState({action:"unmute"}),c.unmute()):(this.setState({action:"mute"}),c.mute());break;case b("Keys").F:c.isFullscreen()?this.setState({action:"exit-fs"}):this.setState({action:"enter-fs"});setTimeout(function(){return c.toggleFullscreen()},100);break;case b("Keys").COMMA:this.props.enablePlaybackRateControl&&c.setPlaybackRate(b("clamp")(c.getPlaybackRate()/2,.5,1));break;case b("Keys").PERIOD:this.props.enablePlaybackRateControl&&c.setPlaybackRate(b("clamp")(c.getPlaybackRate()*2,1,2));break}};a.prototype.render=function(){"use strict";__p&&__p();if(!this.state.action)return null;var a=this.props.controller,c="",d="",e=null;switch(this.state.action){case"play":c=g("476305");break;case"pause":c=g("476304");break;case"rewind":c=g("476307");d="_380-";a.isState("playing")?e=this.props.seekIncrement!==j?null:b("React").createElement(b("Image.react"),{className:"_pa6",src:g("476306")}):e=this.props.seekFrameWhenPaused?null:b("React").createElement(b("Image.react"),{className:"_pa6",src:g("476306")});break;case"forward":c=g("476308");d="_3813";a.isState("playing")?e=this.props.seekIncrement!==j?null:b("React").createElement(b("Image.react"),{className:"_pa6",src:g("476306")}):e=this.props.seekFrameWhenPaused?null:b("React").createElement(b("Image.react"),{className:"_pa6",src:g("476306")});break;case"volume-up":case"unmute":c=g("476301");break;case"volume-down":c=g("476302");break;case"mute":c=g("476303");break;case"enter-fs":c=g("476310");break;case"exit-fs":c=g("476309");break}a=b("React").createElement(b("FBCircularGlyph.react"),{circleSize:120,className:b("joinClasses")(d,"_3814"),glyph:c,ref:function(a){a=b("ReactDOM").findDOMNode(a);if(!a||!d)return;a.classList.remove(d);void a.offsetWidth;a.classList.add(d)}});return b("React").createElement(b("CenteredContainer.react"),{className:"_3815 _381b",fullHeight:!0,horizontal:!0,ref:function(a){a=b("ReactDOM").findDOMNode(a);if(!a)return;a.classList.remove("_381b");void a.offsetWidth;a.classList.add("_381b")},vertical:!0},b("React").createElement("div",null,a,e))};a.defaultProps={enablePlaybackRateControl:!1,isFullscreenRequired:!1,seekIncrement:j,seekFrameWhenPaused:!1};e.exports=a}),null);
__d("VideoShowsShowmarkOverlay",["cx","CSS","VideoPlayerReason"],(function(a,b,c,d,e,f,g){__p&&__p();var h=4e3;i.init=function(a,b){"use strict";return new i(a,b)};function i(a,c){"use strict";this.handleBeginPlayback=function(){this.$4||(this.$5&&(clearTimeout(this.$5),this.$5=null),this.$4=!0,b("CSS").removeClass(this.$2,"_3nj3")),this.$5=setTimeout(function(){b("CSS").addClass(this.$2,"_3nj3")}.bind(this),h)}.bind(this),this.handlePausePlayback=function(a){a===b("VideoPlayerReason").AUTOPLAY&&(this.$4=!1)}.bind(this),this.$1=a,this.$2=c,this.$4=!0,this.$5=null,a.addListener("beginPlayback",this.handleBeginPlayback),a.addListener("pauseRequested",this.handlePausePlayback)}e.exports=i}),null);